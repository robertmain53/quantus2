{
  "version": "1.0.0",
  "metadata": {
    "title": "Reverse Stock Split Simulator",
    "description": "Simulate the effect of a reverse stock split on share count, share price, market capitalization, fractional-share handling and cost basis. Includes options for cash‑out of fractional shares and preserves market‑cap invariance for planning and reporting."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "cash_out",
    "methods": {
      "standard": {
        "label": "Standard reverse split (no fractional cash‑out)",
        "description": "Computes post‑split share count and price; useful for modeling outcomes when fractional shares are retained or issued.",
        "variables": {
          "factor": {
            "expression": "split_old / split_new",
            "dependencies": [
              "split_old",
              "split_new"
            ],
            "label": "Split factor (old shares per new share)",
            "unit": "ratio",
            "format": "decimal",
            "display": true
          },
          "new_shares_decimal": {
            "expression": "current_shares / factor",
            "dependencies": [
              "current_shares",
              "factor"
            ],
            "label": "Post‑split shares (decimal)",
            "unit": "shares",
            "format": "decimal",
            "display": true
          },
          "new_price": {
            "expression": "current_price * factor",
            "dependencies": [
              "current_price",
              "factor"
            ],
            "label": "Theoretical post‑split price per share",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "market_cap_pre": {
            "expression": "current_shares * current_price",
            "dependencies": [
              "current_shares",
              "current_price"
            ],
            "label": "Pre‑split market capitalization",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "market_cap_post": {
            "expression": "new_shares_decimal * new_price",
            "dependencies": [
              "new_shares_decimal",
              "new_price"
            ],
            "label": "Post‑split market capitalization (theoretical)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "new_cost_basis_per_new_share": {
            "expression": "cost_basis_per_share * factor",
            "dependencies": [
              "cost_basis_per_share",
              "factor"
            ],
            "label": "Approx. cost basis per new share",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "new_shares_decimal",
            "label": "Post‑split shares (decimal)",
            "variable": "new_shares_decimal",
            "unit": "shares",
            "format": "decimal"
          },
          {
            "id": "new_price",
            "label": "Post‑split theoretical price",
            "variable": "new_price",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "market_cap_post",
            "label": "Post‑split market capitalization (theoretical)",
            "variable": "market_cap_post",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "new_cost_basis_per_new_share",
            "label": "Approximate cost basis per new share",
            "variable": "new_cost_basis_per_new_share",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "cash_out": {
        "label": "Reverse split with fractional-share cash‑out",
        "description": "Models broker behaviour that cashes out fractional new shares. Requires a cash‑out price (often the post‑split market price); shows cash‑out value and rounded issued shares.",
        "variables": {
          "factor": {
            "expression": "split_old / split_new",
            "dependencies": [
              "split_old",
              "split_new"
            ],
            "label": "Split factor (old shares per new share)",
            "unit": "ratio",
            "format": "decimal",
            "display": true
          },
          "new_shares_decimal": {
            "expression": "current_shares / factor",
            "dependencies": [
              "current_shares",
              "factor"
            ],
            "label": "Post‑split shares (decimal)",
            "unit": "shares",
            "format": "decimal",
            "display": true
          },
          "new_price": {
            "expression": "current_price * factor",
            "dependencies": [
              "current_price",
              "factor"
            ],
            "label": "Theoretical post‑split price per share",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "new_shares_floor": {
            "expression": "floor(new_shares_decimal)",
            "dependencies": [
              "new_shares_decimal"
            ],
            "label": "Issued whole new shares (rounded down)",
            "unit": "shares",
            "format": "integer",
            "display": true
          },
          "fractional_shares_count": {
            "expression": "new_shares_decimal - new_shares_floor",
            "dependencies": [
              "new_shares_decimal",
              "new_shares_floor"
            ],
            "label": "Fractional new shares (decimal)",
            "unit": "shares",
            "format": "decimal",
            "display": true
          },
          "cash_out_value": {
            "expression": "fractional_shares_count * cash_out_price",
            "dependencies": [
              "fractional_shares_count",
              "cash_out_price"
            ],
            "label": "Cash‑out value for fractional shares",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "market_cap_pre": {
            "expression": "current_shares * current_price",
            "dependencies": [
              "current_shares",
              "current_price"
            ],
            "label": "Pre‑split market capitalization",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "market_cap_post": {
            "expression": "new_shares_decimal * new_price",
            "dependencies": [
              "new_shares_decimal",
              "new_price"
            ],
            "label": "Post‑split market capitalization (theoretical)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "new_cost_basis_per_new_share": {
            "expression": "cost_basis_per_share * factor",
            "dependencies": [
              "cost_basis_per_share",
              "factor"
            ],
            "label": "Approx. cost basis per new share",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "new_shares_floor",
            "label": "Issued whole new shares (rounded down)",
            "variable": "new_shares_floor",
            "unit": "shares",
            "format": "integer"
          },
          {
            "id": "fractional_shares_count",
            "label": "Fractional new shares",
            "variable": "fractional_shares_count",
            "unit": "shares",
            "format": "decimal"
          },
          {
            "id": "cash_out_value",
            "label": "Cash‑out for fractional shares",
            "variable": "cash_out_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "new_price",
            "label": "Post‑split theoretical price",
            "variable": "new_price",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "market_cap_post",
            "label": "Post‑split market capitalization (theoretical)",
            "variable": "market_cap_post",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "new_cost_basis_per_new_share",
            "label": "Approximate cost basis per new share",
            "variable": "new_cost_basis_per_new_share",
            "unit": "USD",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "current_shares",
        "label": "Current number of shares you own",
        "type": "number",
        "default": 1000,
        "min": 0,
        "step": 1
      },
      {
        "id": "current_price",
        "label": "Current price per share (pre‑split)",
        "type": "number",
        "default": 2.5,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "split_old",
        "label": "Old shares required to receive the new share (numerator)",
        "type": "integer",
        "default": 10,
        "min": 1,
        "step": 1
      },
      {
        "id": "split_new",
        "label": "New shares issued for that many old shares (denominator)",
        "type": "integer",
        "default": 1,
        "min": 1,
        "step": 1
      },
      {
        "id": "cash_out_price",
        "label": "Cash‑out price per new share (enter post‑split price used for cash‑out)",
        "type": "number",
        "default": 25.0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "cost_basis_per_share",
        "label": "Your cost basis per old share (for cost basis conversion)",
        "type": "number",
        "default": 1.0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "fractional_treatment",
        "label": "Typical broker fractional‑share treatment (informational)",
        "type": "select",
        "default": "cash_out",
        "options": [
          {
            "label": "Cash‑out fractional shares",
            "value": "cash_out"
          },
          {
            "label": "Round down (no cash‑out)",
            "value": "round_down"
          },
          {
            "label": "Round up (issue extra share)",
            "value": "round_up"
          },
          {
            "label": "Issue fractional shares",
            "value": "issue_fractional"
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This simulator demonstrates how a reverse stock split changes the number of outstanding shares and the theoretical share price while keeping market capitalization approximately invariant. Use it to estimate how your holdings, fractional shares and cost basis are affected by a specified split ratio.",
      "The tool offers a standard model and a cash‑out model for fractional shares. Inputs include current shares, current price, the split ratio (old shares per new share) and an optional cash‑out price for fractional shares."
    ],
    "methodology": [
      "The calculation treats a reverse split as a multiplicative factor equal to old_shares_per_new_share divided by new_shares (commonly 10:1, expressed as factor = 10). Post‑split price is computed by multiplying the pre‑split price by the factor, and post‑split share count is divided by the same factor so that market capitalization remains constant in theoretical terms.",
      "Fractional shares arise when the post‑split share count is not an integer. Brokers handle these in different ways: cash‑out at a specified price, rounding down (forfeiting fractions), rounding up (issuing an extra share), or issuing fractional shares if supported. This tool models the cash‑out scenario explicitly and provides approximate cost‑basis conversion by multiplying the per‑share basis by the split factor."
    ],
    "how_is_calculated": [
      "factor = split_old / split_new",
      "post_split_shares = current_shares / factor",
      "post_split_price = current_price * factor",
      "theoretical_market_cap = current_shares * current_price = post_split_shares * post_split_price",
      "fractional_new_shares = post_split_shares - floor(post_split_shares)",
      "cash_out_value = fractional_new_shares * cash_out_price",
      "approx_cost_basis_per_new_share = cost_basis_per_share * factor"
    ],
    "examples": [
      "Example: 1,000 shares at $2.50 with a 1‑for‑10 reverse split (factor = 10). Post‑split shares = 1000 / 10 = 100. Post‑split price = $2.50 * 10 = $25.00. Market cap remains $2,500.",
      "If the post‑split shares calculation results in a fractional amount (e.g., 101.3 new shares), a broker may cash out 0.3 shares. At a cash‑out price of $25.00 the cash‑out value would be $7.50."
    ],
    "faqs": [
      {
        "question": "Will market capitalization change after a reverse split?",
        "answer": "Theoretical market capitalization remains the same because share count decreases while price increases by the same factor. In practice small differences can arise from market movements, rounding, cash‑out amounts, and transaction fees."
      },
      {
        "question": "How are fractional shares handled?",
        "answer": "Broker policies vary. Common treatments are cash‑out of fractional shares, rounding down to the nearest whole share, rounding up, or issuing fractional shares when supported. Use the cash‑out option to model the cash payment you would receive for fractions."
      },
      {
        "question": "Does a reverse split change the total cost basis of my position?",
        "answer": "Total cost basis of your entire holding should remain constant absent cash‑out events. Per‑share cost basis is adjusted by the split factor; when fractional shares are cashed out you may need to allocate a portion of your total basis to the cash‑out amount for tax reporting. Consult a tax advisor for exact allocation rules."
      },
      {
        "question": "Is the cash‑out price always the post‑split market price?",
        "answer": "Not always. Brokers or the company may specify a cash‑out method or price; some use the market close price, others use a calculation. Enter the price your broker or company uses into the cash‑out price field to model the exact payout."
      },
      {
        "question": "How accurate are these computations?",
        "answer": "This tool provides theoretical and planning‑level estimates. It follows arithmetic rules for splits and rounding but does not model market microstructure, fees, taxes, or broker‑specific rounding/settlement nuances. See accuracy caveats and standards references below."
      }
    ],
    "glossary": [
      {
        "term": "Reverse stock split",
        "definition": "A corporate action that reduces the number of outstanding shares and proportionally increases the share price (e.g., 1‑for‑10)."
      },
      {
        "term": "Split factor",
        "definition": "The ratio used to convert old shares into new shares (old_shares_per_new_share / new_shares)."
      },
      {
        "term": "Fractional share",
        "definition": "A portion of a share that results when a share conversion does not produce an integer number of new shares."
      },
      {
        "term": "Market capitalization",
        "definition": "Total market value of a company's outstanding shares, calculated as share price multiplied by number of outstanding shares."
      },
      {
        "term": "Cost basis per new share",
        "definition": "Approximate tax cost basis attributed to each new share after the split, computed by scaling the per‑share basis by the split factor."
      }
    ],
    "citations": [
      {
        "label": "NIST — National Institute of Standards and Technology",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO — International Organization for Standardization",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "OSHA — Occupational Safety and Health Administration",
        "url": "https://www.osha.gov"
      },
      {
        "label": "SEC — U.S. Securities and Exchange Commission",
        "url": "https://www.sec.gov"
      },
      {
        "label": "IRS — U.S. Internal Revenue Service (tax treatment guidance)",
        "url": "https://www.irs.gov"
      }
    ]
  },
  "links": {
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://standards.ieee.org",
        "label": "IEEE Standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  }
}