{
  "version": "1.0.0",
  "metadata": {
    "title": "Business Loan APR & Bi‑Weekly Payment Calculator (Advanced)",
    "description": "Calculate bi‑weekly or other frequency payments, total interest, effective annual rate, and compare monthly vs bi‑weekly schedules for business loans. Includes options for different payment frequencies and clear accuracy & standards notes."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "payment_from_apr",
    "methods": {
      "payment_from_apr": {
        "label": "Payment and totals from APR",
        "description": "Given loan amount, APR, term and payment frequency, compute the periodic payment, total payment, total interest and the effective annual rate.",
        "variables": {
          "apr_decimal": {
            "expression": "apr_percent / 100",
            "dependencies": [
              "apr_percent"
            ],
            "label": "APR (decimal)",
            "format": "decimal",
            "display": false
          },
          "periodic_rate": {
            "expression": "apr_decimal / frequency",
            "dependencies": [
              "apr_decimal",
              "frequency"
            ],
            "label": "Periodic interest rate",
            "format": "decimal",
            "display": true
          },
          "total_periods": {
            "expression": "term_years * frequency",
            "dependencies": [
              "term_years",
              "frequency"
            ],
            "label": "Total number of payments",
            "format": "integer",
            "display": true
          },
          "payment": {
            "expression": "periodic_rate == 0 ? principal / total_periods : (principal * periodic_rate) / (1 - pow(1 + periodic_rate, -total_periods))",
            "dependencies": [
              "principal",
              "periodic_rate",
              "total_periods"
            ],
            "label": "Periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_payment": {
            "expression": "payment * total_periods",
            "dependencies": [
              "payment",
              "total_periods"
            ],
            "label": "Total paid (principal + interest)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_payment - principal",
            "dependencies": [
              "total_payment",
              "principal"
            ],
            "label": "Total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "effective_annual_rate": {
            "expression": "pow(1 + periodic_rate, frequency) - 1",
            "dependencies": [
              "periodic_rate",
              "frequency"
            ],
            "label": "Effective annual rate (EAR)",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment",
            "label": "Periodic payment (by chosen frequency)",
            "variable": "payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_payment",
            "label": "Total amount paid",
            "variable": "total_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest",
            "label": "Total interest paid",
            "variable": "total_interest",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "effective_annual_rate",
            "label": "Effective annual rate (EAR)",
            "variable": "effective_annual_rate",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "compare_monthly_biweekly": {
        "label": "Compare monthly vs bi‑weekly schedules",
        "description": "Compare payments, total interest, and interest saved when switching between monthly (12) and bi‑weekly (26) payment frequencies using the same APR and term.",
        "variables": {
          "apr_decimal": {
            "expression": "apr_percent / 100",
            "dependencies": [
              "apr_percent"
            ],
            "label": "APR (decimal)",
            "format": "decimal",
            "display": false
          },
          "monthly_rate": {
            "expression": "apr_decimal / 12",
            "dependencies": [
              "apr_decimal"
            ],
            "label": "Monthly periodic rate",
            "format": "decimal",
            "display": true
          },
          "biweekly_rate": {
            "expression": "apr_decimal / 26",
            "dependencies": [
              "apr_decimal"
            ],
            "label": "Bi‑weekly periodic rate",
            "format": "decimal",
            "display": true
          },
          "monthly_periods": {
            "expression": "term_years * 12",
            "dependencies": [
              "term_years"
            ],
            "label": "Monthly total periods",
            "format": "integer",
            "display": true
          },
          "biweekly_periods": {
            "expression": "term_years * 26",
            "dependencies": [
              "term_years"
            ],
            "label": "Bi‑weekly total periods",
            "format": "integer",
            "display": true
          },
          "monthly_payment": {
            "expression": "monthly_rate == 0 ? principal / monthly_periods : (principal * monthly_rate) / (1 - pow(1 + monthly_rate, -monthly_periods))",
            "dependencies": [
              "principal",
              "monthly_rate",
              "monthly_periods"
            ],
            "label": "Monthly payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "biweekly_payment": {
            "expression": "biweekly_rate == 0 ? principal / biweekly_periods : (principal * biweekly_rate) / (1 - pow(1 + biweekly_rate, -biweekly_periods))",
            "dependencies": [
              "principal",
              "biweekly_rate",
              "biweekly_periods"
            ],
            "label": "Bi‑weekly payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "monthly_total_interest": {
            "expression": "(monthly_payment * monthly_periods) - principal",
            "dependencies": [
              "monthly_payment",
              "monthly_periods",
              "principal"
            ],
            "label": "Total interest (monthly)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "biweekly_total_interest": {
            "expression": "(biweekly_payment * biweekly_periods) - principal",
            "dependencies": [
              "biweekly_payment",
              "biweekly_periods",
              "principal"
            ],
            "label": "Total interest (bi‑weekly)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_saved": {
            "expression": "monthly_total_interest - biweekly_total_interest",
            "dependencies": [
              "monthly_total_interest",
              "biweekly_total_interest"
            ],
            "label": "Interest saved by using bi‑weekly payments",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "monthly_effective_rate": {
            "expression": "pow(1 + monthly_rate, 12) - 1",
            "dependencies": [
              "monthly_rate"
            ],
            "label": "Monthly effective annual rate",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "biweekly_effective_rate": {
            "expression": "pow(1 + biweekly_rate, 26) - 1",
            "dependencies": [
              "biweekly_rate"
            ],
            "label": "Bi‑weekly effective annual rate",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "monthly_payment",
            "label": "Monthly payment",
            "variable": "monthly_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "biweekly_payment",
            "label": "Bi‑weekly payment",
            "variable": "biweekly_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "monthly_total_interest",
            "label": "Total interest (monthly)",
            "variable": "monthly_total_interest",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "biweekly_total_interest",
            "label": "Total interest (bi‑weekly)",
            "variable": "biweekly_total_interest",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "interest_saved",
            "label": "Interest saved (monthly - bi‑weekly)",
            "variable": "interest_saved",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "monthly_effective_rate",
            "label": "Effective annual rate (monthly)",
            "variable": "monthly_effective_rate",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "biweekly_effective_rate",
            "label": "Effective annual rate (bi‑weekly)",
            "variable": "biweekly_effective_rate",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan amount",
        "type": "number",
        "default": 100000,
        "min": 0,
        "step": 100
      },
      {
        "id": "apr_percent",
        "label": "APR (annual percentage rate)",
        "type": "number",
        "default": 6.5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "term_years",
        "label": "Loan term (years)",
        "type": "number",
        "default": 5,
        "min": 0.0833333,
        "max": 30,
        "step": 0.25
      },
      {
        "id": "frequency",
        "label": "Payment frequency (periods per year)",
        "type": "integer",
        "default": 26,
        "min": 1,
        "max": 365,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator computes periodic payments, total interest, and effective annual rates for business loans when payments are made bi‑weekly or at any selected frequency. It also provides a comparison between monthly and bi‑weekly schedules to show potential interest savings.",
      "Use the tool to estimate cashflow implications and to compare payment frequency options. The results are theoretical estimates and assume fixed APR, fixed payment amounts, no prepayments, and no changing balances other than scheduled amortization."
    ],
    "methodology": [
      "Periodic payments are computed using the standard amortizing loan formula: payment = (principal * r) / (1 - (1 + r)^(-n)), where r is the periodic interest rate and n is the total number of payments.",
      "Effective annual rate (EAR) is calculated by compounding the periodic rate: EAR = (1 + r)^(periods per year) - 1.",
      "When comparing frequencies, the calculator applies the same nominal APR and term to both schedules and computes payments and total interest using the amortization formula for each periodic rate and period count."
    ],
    "how_is_calculated": [
      "Convert APR percent to decimal: apr_decimal = APR / 100.",
      "Periodic rate: r = apr_decimal / frequency (frequency = 26 for bi‑weekly, 12 for monthly).",
      "Total periods: n = term_years * frequency.",
      "Periodic payment: if r = 0 then payment = principal / n else payment = (principal * r) / (1 - (1 + r)^(-n)).",
      "Total interest = (payment * n) - principal.",
      "Effective annual rate = (1 + r)^(frequency) - 1."
    ],
    "examples": [
      "Example 1: $100,000 loan, 6.5% APR, 5 years, bi‑weekly (26) → calculator returns bi‑weekly payment, total interest and EAR.",
      "Example 2: Same loan compared monthly (12) vs bi‑weekly (26) shows the difference in total interest and the amount saved by switching frequencies with identical APR and term."
    ],
    "faqs": [
      {
        "question": "Does bi‑weekly always save interest compared to monthly?",
        "answer": "If the nominal APR and term are identical, more frequent payments (bi‑weekly vs monthly) typically reduce total interest because interest compounds less between payments. The exact savings depend on term, APR and whether the payment amounts are adjusted."
      },
      {
        "question": "Can this tool compute the APR implied by an existing payment amount?",
        "answer": "Computing APR from an observed payment requires solving for the internal rate that equates present value of payments and any fees to the loan principal; that is a numerical root‑finding problem (IRR). This calculator focuses on forward calculations (APR → payments). For reverse APR calculations or TIL/APR legal disclosures, use specialized IRR routines or consult a financial professional."
      },
      {
        "question": "Are fees and prepayments included?",
        "answer": "This model does not automatically include origination fees, closing costs, or irregular prepayments. Including fees typically requires adjusting the financed principal or running an IRR computation to produce a legal APR. See accuracy notes below."
      },
      {
        "question": "How accurate are the results?",
        "answer": "Results follow standard amortization mathematics used by lenders. They are estimates and do not replace lender disclosures. Small rounding differences can occur depending on how a lender defines compounding conventions, rounding rules, and handling of fees."
      }
    ],
    "glossary": [
      {
        "term": "APR (Annual Percentage Rate)",
        "definition": "The annual rate charged for borrowing, expressed as a percentage. In many contexts APR refers to a nominal annual rate; legal APR calculations that include fees may use different methods (e.g., IRR-based)."
      },
      {
        "term": "Periodic rate",
        "definition": "The interest rate applied each payment period: periodic_rate = APR (decimal) / payments per year."
      },
      {
        "term": "Effective Annual Rate (EAR)",
        "definition": "The annual interest rate after accounting for compounding within the year: EAR = (1 + periodic_rate)^(periods per year) - 1."
      },
      {
        "term": "Amortization",
        "definition": "The process of spreading loan payments over multiple periods so that the principal is paid off by the end of the term; each payment typically covers interest plus a portion of principal."
      }
    ],
    "citations": [
      {
        "label": "NIST (National Institute of Standards & Technology)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO (International Organization for Standardization)",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE (Institute of Electrical and Electronics Engineers)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA (Occupational Safety and Health Administration)",
        "url": "https://www.osha.gov"
      }
    ],
    "summary": [
      "This advanced calculator provides payment schedules and totals for business loans with selectable payment frequency, focusing on bi‑weekly vs monthly comparisons. It uses standard amortization formulas and reports effective annual rates.",
      "For legal APR disclosures, inclusion of fees, or reverse APR computation from payments, use a specialist IRR calculator or consult a qualified financial professional. Results are estimates and should be validated against lender disclosures."
    ]
  }
}