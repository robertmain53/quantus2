{
  "version": "1.0.0",
  "metadata": {
    "title": "Price to Earnings (P/E) Ratio Calculator",
    "description": "Multi-method P/E ratio calculator supporting per-share, market-cap, trailing (TTM), forward and normalized P/E. Includes clear input modes, units, accuracy caveats, and regulatory/standards citations for trustworthy numeric handling."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "per_share_direct",
    "methods": {
      "per_share_direct": {
        "label": "Price ÷ Earnings per Share (direct EPS)",
        "description": "Standard P/E computed using a user-provided earnings-per-share (EPS) value.",
        "variables": {
          "pe_value": {
            "expression": "price_per_share / eps_direct",
            "dependencies": [
              "price_per_share",
              "eps_direct"
            ],
            "label": "P/E ratio",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "P/E (Price per Share ÷ EPS)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      },
      "per_share_from_net_income": {
        "label": "Price ÷ EPS (calculated from Net Income)",
        "description": "Compute EPS from net income and diluted shares, then calculate P/E.",
        "variables": {
          "eps_computed": {
            "expression": "net_income / diluted_shares",
            "dependencies": [
              "net_income",
              "diluted_shares"
            ],
            "label": "EPS (computed)",
            "format": "decimal",
            "display": true
          },
          "pe_value": {
            "expression": "price_per_share / eps_computed",
            "dependencies": [
              "price_per_share",
              "eps_computed"
            ],
            "label": "P/E ratio",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "P/E (Price per Share ÷ EPS from Net Income)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      },
      "marketcap": {
        "label": "Market Capitalization ÷ Net Income",
        "description": "Alternative P/E using market capitalization divided by net income (useful for company-level comparisons).",
        "variables": {
          "pe_value": {
            "expression": "market_cap / net_income",
            "dependencies": [
              "market_cap",
              "net_income"
            ],
            "label": "P/E ratio (market-cap basis)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "P/E (Market Cap ÷ Net Income)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      },
      "trailing_ttm": {
        "label": "Trailing Twelve Months (TTM) P/E",
        "description": "P/E using earnings over the last 12 months (TTM). Provide TTM earnings or TTM earnings per share.",
        "variables": {
          "eps_ttm": {
            "expression": "earnings_ttm / diluted_shares",
            "dependencies": [
              "earnings_ttm",
              "diluted_shares"
            ],
            "label": "EPS (TTM)",
            "format": "decimal",
            "display": true
          },
          "pe_value": {
            "expression": "price_per_share / eps_ttm",
            "dependencies": [
              "price_per_share",
              "eps_ttm"
            ],
            "label": "P/E ratio (TTM)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "P/E (Trailing Twelve Months)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      },
      "forward_pe": {
        "label": "Forward P/E (Expected EPS)",
        "description": "P/E using expected or consensus EPS for the next fiscal year (forward-looking).",
        "variables": {
          "pe_value": {
            "expression": "price_per_share / expected_eps_next_year",
            "dependencies": [
              "price_per_share",
              "expected_eps_next_year"
            ],
            "label": "Forward P/E",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "Forward P/E (Price ÷ Expected EPS)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      },
      "normalized_pe": {
        "label": "Normalized P/E (user-supplied normalized EPS)",
        "description": "P/E using a normalized or cyclically-adjusted EPS provided by the user (e.g., multi-year average EPS).",
        "variables": {
          "pe_value": {
            "expression": "price_per_share / normalized_eps",
            "dependencies": [
              "price_per_share",
              "normalized_eps"
            ],
            "label": "Normalized P/E",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pe",
            "label": "Normalized P/E (Price ÷ Normalized EPS)",
            "variable": "pe_value",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "price_per_share",
        "label": "Price per share (quote)",
        "type": "number",
        "default": 100,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "eps_input_method",
        "label": "How will you provide EPS?",
        "type": "select",
        "default": "direct",
        "options": [
          {
            "label": "Provide EPS directly",
            "value": "direct"
          },
          {
            "label": "Compute EPS from Net Income and Diluted Shares",
            "value": "from_income"
          }
        ]
      },
      {
        "id": "eps_direct",
        "label": "Earnings per share (EPS) — direct",
        "type": "number",
        "default": 5,
        "min": -1000000000,
        "step": 0.01
      },
      {
        "id": "net_income",
        "label": "Net income (company) — use same currency as Market Cap",
        "type": "number",
        "default": 500000000,
        "min": -1000000000000000.0,
        "step": 1
      },
      {
        "id": "diluted_shares",
        "label": "Diluted shares outstanding",
        "type": "number",
        "default": 100000000,
        "min": 1,
        "step": 1
      },
      {
        "id": "market_cap",
        "label": "Market capitalization (same currency as Net Income)",
        "type": "number",
        "default": 20000000000,
        "min": 0,
        "step": 1
      },
      {
        "id": "earnings_ttm",
        "label": "Earnings (TTM) — total earnings over last 12 months",
        "type": "number",
        "default": 480000000,
        "min": -1000000000000000.0,
        "step": 1
      },
      {
        "id": "expected_eps_next_year",
        "label": "Expected EPS next fiscal year (consensus or estimate)",
        "type": "number",
        "default": 5.5,
        "min": -1000000000,
        "step": 0.01
      },
      {
        "id": "normalized_eps",
        "label": "Normalized (multi-year average) EPS",
        "type": "number",
        "default": 4.8,
        "min": -1000000000,
        "step": 0.01
      }
    ],
    "sections": [
      {
        "id": "eps_direct_section",
        "label": "Provide EPS directly",
        "show_when": {
          "field": "eps_input_method",
          "is": "direct"
        },
        "fields": [
          {
            "id": "eps_direct",
            "label": "Earnings per share (EPS) — direct",
            "type": "number",
            "default": 5,
            "min": -1000000000,
            "step": 0.01
          }
        ]
      },
      {
        "id": "eps_from_income_section",
        "label": "Compute EPS from Net Income",
        "show_when": {
          "field": "eps_input_method",
          "is": "from_income"
        },
        "fields": [
          {
            "id": "net_income",
            "label": "Net income (company) — use same currency as Market Cap",
            "type": "number",
            "default": 500000000,
            "min": -1000000000000000.0,
            "step": 1
          },
          {
            "id": "diluted_shares",
            "label": "Diluted shares outstanding",
            "type": "number",
            "default": 100000000,
            "min": 1,
            "step": 1
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator computes Price-to-Earnings (P/E) ratios using multiple accepted methods: per-share (using EPS), market-cap to net income, trailing twelve months (TTM), forward (expected EPS), and normalized EPS. Select the method that matches your data source and analysis purpose.",
      "The tool separates input modes so you can either provide EPS directly or compute EPS from net income and diluted shares. All results are unitless ratios; ensure monetary inputs share the same currency and timeframe."
    ],
    "methodology": [
      "Per-share P/E uses price per share divided by earnings per share (EPS). EPS may be provided directly or derived from Net Income ÷ Diluted Shares.",
      "Market-cap P/E uses company market capitalization divided by net income, which is useful for company-level comparisons when per-share figures are inconsistent.",
      "TTM and forward P/E use trailing 12-month earnings or expected future earnings respectively. Normalized P/E uses a user-supplied multi-year average EPS to reduce cyclical bias."
    ],
    "how_is_calculated": [
      "Basic per-share P/E: P/E = Price per Share ÷ EPS",
      "EPS (computed) = Net Income ÷ Diluted Shares",
      "Market-cap P/E = Market Capitalization ÷ Net Income",
      "TTM P/E uses EPS calculated from earnings over the last 12 months; Forward P/E uses expected next-year EPS; Normalized P/E uses an average EPS provided by the user"
    ],
    "examples": [
      "Example 1 — Direct EPS: Price = 100, EPS = 5 → P/E = 100 ÷ 5 = 20",
      "Example 2 — Market cap: Market Cap = 20,000,000,000; Net Income = 1,000,000,000 → P/E = 20,000,000,000 ÷ 1,000,000,000 = 20"
    ],
    "faqs": [
      {
        "question": "What if EPS is negative or zero?",
        "answer": "If EPS is zero the P/E is undefined. A negative EPS produces a negative P/E which indicates a loss-making period; interpret negative P/E with caution. Consider alternate metrics when earnings are volatile or negative."
      },
      {
        "question": "Which P/E should I use — trailing, forward, or normalized?",
        "answer": "Use trailing (TTM) for historical performance, forward for valuation expectations, and normalized to smooth cyclical variations. Choose the method that matches your analysis horizon and data reliability."
      },
      {
        "question": "Do inputs need to be in the same currency and period?",
        "answer": "Yes. Monetary inputs (market cap, net income, earnings) must be in the same currency and refer to the same reporting basis (annual vs TTM) to produce meaningful ratios."
      },
      {
        "question": "How precise are the results?",
        "answer": "Results depend on input precision and rounding. Numeric handling follows IEEE floating-point conventions; small rounding differences may occur. Cross-check with authoritative data sources for regulatory or audit purposes."
      },
      {
        "question": "Can this handle share-count changes (stock splits, buybacks)?",
        "answer": "Adjust diluted shares to reflect splits or buybacks before computing EPS. The calculator does not automatically adjust historical figures for corporate actions."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards & Technology (NIST) — numerical best practices",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO) — quality management and data integrity",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards Association — floating-point arithmetic (IEEE 754)",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "U.S. Occupational Safety and Health Administration (OSHA) — general regulatory standards (cite for organisational compliance awareness)",
        "url": "https://www.osha.gov"
      },
      {
        "label": "U.S. Securities and Exchange Commission (SEC) — financial reporting guidance",
        "url": "https://www.sec.gov"
      }
    ],
    "glossary": [
      {
        "term": "Price-to-Earnings (P/E) Ratio",
        "definition": "A valuation ratio calculated as the price per share divided by earnings per share, or alternatively market capitalization divided by net income."
      },
      {
        "term": "EPS (Earnings per Share)",
        "definition": "Net income divided by diluted shares outstanding; can be reported directly or computed."
      },
      {
        "term": "TTM (Trailing Twelve Months)",
        "definition": "An aggregation of financial results from the most recent 12-month period."
      },
      {
        "term": "Forward P/E",
        "definition": "P/E calculated using expected or consensus earnings for the upcoming period."
      },
      {
        "term": "Normalized EPS",
        "definition": "An EPS figure adjusted or averaged over multiple years to smooth cyclical effects."
      }
    ],
    "summary": [
      "Select the calculation method that matches your available inputs and analysis objective. Ensure consistent currencies and reporting periods.",
      "Interpret P/E alongside other valuation and profitability metrics; it is a single-dimension measure and can be distorted by accounting policies, non-recurring items, or negative earnings."
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://standards.ieee.org",
        "label": "IEEE Standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.sec.gov",
        "label": "SEC",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}