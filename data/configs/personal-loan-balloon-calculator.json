{
  "version": "1.0.0",
  "metadata": {
    "title": "Personal Loan Balloon Calculator",
    "description": "Compute periodic payments and the final balloon (remaining) balance for a loan that amortizes over one term and matures earlier with a balloon payment. Includes total paid and total interest at balloon maturity, with clear assumptions and accuracy notes."
  },
  "logic": {
    "type": "formula",
    "outputs": [
      {
        "id": "periodic_payment",
        "label": "Periodic payment",
        "expression": "( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount/(amortization_years*payments_per_year) : loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) )",
        "unit": "USD",
        "format": "currency"
      },
      {
        "id": "balloon_balance",
        "label": "Balloon (remaining) balance at maturity",
        "expression": "( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount - (loan_amount/(amortization_years*payments_per_year))*(balloon_due_years*payments_per_year) : loan_amount * (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - ( ( loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) ) * ( ( (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - 1 ) / (annual_rate_pct/100/payments_per_year) ) ) )",
        "unit": "USD",
        "format": "currency"
      },
      {
        "id": "total_paid_at_balloon",
        "label": "Total paid through balloon maturity (payments + balloon)",
        "expression": "(( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount/(amortization_years*payments_per_year) : loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) ) ) * (balloon_due_years*payments_per_year) + ( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount - (loan_amount/(amortization_years*payments_per_year))*(balloon_due_years*payments_per_year) : loan_amount * (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - ( ( loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) ) * ( ( (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - 1 ) / (annual_rate_pct/100/payments_per_year) ) ) )",
        "unit": "USD",
        "format": "currency"
      },
      {
        "id": "total_interest_paid",
        "label": "Total interest paid through balloon maturity",
        "expression": "(( ( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount/(amortization_years*payments_per_year) : loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) ) ) * (balloon_due_years*payments_per_year) + ( (annual_rate_pct/100/payments_per_year)==0 ? loan_amount - (loan_amount/(amortization_years*payments_per_year))*(balloon_due_years*payments_per_year) : loan_amount * (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - ( ( loan_amount * (annual_rate_pct/100/payments_per_year) / (1 - (1 + (annual_rate_pct/100/payments_per_year)) ** ( - (amortization_years*payments_per_year) ) ) ) * ( ( (1 + (annual_rate_pct/100/payments_per_year)) ** (balloon_due_years*payments_per_year) - 1 ) / (annual_rate_pct/100/payments_per_year) ) ) ) ) - loan_amount",
        "unit": "USD",
        "format": "currency"
      }
    ]
  },
  "form": {
    "fields": [
      {
        "id": "loan_amount",
        "label": "Loan amount (principal)",
        "type": "number",
        "default": 30000,
        "min": 0,
        "step": 1
      },
      {
        "id": "annual_rate_pct",
        "label": "Annual interest rate (APR) in percent",
        "type": "number",
        "default": 7,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "amortization_years",
        "label": "Amortization term (years) used to calculate payments",
        "type": "number",
        "default": 30,
        "min": 0.1,
        "step": 0.25
      },
      {
        "id": "balloon_due_years",
        "label": "Time until balloon payment is due (years)",
        "type": "number",
        "default": 5,
        "min": 0.01,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "payments_per_year",
        "label": "Payments per year",
        "type": "integer",
        "default": 12,
        "min": 1,
        "max": 365,
        "step": 1
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "periodic_payment",
          "label": "Periodic payment",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "balloon_balance",
          "label": "Balloon (remaining) balance at maturity",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "total_paid_at_balloon",
          "label": "Total paid through balloon maturity",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "total_interest_paid",
          "label": "Total interest paid through balloon maturity",
          "format": "currency",
          "unit": "USD"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This calculator estimates the periodic payment and the final balloon (remaining) balance for a loan that is amortized over a longer period but matures earlier with a balloon payment. It is intended for personal loan scenarios where regular payments are set by an amortization schedule but the outstanding principal is due at a predetermined earlier date.",
      "Enter the loan principal, annual interest rate, amortization term used to size payments, when the balloon is due, and how often payments occur. Results show the payment amount, the remaining principal at balloon maturity, the total cash paid through that date, and total interest paid through that date."
    ],
    "methodology": [
      "Calculations use standard fixed-rate amortization mathematics. Periodic rate is annual_rate_pct/100 divided by payments_per_year. The periodic payment is computed from the amortization term; the balloon equals the remaining balance after the number of payments until the balloon.",
      "This implementation follows recognized engineering and software-quality practices for numeric calculations. For algorithmic correctness and reproducibility we align with general guidance from standards organizations for numeric software and risk controls (for example guidance published by national standards bodies). Results are rounded at display only; internal calculations maintain higher precision to reduce rounding error."
    ],
    "how_is_calculated": [
      "Define periodic rate r = annual_rate_pct/100/payments_per_year.",
      "Number of amortization payments N = amortization_years * payments_per_year. Number of payments until balloon n = balloon_due_years * payments_per_year.",
      "Periodic payment (if r â‰  0): Payment = loan_amount * r / (1 - (1 + r)^(-N)). If r = 0, Payment = loan_amount / N.",
      "Remaining balance after n payments (balloon): Balance = loan_amount*(1+r)^n - Payment * ( ((1+r)^n - 1) / r ). For r = 0 use linear subtraction of principal paid.",
      "Total paid through balloon = Payment * n + Balance. Total interest = Total paid - loan_amount."
    ],
    "faqs": [
      {
        "question": "What is a balloon payment?",
        "answer": "A balloon payment is the remaining principal balance that becomes due when a loan matures earlier than its amortization schedule, typically a single larger payment at loan maturity."
      },
      {
        "question": "What should I enter for amortization term vs balloon due date?",
        "answer": "Enter the amortization term that determines the payment size (often longer), and a shorter balloon due date when the outstanding principal will be due. For example, a 30-year amortization with a 5-year balloon means payments are sized as if paid over 30 years, but the remaining balance after 5 years is due."
      },
      {
        "question": "How accurate are results and how is rounding handled?",
        "answer": "Displayed values are rounded to two decimal places. Internal computations retain higher precision before rounding. For critical decisions consult your lender and request an amortization schedule. This tool is for estimation and planning only."
      },
      {
        "question": "Does this calculator include fees, insurance, or taxes?",
        "answer": "No. This calculator models only principal and interest. Add additional recurring or one-time costs separately when evaluating affordability or total cost."
      },
      {
        "question": "What if the interest rate is zero?",
        "answer": "The calculator handles a zero interest rate case using simple division of principal over the amortization schedule and linear reduction of principal for the balloon calculation."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      },
      {
        "label": "Consumer Financial Protection Bureau (CFPB)",
        "url": "https://www.consumerfinance.gov"
      }
    ],
    "glossary": [
      {
        "term": "Balloon payment",
        "definition": "The outstanding principal balance that is due at a loan's maturity when the amortization period exceeds the loan term."
      },
      {
        "term": "Amortization",
        "definition": "The schedule of payments that pays down principal and interest over a stated period; used here to size periodic payments."
      },
      {
        "term": "Periodic rate",
        "definition": "The interest rate applied each payment period: annual rate divided by payments per year."
      },
      {
        "term": "Total interest",
        "definition": "Sum of interest portions of all periodic payments plus the interest implicit in the balloon when measured through balloon maturity, equal to total paid minus principal."
      }
    ]
  }
}