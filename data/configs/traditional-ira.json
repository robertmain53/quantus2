{
  "version": "1.0.0",
  "metadata": {
    "title": "Traditional IRA Calculator (with Roth comparison)",
    "description": "Project and compare Traditional IRA (tax-deferred) and Roth IRA (after-tax) outcomes. Estimates account balances, taxes at withdrawal, and net after-tax proceeds to help decide which account may deliver a larger retirement payout under specified assumptions."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "comparison",
    "methods": {
      "traditional": {
        "label": "Traditional IRA projection",
        "description": "Estimates growth of pre-tax contributions in a Traditional IRA and computes tax due on withdrawal at the assumed retirement tax rate.",
        "variables": {
          "annual_return": {
            "expression": "annual_return_pct/100",
            "dependencies": [
              "annual_return_pct"
            ],
            "label": "Annual return (decimal)",
            "unit": "",
            "format": "decimal",
            "display": true
          },
          "fv_pre_tax": {
            "expression": "start_balance*pow(1+annual_return, years) + annual_contribution*(pow(1+annual_return, years) - 1)/annual_return",
            "dependencies": [
              "start_balance",
              "annual_contribution",
              "annual_return",
              "years"
            ],
            "label": "Account balance at retirement (pre-tax)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "tax_on_withdrawal": {
            "expression": "fv_pre_tax * (retirement_tax_rate_pct/100)",
            "dependencies": [
              "fv_pre_tax",
              "retirement_tax_rate_pct"
            ],
            "label": "Estimated tax at withdrawal",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "net_after_tax_traditional": {
            "expression": "fv_pre_tax - tax_on_withdrawal",
            "dependencies": [
              "fv_pre_tax",
              "tax_on_withdrawal"
            ],
            "label": "Net after-tax proceeds (Traditional)",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "fv_pre_tax",
            "label": "Account balance at retirement (pre-tax)",
            "variable": "fv_pre_tax",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "tax_on_withdrawal",
            "label": "Estimated tax at withdrawal",
            "variable": "tax_on_withdrawal",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "net_after_tax_traditional",
            "label": "Net after-tax proceeds (Traditional)",
            "variable": "net_after_tax_traditional",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "roth": {
        "label": "Roth IRA projection",
        "description": "Estimates growth of after-tax contributions in a Roth IRA and shows net tax-free proceeds at retirement.",
        "variables": {
          "after_tax_contribution": {
            "expression": "annual_contribution * (1 - current_tax_rate_pct/100)",
            "dependencies": [
              "annual_contribution",
              "current_tax_rate_pct"
            ],
            "label": "After-tax portion of contribution",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "annual_return": {
            "expression": "annual_return_pct/100",
            "dependencies": [
              "annual_return_pct"
            ],
            "label": "Annual return (decimal)",
            "unit": "",
            "format": "decimal",
            "display": true
          },
          "fv_roth": {
            "expression": "start_balance*pow(1+annual_return, years) + after_tax_contribution*(pow(1+annual_return, years) - 1)/annual_return",
            "dependencies": [
              "start_balance",
              "after_tax_contribution",
              "annual_return",
              "years"
            ],
            "label": "Account balance at retirement (Roth, tax-free)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "net_after_tax_roth": {
            "expression": "fv_roth",
            "dependencies": [
              "fv_roth"
            ],
            "label": "Net after-tax proceeds (Roth)",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "fv_roth",
            "label": "Account balance at retirement (Roth, tax-free)",
            "variable": "fv_roth",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "net_after_tax_roth",
            "label": "Net after-tax proceeds (Roth)",
            "variable": "net_after_tax_roth",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "comparison": {
        "label": "Side-by-side Traditional vs Roth",
        "description": "Computes both Traditional and Roth outcomes using the same inputs and reports the net difference and percent advantage.",
        "variables": {
          "annual_return": {
            "expression": "annual_return_pct/100",
            "dependencies": [
              "annual_return_pct"
            ],
            "label": "Annual return (decimal)",
            "unit": "",
            "format": "decimal",
            "display": true
          },
          "fv_pre_tax": {
            "expression": "start_balance*pow(1+annual_return, years) + annual_contribution*(pow(1+annual_return, years) - 1)/annual_return",
            "dependencies": [
              "start_balance",
              "annual_contribution",
              "annual_return",
              "years"
            ],
            "label": "Traditional account balance at retirement (pre-tax)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "tax_on_withdrawal": {
            "expression": "fv_pre_tax * (retirement_tax_rate_pct/100)",
            "dependencies": [
              "fv_pre_tax",
              "retirement_tax_rate_pct"
            ],
            "label": "Estimated tax at withdrawal (Traditional)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "net_after_tax_traditional": {
            "expression": "fv_pre_tax - tax_on_withdrawal",
            "dependencies": [
              "fv_pre_tax",
              "tax_on_withdrawal"
            ],
            "label": "Net after-tax proceeds (Traditional)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "after_tax_contribution": {
            "expression": "annual_contribution * (1 - current_tax_rate_pct/100)",
            "dependencies": [
              "annual_contribution",
              "current_tax_rate_pct"
            ],
            "label": "After-tax portion of contribution (Roth)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "fv_roth": {
            "expression": "start_balance*pow(1+annual_return, years) + after_tax_contribution*(pow(1+annual_return, years) - 1)/annual_return",
            "dependencies": [
              "start_balance",
              "after_tax_contribution",
              "annual_return",
              "years"
            ],
            "label": "Roth account balance at retirement (tax-free)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "net_after_tax_roth": {
            "expression": "fv_roth",
            "dependencies": [
              "fv_roth"
            ],
            "label": "Net after-tax proceeds (Roth)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "difference": {
            "expression": "net_after_tax_roth - net_after_tax_traditional",
            "dependencies": [
              "net_after_tax_roth",
              "net_after_tax_traditional"
            ],
            "label": "Roth minus Traditional (net difference)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "percent_advantage": {
            "expression": "if(net_after_tax_traditional == 0, 0, (difference / net_after_tax_traditional) * 100)",
            "dependencies": [
              "difference",
              "net_after_tax_traditional"
            ],
            "label": "Percent advantage for Roth vs Traditional",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "net_after_tax_traditional",
            "label": "Net after-tax proceeds (Traditional)",
            "variable": "net_after_tax_traditional",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "net_after_tax_roth",
            "label": "Net after-tax proceeds (Roth)",
            "variable": "net_after_tax_roth",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "difference",
            "label": "Roth minus Traditional (net difference)",
            "variable": "difference",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "percent_advantage",
            "label": "Percent advantage for Roth vs Traditional",
            "variable": "percent_advantage",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "start_balance",
        "label": "Current account balance (USD)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_contribution",
        "label": "Annual contribution (USD)",
        "type": "number",
        "default": 6000,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_return_pct",
        "label": "Expected average annual return (%)",
        "type": "number",
        "default": 6,
        "min": -100,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "years",
        "label": "Years until retirement",
        "type": "integer",
        "default": 30,
        "min": 0,
        "max": 100,
        "step": 1
      },
      {
        "id": "current_tax_rate_pct",
        "label": "Current marginal tax rate (%)",
        "type": "number",
        "default": 24,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "retirement_tax_rate_pct",
        "label": "Expected marginal tax rate at retirement (%)",
        "type": "number",
        "default": 22,
        "min": 0,
        "max": 100,
        "step": 0.1
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "net_after_tax_traditional",
          "label": "Net after-tax proceeds (Traditional)"
        },
        {
          "id": "tax_on_withdrawal",
          "label": "Estimated tax at withdrawal (Traditional)"
        },
        {
          "id": "net_after_tax_roth",
          "label": "Net after-tax proceeds (Roth)"
        },
        {
          "id": "difference",
          "label": "Roth minus Traditional (net difference)"
        },
        {
          "id": "percent_advantage",
          "label": "Percent advantage (Roth vs Traditional)"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This calculator models the future balances and after-tax proceeds for Traditional and Roth IRAs under user-provided assumptions. It estimates a Traditional IRA's tax-deferred growth and the tax due at withdrawal, and compares that with a Roth IRA that grows tax-free after an initial after-tax contribution.",
      "Use this tool to explore sensitivity to assumptions (returns, contribution amounts, and tax rates today vs retirement). Results are illustrative and use deterministic formulas; they do not represent investment advice or tax advice."
    ],
    "methodology": [
      "Future value uses standard compound growth and annuity formulas: future value of a lump sum plus future value of a series of level annual contributions.",
      "Traditional IRA contributions are treated as pre-tax for the projection: the model grows the full contribution and then applies the assumed retirement marginal tax rate to withdrawals. Roth IRA projections treat contributions as after-tax and apply no tax to qualified withdrawals.",
      "The tool assumes level (equal) annual contributions and a constant annual return compounded yearly. It does not model intra-year timing, tax brackets, required minimum distributions, state taxes, capital gains distinctions, or early-withdrawal penalties."
    ],
    "how_is_calculated": [
      "Convert percentage inputs to decimals (annual_return_pct / 100, tax rates / 100).",
      "Compute future value of existing balance: start_balance * (1 + r)^n.",
      "Compute future value of an annual contribution (ordinary annuity): contribution * ( (1 + r)^n - 1 ) / r.",
      "Traditional net proceeds = future value (pre-tax) - tax_on_withdrawal where tax_on_withdrawal = future value * retirement_tax_rate.",
      "Roth net proceeds = future value of after-tax contributions (no tax on qualified withdrawals)."
    ],
    "faqs": [
      {
        "question": "Does this calculator enforce IRS contribution limits or eligibility rules?",
        "answer": "No. This tool does not enforce contribution limits, income phaseouts, or eligibility rules. Refer to official tax guidance for current contribution limits and eligibility. Adjust inputs to reflect legal limits for your situation."
      },
      {
        "question": "Are state taxes, brackets, and other real-world factors included?",
        "answer": "No. The model applies a single marginal tax rate at contribution (current_tax_rate_pct) and another at withdrawal (retirement_tax_rate_pct). It does not model progressive tax brackets, state taxes, Medicare surtaxes, or changes in tax law."
      },
      {
        "question": "How accurate are these estimates?",
        "answer": "Estimates use deterministic mathematical formulas based on user inputs. They should be treated as illustrative. For formal tax or financial planning, consult a qualified advisor and verify inputs against current regulatory guidance."
      }
    ],
    "citations": [
      {
        "label": "IRS â€“ Traditional and Roth IRAs (retirement plans)",
        "url": "https://www.irs.gov/retirement-plans/traditional-and-roth-iras"
      },
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Future value (FV)",
        "definition": "Projected value of a current balance plus a stream of future contributions after applying compound growth."
      },
      {
        "term": "Marginal tax rate",
        "definition": "The tax rate applied to the last dollar of income; used here to approximate immediate deduction benefit or tax on withdrawals."
      },
      {
        "term": "After-tax contribution",
        "definition": "Contribution amount reduced by the contributor's marginal tax rate, representing money from which taxes have already been paid."
      },
      {
        "term": "Tax-deferred",
        "definition": "Investments on which taxes are postponed until withdrawal (typical of Traditional IRAs)."
      },
      {
        "term": "Tax-free growth",
        "definition": "Investment growth that is not taxed on withdrawal if conditions are met (typical of qualified Roth IRA withdrawals)."
      }
    ],
    "summary": [
      "This tool provides side-by-side projections for Traditional vs Roth IRAs using user-supplied assumptions. It is intended for educational comparisons, not as a substitute for professional advice.",
      "For compliance and verification, consult official tax publications and a qualified tax or financial professional before making tax-sensitive decisions."
    ]
  }
}