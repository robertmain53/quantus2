{
  "version": "1.0.0",
  "metadata": {
    "title": "Boat Loan Refinance & Bi‑Weekly Payment Calculator (Compare Current vs Refinance)",
    "description": "Compare your current boat loan to one or more refinance options and model the impact of switching to bi‑weekly payments. Shows per‑period payment, total interest, annual cashflow, break‑even on closing costs, and the estimated time and interest savings if you adopt true bi‑weekly payments."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "compare_refinance",
    "methods": {
      "compare_refinance": {
        "label": "Compare current loan vs refinance",
        "description": "Compares your existing loan obligations to a proposed refinance loan. Calculates periodic payments, total interest remaining, annual cashflow, estimated annual savings, and break‑even years for closing costs.",
        "variables": {
          "current_period_rate": {
            "expression": "current_rate_annual/100/current_payments_per_year",
            "dependencies": [
              "current_rate_annual",
              "current_payments_per_year"
            ],
            "label": "Current periodic interest rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n_current": {
            "expression": "current_remaining_months/12*current_payments_per_year",
            "dependencies": [
              "current_remaining_months",
              "current_payments_per_year"
            ],
            "label": "Remaining number of current payment periods",
            "unit": "periods",
            "format": "integer",
            "display": false
          },
          "current_payment": {
            "expression": "current_balance * current_period_rate / (1 - pow(1 + current_period_rate, - n_current))",
            "dependencies": [
              "current_balance",
              "current_period_rate",
              "n_current"
            ],
            "label": "Current payment per period",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "current_total_interest": {
            "expression": "current_payment * n_current - current_balance",
            "dependencies": [
              "current_payment",
              "n_current",
              "current_balance"
            ],
            "label": "Total interest remaining on current loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "financed_amount": {
            "expression": "refinance_amount + closing_costs",
            "dependencies": [
              "refinance_amount",
              "closing_costs"
            ],
            "label": "Amount to be financed (refinance principal plus closing costs)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "new_period_rate": {
            "expression": "new_rate_annual/100/new_payments_per_year",
            "dependencies": [
              "new_rate_annual",
              "new_payments_per_year"
            ],
            "label": "New loan periodic interest rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "new_n": {
            "expression": "new_term_years * new_payments_per_year",
            "dependencies": [
              "new_term_years",
              "new_payments_per_year"
            ],
            "label": "Number of payments for new loan",
            "unit": "periods",
            "format": "integer",
            "display": false
          },
          "new_payment": {
            "expression": "financed_amount * new_period_rate / (1 - pow(1 + new_period_rate, - new_n))",
            "dependencies": [
              "financed_amount",
              "new_period_rate",
              "new_n"
            ],
            "label": "New loan payment per period",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "new_total_interest": {
            "expression": "new_payment * new_n - financed_amount",
            "dependencies": [
              "new_payment",
              "new_n",
              "financed_amount"
            ],
            "label": "Total interest over life of new loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "annual_current_cashflow": {
            "expression": "current_payment * current_payments_per_year",
            "dependencies": [
              "current_payment",
              "current_payments_per_year"
            ],
            "label": "Annual cashflow for current loan",
            "unit": "currency/year",
            "format": "currency",
            "display": false
          },
          "annual_new_cashflow": {
            "expression": "new_payment * new_payments_per_year",
            "dependencies": [
              "new_payment",
              "new_payments_per_year"
            ],
            "label": "Annual cashflow for new loan",
            "unit": "currency/year",
            "format": "currency",
            "display": false
          },
          "annual_savings": {
            "expression": "annual_current_cashflow - annual_new_cashflow",
            "dependencies": [
              "annual_current_cashflow",
              "annual_new_cashflow"
            ],
            "label": "Estimated annual cashflow savings",
            "unit": "currency/year",
            "format": "currency",
            "display": true
          },
          "break_even_years": {
            "expression": "closing_costs / (annual_savings + 0.0000001)",
            "dependencies": [
              "closing_costs",
              "annual_savings"
            ],
            "label": "Estimated years to recoup closing costs (break‑even)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "current_payment",
            "label": "Current payment (per period)",
            "variable": "current_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "current_total_interest",
            "label": "Current total interest remaining",
            "variable": "current_total_interest",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "new_payment",
            "label": "Refinance payment (per period)",
            "variable": "new_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "new_total_interest",
            "label": "Refinance total interest (life of new loan)",
            "variable": "new_total_interest",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "financed_amount",
            "label": "Amount financed (principal + closing costs)",
            "variable": "financed_amount",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "annual_savings",
            "label": "Estimated annual savings (cashflow)",
            "variable": "annual_savings",
            "unit": "USD/year",
            "format": "currency"
          },
          {
            "id": "break_even_years",
            "label": "Break‑even (years to recover closing costs)",
            "variable": "break_even_years",
            "unit": "years",
            "format": "decimal"
          }
        ]
      },
      "biweekly_effect": {
        "label": "Bi‑weekly payment effect (same rate, switch to bi‑weekly)",
        "description": "Estimates the reduction in term and interest if you switch from monthly payments to a bi‑weekly schedule (true bi‑weekly = 26 payments/year). Uses standard amortization math to estimate periods and interest saved.",
        "variables": {
          "monthly_period_rate": {
            "expression": "current_rate_annual/100/12",
            "dependencies": [
              "current_rate_annual"
            ],
            "label": "Monthly periodic rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "monthly_payment": {
            "expression": "current_balance * monthly_period_rate / (1 - pow(1 + monthly_period_rate, - current_remaining_months))",
            "dependencies": [
              "current_balance",
              "monthly_period_rate",
              "current_remaining_months"
            ],
            "label": "Equivalent current monthly payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "biweekly_payment": {
            "expression": "monthly_payment/2",
            "dependencies": [
              "monthly_payment"
            ],
            "label": "Bi‑weekly payment (half of monthly)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "period_rate_biweekly": {
            "expression": "current_rate_annual/100/26",
            "dependencies": [
              "current_rate_annual"
            ],
            "label": "Bi‑weekly periodic rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n_biweekly": {
            "expression": "- log(1 - period_rate_biweekly * current_balance / biweekly_payment) / log(1 + period_rate_biweekly)",
            "dependencies": [
              "period_rate_biweekly",
              "current_balance",
              "biweekly_payment"
            ],
            "label": "Estimated number of bi‑weekly payments to amortize loan",
            "unit": "periods",
            "format": "decimal",
            "display": false
          },
          "years_biweekly": {
            "expression": "n_biweekly / 26",
            "dependencies": [
              "n_biweekly"
            ],
            "label": "Estimated years to payoff using bi‑weekly",
            "unit": "years",
            "format": "decimal",
            "display": true
          },
          "total_interest_biweekly": {
            "expression": "biweekly_payment * n_biweekly - current_balance",
            "dependencies": [
              "biweekly_payment",
              "n_biweekly",
              "current_balance"
            ],
            "label": "Estimated interest paid with bi‑weekly schedule",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest_monthly_remaining": {
            "expression": "monthly_payment * current_remaining_months - current_balance",
            "dependencies": [
              "monthly_payment",
              "current_remaining_months",
              "current_balance"
            ],
            "label": "Interest remaining under monthly schedule",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_saved": {
            "expression": "total_interest_monthly_remaining - total_interest_biweekly",
            "dependencies": [
              "total_interest_monthly_remaining",
              "total_interest_biweekly"
            ],
            "label": "Estimated interest saved by switching to bi‑weekly",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "term_reduction_years": {
            "expression": "current_remaining_months/12 - years_biweekly",
            "dependencies": [
              "current_remaining_months",
              "years_biweekly"
            ],
            "label": "Approximate reduction in loan term (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "monthly_payment",
            "label": "Current monthly payment (for comparison)",
            "variable": "monthly_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "biweekly_payment",
            "label": "Bi‑weekly payment (half monthly)",
            "variable": "biweekly_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "years_biweekly",
            "label": "Estimated payoff time with bi‑weekly (years)",
            "variable": "years_biweekly",
            "unit": "years",
            "format": "decimal"
          },
          {
            "id": "interest_saved",
            "label": "Estimated interest saved by bi‑weekly schedule",
            "variable": "interest_saved",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "term_reduction_years",
            "label": "Estimated term reduction (years)",
            "variable": "term_reduction_years",
            "unit": "years",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "current_balance",
        "label": "Current loan balance",
        "type": "number",
        "default": 30000,
        "min": 0,
        "step": 1
      },
      {
        "id": "current_rate_annual",
        "label": "Current annual interest rate (APR) (%)",
        "type": "number",
        "default": 6.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "current_remaining_months",
        "label": "Remaining term on current loan (months)",
        "type": "integer",
        "default": 60,
        "min": 1,
        "max": 600,
        "step": 1
      },
      {
        "id": "current_payments_per_year",
        "label": "Current payments per year",
        "type": "integer",
        "default": 12,
        "min": 1,
        "max": 52,
        "step": 1
      },
      {
        "id": "refinance_amount",
        "label": "Proposed refinance principal (loan amount)",
        "type": "number",
        "default": 30000,
        "min": 0,
        "step": 1
      },
      {
        "id": "new_rate_annual",
        "label": "Proposed new annual interest rate (APR) (%)",
        "type": "number",
        "default": 5.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "new_term_years",
        "label": "Proposed new loan term (years)",
        "type": "integer",
        "default": 5,
        "min": 1,
        "max": 30,
        "step": 1
      },
      {
        "id": "new_payments_per_year",
        "label": "New payments per year (use 26 for bi‑weekly)",
        "type": "integer",
        "default": 26,
        "min": 1,
        "max": 52,
        "step": 1
      },
      {
        "id": "closing_costs",
        "label": "Estimated closing costs included in loan (optional)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "prepay_penalty",
        "label": "Prepayment penalty on current loan (one‑time, if any)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "extra_payment_per_period",
        "label": "Extra payment per period (optional)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "current_payment",
          "label": "Current payment (per period)"
        },
        {
          "id": "current_total_interest",
          "label": "Current total interest remaining"
        },
        {
          "id": "new_payment",
          "label": "Refinance payment (per period)"
        },
        {
          "id": "new_total_interest",
          "label": "Refinance total interest (life of new loan)"
        },
        {
          "id": "annual_savings",
          "label": "Estimated annual savings (cashflow)"
        },
        {
          "id": "break_even_years",
          "label": "Break‑even years on closing costs"
        },
        {
          "id": "biweekly_payment",
          "label": "Bi‑weekly payment (half of monthly)"
        },
        {
          "id": "years_biweekly",
          "label": "Estimated years to payoff with bi‑weekly"
        },
        {
          "id": "interest_saved",
          "label": "Estimated interest saved with bi‑weekly"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This calculator helps owners compare an existing boat loan to a refinance offer and model the effect of switching to bi‑weekly payments. It reports periodic payments, total interest, annual cashflow differences, and an estimated break‑even time for closing costs.",
      "Use conservative inputs: if you plan to finance closing costs, include them in the refinance amount. Results are estimates for planning purposes and assume fixed rates and timely payments."
    ],
    "methodology": [
      "Calculations use standard amortization formulas. Periodic interest rate = APR / periods_per_year. Payment per period is calculated with the canonical annuity payment formula: payment = r*PV / (1 - (1+r)^-n). Total interest = sum(payments) - principal.",
      "Bi‑weekly effects are estimated by treating a bi‑weekly schedule as 26 equal payments per year and applying the periodic amortization formula at the bi‑weekly period rate. This captures both the effect of smaller, more frequent payments and the extra annual principal paid compared to 12 monthly payments."
    ],
    "how_is_calculated": [
      "Periodic rate = APR / payments_per_year.",
      "Payment = principal * r / (1 - (1+r)^-n), where n = number_of_periods.",
      "Total interest = payment * n - principal.",
      "Annual savings = (current payment * current periods_per_year) - (new payment * new periods_per_year).",
      "Break‑even years = closing costs divided by annual savings when annual savings are positive."
    ],
    "examples": [
      "Example: $30,000 current balance, 6% APR, 60 months remaining, refinance to 5% APR for 5 years with $500 closing costs. The calculator shows new payment, total interest, annual savings and break‑even time.",
      "Bi‑weekly example: If your monthly payment is $575, making bi‑weekly payments of $287.50 yields 26 payments/year (equivalent to 13 monthly payments) and typically shortens the loan and reduces total interest compared with 12 monthly payments."
    ],
    "summary": [
      "Be explicit about what you include in the refinance amount (principal only vs principal + closing costs).",
      "Switching to a bi‑weekly schedule can reduce interest and shorten term, but the exact benefit depends on whether your lender applies payments immediately and whether you make 26 payments a year."
    ],
    "faqs": [
      {
        "question": "Does this calculator include taxes, insurance, or variable interest rates?",
        "answer": "No. This tool models fixed interest, principal and interest amortization only. Taxes, insurance, and variable rates are excluded and must be considered separately."
      },
      {
        "question": "What does 'bi‑weekly' mean here?",
        "answer": "Bi‑weekly in this model equals 26 payments per year (every two weeks). Some lenders call accelerated monthly plans 'bi‑weekly' but apply payments differently; results assume true 26 payments per year."
      },
      {
        "question": "How should I treat closing costs?",
        "answer": "If closing costs will be added to the new loan, enter them in the closing costs field. If you pay them upfront, set closing costs to zero and consider them separately when evaluating break‑even time."
      },
      {
        "question": "How accurate are the estimates?",
        "answer": "Estimates use standard amortization math but are approximate. Minor differences can occur due to rounding, lender timing rules, daily interest accrual methods, or fees not modeled here."
      }
    ],
    "glossary": [
      {
        "term": "APR",
        "definition": "Annual Percentage Rate – the nominal annual interest rate used to compute periodic interest in this calculator."
      },
      {
        "term": "Periodic rate",
        "definition": "The APR divided by the number of payments per year (e.g., APR/12 for monthly, APR/26 for bi‑weekly)."
      },
      {
        "term": "Amortization",
        "definition": "The process of paying off debt over time through regular payments that cover interest and principal."
      },
      {
        "term": "Bi‑weekly payments",
        "definition": "A payment schedule with 26 equal payments per year (every two weeks). Results assume 26 payments/year unless you specify otherwise."
      },
      {
        "term": "Break‑even",
        "definition": "Time required for gross annual savings from a refinance to equal closing costs paid at refinance."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards Association",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ]
  }
}
