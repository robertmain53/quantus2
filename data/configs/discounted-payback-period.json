{
  "version": "1.0.0",
  "metadata": {
    "title": "Discounted Payback Period Calculator",
    "description": "Calculates the discounted payback period (years) using an annual cash-flow schedule and user-specified discount rate. Supports up to 10 annual cash flow entries and linear interpolation within the payback year."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "single_schedule",
    "methods": {
      "single_schedule": {
        "label": "Discounted Payback (annual schedule)",
        "description": "Discount cash flows for each year, compute cumulative discounted cash flows, and determine the first year where cumulative discounted inflows equal or exceed the initial investment. Uses linear interpolation within the year to estimate fractional years.",
        "variables": {
          "dcf_1": {
            "expression": "cashflow_1 / (1 + discount_rate/100) ** 1",
            "dependencies": [
              "cashflow_1",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 1",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_2": {
            "expression": "cashflow_2 / (1 + discount_rate/100) ** 2",
            "dependencies": [
              "cashflow_2",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 2",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_3": {
            "expression": "cashflow_3 / (1 + discount_rate/100) ** 3",
            "dependencies": [
              "cashflow_3",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 3",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_4": {
            "expression": "cashflow_4 / (1 + discount_rate/100) ** 4",
            "dependencies": [
              "cashflow_4",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 4",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_5": {
            "expression": "cashflow_5 / (1 + discount_rate/100) ** 5",
            "dependencies": [
              "cashflow_5",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 5",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_6": {
            "expression": "cashflow_6 / (1 + discount_rate/100) ** 6",
            "dependencies": [
              "cashflow_6",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 6",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_7": {
            "expression": "cashflow_7 / (1 + discount_rate/100) ** 7",
            "dependencies": [
              "cashflow_7",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 7",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_8": {
            "expression": "cashflow_8 / (1 + discount_rate/100) ** 8",
            "dependencies": [
              "cashflow_8",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 8",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_9": {
            "expression": "cashflow_9 / (1 + discount_rate/100) ** 9",
            "dependencies": [
              "cashflow_9",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 9",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "dcf_10": {
            "expression": "cashflow_10 / (1 + discount_rate/100) ** 10",
            "dependencies": [
              "cashflow_10",
              "discount_rate"
            ],
            "label": "Discounted cash flow year 10",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_0": {
            "expression": "0",
            "dependencies": [],
            "label": "Cumulative discounted cash flow year 0",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_1": {
            "expression": "cum_dcf_0 + dcf_1",
            "dependencies": [
              "cum_dcf_0",
              "dcf_1"
            ],
            "label": "Cumulative discounted cash flow year 1",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_2": {
            "expression": "cum_dcf_1 + dcf_2",
            "dependencies": [
              "cum_dcf_1",
              "dcf_2"
            ],
            "label": "Cumulative discounted cash flow year 2",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_3": {
            "expression": "cum_dcf_2 + dcf_3",
            "dependencies": [
              "cum_dcf_2",
              "dcf_3"
            ],
            "label": "Cumulative discounted cash flow year 3",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_4": {
            "expression": "cum_dcf_3 + dcf_4",
            "dependencies": [
              "cum_dcf_3",
              "dcf_4"
            ],
            "label": "Cumulative discounted cash flow year 4",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_5": {
            "expression": "cum_dcf_4 + dcf_5",
            "dependencies": [
              "cum_dcf_4",
              "dcf_5"
            ],
            "label": "Cumulative discounted cash flow year 5",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_6": {
            "expression": "cum_dcf_5 + dcf_6",
            "dependencies": [
              "cum_dcf_5",
              "dcf_6"
            ],
            "label": "Cumulative discounted cash flow year 6",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_7": {
            "expression": "cum_dcf_6 + dcf_7",
            "dependencies": [
              "cum_dcf_6",
              "dcf_7"
            ],
            "label": "Cumulative discounted cash flow year 7",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_8": {
            "expression": "cum_dcf_7 + dcf_8",
            "dependencies": [
              "cum_dcf_7",
              "dcf_8"
            ],
            "label": "Cumulative discounted cash flow year 8",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_9": {
            "expression": "cum_dcf_8 + dcf_9",
            "dependencies": [
              "cum_dcf_8",
              "dcf_9"
            ],
            "label": "Cumulative discounted cash flow year 9",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cum_dcf_10": {
            "expression": "cum_dcf_9 + dcf_10",
            "dependencies": [
              "cum_dcf_9",
              "dcf_10"
            ],
            "label": "Cumulative discounted cash flow year 10",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "payback_years": {
            "expression": "if(periods==1, if(dcf_1>0, initial_investment/dcf_1, null), if(cum_dcf_1>=initial_investment, initial_investment/dcf_1, if(periods==2, if(dcf_2>0, 1 + (initial_investment - cum_dcf_1)/dcf_2, null), if(cum_dcf_2>=initial_investment, 1 + (initial_investment - cum_dcf_1)/dcf_2, if(periods==3, if(dcf_3>0, 2 + (initial_investment - cum_dcf_2)/dcf_3, null), if(cum_dcf_3>=initial_investment, 2 + (initial_investment - cum_dcf_2)/dcf_3, if(periods==4, if(dcf_4>0, 3 + (initial_investment - cum_dcf_3)/dcf_4, null), if(cum_dcf_4>=initial_investment, 3 + (initial_investment - cum_dcf_3)/dcf_4, if(periods==5, if(dcf_5>0, 4 + (initial_investment - cum_dcf_4)/dcf_5, null), if(cum_dcf_5>=initial_investment, 4 + (initial_investment - cum_dcf_4)/dcf_5, if(periods==6, if(dcf_6>0, 5 + (initial_investment - cum_dcf_5)/dcf_6, null), if(cum_dcf_6>=initial_investment, 5 + (initial_investment - cum_dcf_5)/dcf_6, if(periods==7, if(dcf_7>0, 6 + (initial_investment - cum_dcf_6)/dcf_7, null), if(cum_dcf_7>=initial_investment, 6 + (initial_investment - cum_dcf_6)/dcf_7, if(periods==8, if(dcf_8>0, 7 + (initial_investment - cum_dcf_7)/dcf_8, null), if(cum_dcf_8>=initial_investment, 7 + (initial_investment - cum_dcf_7)/dcf_8, if(periods==9, if(dcf_9>0, 8 + (initial_investment - cum_dcf_8)/dcf_9, null), if(cum_dcf_9>=initial_investment, 8 + (initial_investment - cum_dcf_8)/dcf_9, if(periods==10, if(dcf_10>0, 9 + (initial_investment - cum_dcf_9)/dcf_10, null), if(cum_dcf_10>=initial_investment, 9 + (initial_investment - cum_dcf_9)/dcf_10, null))))))))))))))))))",
            "dependencies": [
              "initial_investment",
              "periods",
              "dcf_1",
              "dcf_2",
              "dcf_3",
              "dcf_4",
              "dcf_5",
              "dcf_6",
              "dcf_7",
              "dcf_8",
              "dcf_9",
              "dcf_10",
              "cum_dcf_1",
              "cum_dcf_2",
              "cum_dcf_3",
              "cum_dcf_4",
              "cum_dcf_5",
              "cum_dcf_6",
              "cum_dcf_7",
              "cum_dcf_8",
              "cum_dcf_9",
              "cum_dcf_10"
            ],
            "label": "Discounted payback period (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "discounted_payback_period_years",
            "label": "Discounted payback period (years)",
            "variable": "payback_years",
            "unit": "years",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "initial_investment",
        "label": "Initial investment (cost)",
        "type": "number",
        "default": 100000,
        "min": 0,
        "step": 1
      },
      {
        "id": "discount_rate",
        "label": "Discount rate (%)",
        "type": "number",
        "default": 10,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "periods",
        "label": "Number of annual periods to include (1â€“10)",
        "type": "integer",
        "default": 5,
        "min": 1,
        "max": 10,
        "step": 1
      },
      {
        "id": "cashflow_1",
        "label": "Cash flow year 1 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 30000,
        "step": 1
      },
      {
        "id": "cashflow_2",
        "label": "Cash flow year 2 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 30000,
        "step": 1
      },
      {
        "id": "cashflow_3",
        "label": "Cash flow year 3 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 30000,
        "step": 1
      },
      {
        "id": "cashflow_4",
        "label": "Cash flow year 4 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 30000,
        "step": 1
      },
      {
        "id": "cashflow_5",
        "label": "Cash flow year 5 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 30000,
        "step": 1
      },
      {
        "id": "cashflow_6",
        "label": "Cash flow year 6 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 0,
        "step": 1
      },
      {
        "id": "cashflow_7",
        "label": "Cash flow year 7 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 0,
        "step": 1
      },
      {
        "id": "cashflow_8",
        "label": "Cash flow year 8 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 0,
        "step": 1
      },
      {
        "id": "cashflow_9",
        "label": "Cash flow year 9 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 0,
        "step": 1
      },
      {
        "id": "cashflow_10",
        "label": "Cash flow year 10 (positive = inflow, negative = outflow)",
        "type": "number",
        "default": 0,
        "step": 1
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "discounted_payback_period_years",
          "label": "Discounted payback period (years)",
          "format": "decimal",
          "unit": "years"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This calculator estimates the discounted payback period: the time (in years) required for the cumulative present value of cash inflows to recover the initial investment. It discounts each annual cash flow using the user-provided discount rate and applies linear interpolation inside the payback year for a fractional-year result.",
      "Use this tool for preliminary project screening and comparison of mutually exclusive investments. The discounted payback provides a time-based risk perspective by accounting for the time value of money, but it does not measure total project profitability beyond the payback horizon."
    ],
    "methodology": [
      "We discount each annual cash inflow by (1 + r)^t where r is the discount rate in percent divided by 100 and t is the year number. Cumulative discounted cash flow is calculated year-by-year until it equals or exceeds the initial investment.",
      "When cumulative discounted cash flow crosses the initial investment during year t, a linear interpolation inside that year is used to estimate fractional years: payback = (t-1) + (remaining_to_recover / discounted_cash_flow_in_year_t).",
      "This implementation is a discrete, annual schedule calculator (not a continuous-time model). It supports up to ten annual periods. For monthly cash flows, irregular schedules, tax effects, salvage values, or probabilistic modelling, use more detailed NPV/IRR analyses or specialized financial modelling tools."
    ],
    "how_is_calculated": [
      "Step 1: Discount each year's cash flow: DCF_t = CashFlow_t / (1 + discount_rate/100)^t.",
      "Step 2: Compute cumulative discounted cash flows: CumDCF_t = sum(DCF_1..DCF_t).",
      "Step 3: Find the first year t where the cumulative total meets or exceeds the initial investment.",
      "Step 4: If that year is t, estimate the fractional year as (t minus 1) plus the remaining amount to recover divided by the discounted cash flow in year t. If no year within the schedule recovers the investment, the result is undefined."
    ],
    "examples": [
      "Example: Initial investment 100,000; discount rate 10%; annual inflows 30,000 for 5 years. The calculator discounts each inflow and finds cumulative discounted inflows exceed 100,000 during year 4, then interpolates to give a fractional payback year (e.g., 3.7 years).",
      "If discounted cash flows are zero or negative for all provided years, the calculator will return no payback result within the entered horizon."
    ],
    "faqs": [
      {
        "question": "What is the difference between payback period and discounted payback period?",
        "answer": "The undiscounted payback period uses raw cash flows and ignores the time value of money. The discounted payback period discounts each cash flow at the chosen discount rate before summing, so it accounts for the time value of money."
      },
      {
        "question": "Why might the calculator return no result (null)?",
        "answer": "If cumulative discounted cash inflows do not reach the initial investment within the number of years you entered, the payback cannot be determined from the provided horizon. Increase the number of periods or review cash flow inputs."
      },
      {
        "question": "How accurate is the interpolation inside the year?",
        "answer": "Interpolation assumes cash receipts are received uniformly across the year. This is a common practical approximation; if cash flows are lumped at specific sub-annual dates (monthly, quarterly), a higher-resolution schedule should be used."
      },
      {
        "question": "Are there any verification or accuracy standards for this calculator?",
        "answer": "This calculator follows general software quality and verification best practices. For numerical verification, refer to ISO/IEC software quality standards and IEEE recommendations for numerical software testing. See citations for authoritative sources."
      }
    ],
    "glossary": [
      {
        "term": "Discounted cash flow (DCF)",
        "definition": "A cash flow amount adjusted to present value using the discount factor (1 + r)^t where r is the discount rate and t the time period."
      },
      {
        "term": "Discounted payback period",
        "definition": "The time it takes for the sum of discounted cash inflows to equal the initial investment. Expressed in years, possibly fractional."
      },
      {
        "term": "Interpolation (linear)",
        "definition": "A method to estimate the fractional part of the payback year by assuming cash is received evenly during the year and dividing the remaining amount to recover by that year's discounted cash inflow."
      },
      {
        "term": "Discount rate",
        "definition": "The rate used to convert future cash flows to present value; entered here as an annual percentage."
      }
    ],
    "citations": [
      {
        "label": "NIST - National Institute of Standards and Technology",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - International Organization for Standardization",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE - Institute of Electrical and Electronics Engineers",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA - Occupational Safety and Health Administration",
        "url": "https://www.osha.gov"
      }
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}
