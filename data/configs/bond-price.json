{
  "version": "1.0.0",
  "metadata": {
    "title": "Bond Price Calculator (Advanced)",
    "description": "Calculate bond clean price, dirty price, accrued interest and component present values. Supports coupon frequency, day-count selection, and provides a detailed breakdown of PV of coupons and principal with accuracy caveats and standards references."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "price_from_yield",
    "methods": {
      "price_from_yield": {
        "label": "Price from Yield (clean / dirty)",
        "description": "Compute bond dirty and clean prices given an annual yield to maturity, coupon rate, term and payment frequency using standard present-value formulas.",
        "variables": {
          "N": {
            "expression": "years * freq",
            "dependencies": [
              "years",
              "freq"
            ],
            "label": "Total coupon periods",
            "unit": "periods",
            "format": "integer",
            "display": true
          },
          "per_coupon": {
            "expression": "coupon_rate/100 * face_value / freq",
            "dependencies": [
              "coupon_rate",
              "face_value",
              "freq"
            ],
            "label": "Coupon payment per period",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "discount": {
            "expression": "1 + (yield_rate/100) / freq",
            "dependencies": [
              "yield_rate",
              "freq"
            ],
            "label": "Period discount factor (1 + y/m)",
            "format": "decimal",
            "display": false
          },
          "pv_coupons": {
            "expression": "per_coupon * (1 - pow(discount, -N)) / (discount - 1)",
            "dependencies": [
              "per_coupon",
              "discount",
              "N"
            ],
            "label": "Present value of coupon stream",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "pv_principal": {
            "expression": "face_value * pow(discount, -N)",
            "dependencies": [
              "face_value",
              "discount",
              "N"
            ],
            "label": "Present value of principal",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "dirty_price": {
            "expression": "pv_coupons + pv_principal",
            "dependencies": [
              "pv_coupons",
              "pv_principal"
            ],
            "label": "Dirty price (full price)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "accrued_interest": {
            "expression": "per_coupon * accrued_fraction",
            "dependencies": [
              "per_coupon",
              "accrued_fraction"
            ],
            "label": "Accrued interest",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "clean_price": {
            "expression": "dirty_price - accrued_interest",
            "dependencies": [
              "dirty_price",
              "accrued_interest"
            ],
            "label": "Clean price (flat price)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "clean_price",
            "label": "Clean price",
            "variable": "clean_price",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "dirty_price",
            "label": "Dirty price",
            "variable": "dirty_price",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "accrued_interest",
            "label": "Accrued interest",
            "variable": "accrued_interest",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "pv_coupons",
            "label": "PV of coupons",
            "variable": "pv_coupons",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "pv_principal",
            "label": "PV of principal",
            "variable": "pv_principal",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "price_breakdown": {
        "label": "Price Breakdown (component view)",
        "description": "Return a breakdown of present values and basic intermediary values for inspection and verification.",
        "variables": {
          "N": {
            "expression": "years * freq",
            "dependencies": [
              "years",
              "freq"
            ],
            "label": "Total coupon periods",
            "unit": "periods",
            "format": "integer",
            "display": true
          },
          "per_coupon": {
            "expression": "coupon_rate/100 * face_value / freq",
            "dependencies": [
              "coupon_rate",
              "face_value",
              "freq"
            ],
            "label": "Coupon payment per period",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "pv_coupons": {
            "expression": "per_coupon * (1 - pow(1 + (yield_rate/100)/freq, -N)) / ((1 + (yield_rate/100)/freq) - 1)",
            "dependencies": [
              "per_coupon",
              "yield_rate",
              "freq",
              "N"
            ],
            "label": "PV of coupons (alternate expression)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "pv_principal": {
            "expression": "face_value * pow(1 + (yield_rate/100)/freq, -N)",
            "dependencies": [
              "face_value",
              "yield_rate",
              "freq",
              "N"
            ],
            "label": "PV of principal (alternate expression)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pv_coupons",
            "label": "PV of coupons",
            "variable": "pv_coupons",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "pv_principal",
            "label": "PV of principal",
            "variable": "pv_principal",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "N",
            "label": "Total coupon periods",
            "variable": "N",
            "unit": "periods",
            "format": "integer"
          },
          {
            "id": "per_coupon",
            "label": "Coupon per period",
            "variable": "per_coupon",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "face_value",
        "label": "Face (par) value",
        "type": "number",
        "default": 1000,
        "min": 0,
        "step": 1
      },
      {
        "id": "coupon_rate",
        "label": "Coupon rate (annual %)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "years",
        "label": "Years to maturity",
        "type": "number",
        "default": 5,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "freq",
        "label": "Coupon frequency",
        "type": "select",
        "default": "2",
        "options": [
          {
            "label": "Annual (1)",
            "value": "1"
          },
          {
            "label": "Semi-annual (2)",
            "value": "2"
          },
          {
            "label": "Quarterly (4)",
            "value": "4"
          },
          {
            "label": "Monthly (12)",
            "value": "12"
          }
        ]
      },
      {
        "id": "yield_rate",
        "label": "Yield to maturity (annual %)",
        "type": "number",
        "default": 4,
        "min": 0,
        "max": 100,
        "step": 0.0001
      },
      {
        "id": "accrued_fraction",
        "label": "Accrued period fraction (0â€“1)",
        "type": "number",
        "default": 0,
        "min": 0,
        "max": 1,
        "step": 0.0001
      },
      {
        "id": "day_count",
        "label": "Day count convention",
        "type": "select",
        "default": "actual/actual",
        "options": [
          {
            "label": "Actual/Actual",
            "value": "actual/actual"
          },
          {
            "label": "30/360",
            "value": "30/360"
          },
          {
            "label": "Actual/365",
            "value": "actual/365"
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This advanced bond price calculator computes the clean price, dirty price, accrued interest and present values of coupon and principal given standard inputs: face value, coupon rate, years to maturity, payment frequency and yield to maturity.",
      "The tool provides a component-level breakdown so traders, portfolio managers, and auditors can verify each intermediate step. It also includes guidance on model scope, numerical limits and accuracy expectations."
    ],
    "methodology": [
      "Prices are calculated by discounting the fixed coupon payments and final principal at the periodic discount factor derived from the annual yield: discount per period = 1 + (yield / coupon frequency). The coupon stream uses the closed-form geometric series present-value formula.",
      "Design, testing and documentation practices reference NIST and ISO software quality and testing guidance; numerical handling follows IEEE floating-point recommendations. Users should be aware of domain limits and verify results for extreme inputs.",
      "This calculator provides theoretical mathematical pricing; it does not include market spreads, liquidity discounts, taxes, or embedded option features such as call/put schedules."
    ],
    "how_is_calculated": [
      "1) Compute total periods: N = years * freq.",
      "2) Coupon per period = coupon_rate% * face_value / freq.",
      "3) Period discount factor = 1 + (yield% / freq).",
      "4) PV of coupons = coupon_per_period * (1 - discount^{-N}) / (discount - 1).",
      "5) PV of principal = face_value * discount^{-N}.",
      "6) Dirty price = PV coupons + PV principal. Clean price = Dirty price - Accrued interest."
    ],
    "faqs": [
      {
        "question": "Does this calculator handle bonds with embedded options (calls or puts)?",
        "answer": "No. Embedded options change cashflow timing and require option-adjusted valuation. Use specialized option-adjusted models for callable or putable bonds."
      },
      {
        "question": "What day-count convention should I use?",
        "answer": "Select the convention that matches the bond documentation. The day-count affects accrued interest calculation and cashflow fractions; this tool uses a user-supplied accrued fraction for precise control."
      },
      {
        "question": "How accurate are results near very high frequencies or extremely long maturities?",
        "answer": "Floating-point rounding can affect results for very large N or tiny yields. Follow IEEE floating-point recommendations for extreme cases and cross-check with arbitrary-precision or validated libraries when required."
      },
      {
        "question": "Can I derive yield to maturity from a market price using this tool?",
        "answer": "The present methods compute price from yield. Yield-from-price requires iterative root-finding (not provided here). Use a solver that applies robust bracketing and convergence checks and validate against standard references."
      },
      {
        "question": "What testing and quality standards were considered building this calculator?",
        "answer": "Design and validation recommendations referenced NIST guidance for software testing, ISO quality management principles, and IEEE standards for numerical behavior. Operational safety and compliance considerations reference general OSHA guidance for workplace procedures."
      }
    ],
    "citations": [
      {
        "label": "NIST - National Institute of Standards and Technology",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - International Organization for Standardization",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards Association",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "OSHA - Occupational Safety and Health Administration",
        "url": "https://www.osha.gov"
      },
      {
        "label": "U.S. Treasury - Bond basics and definitions",
        "url": "https://home.treasury.gov"
      }
    ],
    "glossary": [
      {
        "term": "Clean price",
        "definition": "Bond price excluding accrued interest; traded price quoted in many markets."
      },
      {
        "term": "Dirty price",
        "definition": "Full bond price including accrued interest since the last coupon date."
      },
      {
        "term": "Accrued interest",
        "definition": "Portion of next coupon earned by the seller between the last coupon date and settlement."
      },
      {
        "term": "Yield to maturity (YTM)",
        "definition": "Internal rate of return equating the present value of future cashflows to the price, expressed on an annual basis."
      },
      {
        "term": "Coupon frequency",
        "definition": "Number of coupon payments per year (e.g., 1 annual, 2 semi-annual)."
      },
      {
        "term": "Day count convention",
        "definition": "Rule used to convert calendar days between coupon dates into a fraction of a coupon period for accrued interest."
      }
    ]
  },
  "links": {
    "internal": [
      "/fixed-income/bond-price-explained",
      "/fixed-income/accrued-interest-calculator"
    ],
    "external": [
      {
        "url": "https://www.nist.gov/publications",
        "label": "NIST Publications",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org/standards.html",
        "label": "ISO Standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}