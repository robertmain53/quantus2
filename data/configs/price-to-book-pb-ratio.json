{
  "version": "1.0.0",
  "metadata": {
    "title": "Price to Book (P/B) Ratio Calculator",
    "description": "Multi-method P/B ratio tool supporting per-share, aggregate (market-cap) and reconciled book-value calculations with guidance, caveats, and standard-backed accuracy recommendations."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "per_share",
    "methods": {
      "per_share": {
        "label": "Per-share method",
        "description": "Calculate P/B using market price per share and book value per share.",
        "variables": {
          "pb_ratio": {
            "expression": "market_price_per_share / book_value_per_share",
            "dependencies": [
              "market_price_per_share",
              "book_value_per_share"
            ],
            "label": "P/B Ratio",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pb_ratio",
            "label": "Price-to-Book (P/B) Ratio",
            "variable": "pb_ratio",
            "format": "decimal"
          }
        ]
      },
      "aggregate": {
        "label": "Aggregate (market-cap) method",
        "description": "Calculate P/B from market capitalization and total shareholders' equity. Also shows implied book value per share.",
        "variables": {
          "book_value_per_share_calc": {
            "expression": "total_shareholders_equity / total_shares",
            "dependencies": [
              "total_shareholders_equity",
              "total_shares"
            ],
            "label": "Book Value per Share",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "pb_ratio_aggregate": {
            "expression": "market_cap / total_shareholders_equity",
            "dependencies": [
              "market_cap",
              "total_shareholders_equity"
            ],
            "label": "P/B Ratio (Market Cap / Total Equity)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pb_ratio_aggregate",
            "label": "Price-to-Book (P/B) Ratio — Aggregate",
            "variable": "pb_ratio_aggregate",
            "format": "decimal"
          },
          {
            "id": "book_value_per_share_calc",
            "label": "Book Value per Share (implied)",
            "variable": "book_value_per_share_calc",
            "format": "currency"
          }
        ]
      },
      "reconciled": {
        "label": "Reconciled book-value method",
        "description": "Reconcile book value from balance sheet items (assets, liabilities, intangibles, preferred) then compute per-share book value and P/B.",
        "variables": {
          "adjusted_equity": {
            "expression": "total_assets - total_liabilities - intangible_assets - preferred_stock",
            "dependencies": [
              "total_assets",
              "total_liabilities",
              "intangible_assets",
              "preferred_stock"
            ],
            "label": "Adjusted Shareholders' Equity",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "book_value_per_share_reconciled": {
            "expression": "adjusted_equity / total_shares",
            "dependencies": [
              "adjusted_equity",
              "total_shares"
            ],
            "label": "Book Value per Share (reconciled)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "pb_ratio_reconciled": {
            "expression": "market_price_per_share / book_value_per_share_reconciled",
            "dependencies": [
              "market_price_per_share",
              "book_value_per_share_reconciled"
            ],
            "label": "P/B Ratio (reconciled)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pb_ratio_reconciled",
            "label": "Price-to-Book (P/B) Ratio — Reconciled",
            "variable": "pb_ratio_reconciled",
            "format": "decimal"
          },
          {
            "id": "book_value_per_share_reconciled",
            "label": "Book Value per Share (reconciled)",
            "variable": "book_value_per_share_reconciled",
            "format": "currency"
          },
          {
            "id": "adjusted_equity",
            "label": "Adjusted Shareholders' Equity",
            "variable": "adjusted_equity",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "market_price_per_share",
        "label": "Market price per share",
        "type": "number",
        "default": 100,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "book_value_per_share",
        "label": "Book value per share",
        "type": "number",
        "default": 50,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "market_cap",
        "label": "Market capitalization (total market value)",
        "type": "number",
        "default": 1000000000,
        "min": 0,
        "step": 1
      },
      {
        "id": "total_shareholders_equity",
        "label": "Total shareholders' equity (book value, aggregate)",
        "type": "number",
        "default": 500000000,
        "min": -1,
        "step": 1
      },
      {
        "id": "total_shares",
        "label": "Total outstanding shares",
        "type": "number",
        "default": 10000000,
        "min": 1,
        "step": 1
      },
      {
        "id": "total_assets",
        "label": "Total assets",
        "type": "number",
        "default": 1200000000,
        "min": 0,
        "step": 1
      },
      {
        "id": "total_liabilities",
        "label": "Total liabilities",
        "type": "number",
        "default": 600000000,
        "min": 0,
        "step": 1
      },
      {
        "id": "intangible_assets",
        "label": "Intangible assets (to remove if adjusting)",
        "type": "number",
        "default": 50000000,
        "min": 0,
        "step": 1
      },
      {
        "id": "preferred_stock",
        "label": "Preferred stock (if to be excluded from equity)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator computes Price-to-Book (P/B) ratios using three methods: per-share, aggregate (market-cap), and a reconciled book-value approach that adjusts balance-sheet items. Use the method that matches the inputs you have and reconcile book value where necessary to reflect GAAP or your reporting adjustments.",
      "The tool includes safeguards and guidance on common pitfalls such as zero or negative equity, intangible adjustments, and preferred stock exclusion. It is intended for analysis and educational use, not as an audit or a standalone investment recommendation."
    ],
    "methodology": [
      "Per-share: direct division of market price per share by reported book value per share.",
      "Aggregate: compute P/B as market capitalization divided by total shareholders' equity; report implied book value per share as equity divided by total shares.",
      "Reconciled: derive adjusted shareholders' equity from balance-sheet items (assets minus liabilities minus specified intangibles and preferred stock), compute book value per share from adjusted equity, then calculate P/B using market price per share."
    ],
    "how_is_calculated": [
      "P/B (per-share) = market_price_per_share / book_value_per_share",
      "P/B (aggregate) = market_cap / total_shareholders_equity ; Book value per share = total_shareholders_equity / total_shares",
      "Reconciled adjusted equity = total_assets - total_liabilities - intangible_assets - preferred_stock ; Book value per share (reconciled) = adjusted_equity / total_shares ; P/B (reconciled) = market_price_per_share / book_value_per_share_reconciled"
    ],
    "examples": [
      "Per-share example: market price 100, book value per share 50 → P/B = 100 / 50 = 2.0",
      "Aggregate example: market cap 1,000,000,000 and equity 500,000,000 → P/B = 1,000,000,000 / 500,000,000 = 2.0; implied book value per share with 10,000,000 shares = 50"
    ],
    "summary": [
      "Choose the input method that matches your available data. Reconcile balance-sheet items when book value reported on the statement includes items you want to exclude or adjust.",
      "Watch for edge cases: zero or negative equity produces undefined or negative ratios; large intangible balances can distort comparable valuations if not adjusted consistently across peers."
    ],
    "faqs": [
      {
        "question": "What does a P/B ratio greater than 1 mean?",
        "answer": "A P/B greater than 1 typically indicates that the market values the company above its book value per share, which may reflect expected profitability, intangible value, or market sentiment. Interpret relative to industry norms and after any reconciliations."
      },
      {
        "question": "What if total shareholders' equity is zero or negative?",
        "answer": "Dividing by zero is undefined and negative equity yields a negative P/B, which is not comparable to standard positive ratios. When equity is zero or negative, rely on reconciled analysis, qualitative factors, and note limitations in any comparison."
      },
      {
        "question": "Should intangible assets be removed when calculating book value?",
        "answer": "Often yes for comparability, especially if intangibles are internally generated or not easily monetizable. This calculator allows removing specified intangible asset amounts to produce a reconciled book value. Maintain consistent rules across comparables."
      },
      {
        "question": "How precise are the results and what are the accuracy assumptions?",
        "answer": "Results are arithmetic outputs based on your inputs. Accuracy depends on input quality, completeness of reconciliations, and correct classification of balance-sheet items. Follow data integrity and validation practices; see citations for standards on data handling and system assurance."
      }
    ],
    "glossary": [
      {
        "term": "Price-to-Book (P/B) Ratio",
        "definition": "A valuation ratio comparing market price (per share or total market cap) to book value (per share or total shareholders' equity)."
      },
      {
        "term": "Book Value",
        "definition": "The accounting value of shareholders' equity, typically total assets minus total liabilities, adjusted for items such as preferred stock and intangible assets when reconciling."
      },
      {
        "term": "Market Capitalization",
        "definition": "Total market value of a company's outstanding equity, calculated as market price per share times total outstanding shares."
      },
      {
        "term": "Reconciled Book Value",
        "definition": "An adjusted book value that removes or modifies balance-sheet components (for example, intangible assets or preferred stock) to better reflect tangible equity available to common shareholders."
      },
      {
        "term": "Implied Book Value per Share",
        "definition": "Total shareholders' equity divided by outstanding shares; used in aggregate P/B calculations."
      }
    ],
    "citations": [
      {
        "label": "NIST — Frameworks and guidance on data integrity and validation",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO — Standards on quality management and information accuracy",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE — Numeric and computational standards and best practices",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "SEC — Public company reporting guidance and filings",
        "url": "https://www.sec.gov"
      },
      {
        "label": "FASB — Accounting standards and guidance (US GAAP)",
        "url": "https://www.fasb.org"
      }
    ]
  }
}