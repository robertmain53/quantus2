{
  "version": "1.0.0",
  "metadata": {
    "title": "Convertitore Avanzato Lumen → Lux con Simulazione",
    "description": "Calcola l'illuminamento in lux da lumen considerando distanza, angolo del fascio, LLF, e percezione visiva. Include metodi per tecnici, cineasti, studenti e hobbisti."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "basic_convert",
    "methods": {
      "basic_convert": {
        "label": "Conversione Lumen → Lux (Rapida)",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": ["distance", "beam_angle"],
            "label": "Area illuminata",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": ["lumen", "area", "llf"],
            "label": "Illuminamento (Lux)",
            "unit": "lux",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          }
        ]
      },
      "photography_exposure": {
        "label": "Simulazione Esposizione Fotografica",
        "variables": {
          "lux_for_exposure": {
            "expression": "(100 * (iso / 100) * (shutter / 1/50)^2) / (2.5 * (2^((fstop - 1)^2)))",
            "dependencies": ["iso", "shutter", "fstop"],
            "label": "Lux stimati",
            "unit": "lux",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux_for_exposure",
            "label": "Lux richiesti per esposizione",
            "variable": "lux_for_exposure",
            "unit": "lux",
            "format": "decimal"
          }
        ]
      },
      "normative_check": {
        "label": "Verifica Livelli Normativi (Tecnici)",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": ["distance", "beam_angle"],
            "label": "Area illuminata",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": ["lumen", "area", "llf"],
            "label": "Illuminamento calcolato",
            "unit": "lux",
            "format": "decimal",
            "display": true
          },
          "compliance": {
            "expression": "lux >= lux_required",
            "dependencies": ["lux", "lux_required"],
            "label": "Conforme allo standard?",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux (con LLF)",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          },
          {
            "id": "compliance",
            "label": "Rispetta lo standard minimo",
            "variable": "compliance",
            "format": "decimal"
          }
        ]
      },
      "perceived_brightness": {
        "label": "Simulazione Percezione Visiva (Legge di Stevens)",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": ["distance", "beam_angle"],
            "label": "Area",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": ["lumen", "area", "llf"],
            "label": "Lux Fisici",
            "unit": "lux",
            "format": "decimal",
            "display": true
          },
          "perceived": {
            "expression": "lux^0.33",
            "dependencies": ["lux"],
            "label": "Luminosità percepita (scala arbitraria)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux (fisici)",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          },
          {
            "id": "perceived",
            "label": "Luminosità percepita",
            "variable": "perceived",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "lumen",
        "label": "Lumen emessi",
        "type": "number",
        "unit": "lumen",
        "min": 0
      },
      {
        "id": "distance",
        "label": "Distanza dal piano (m)",
        "type": "number",
        "unit": "meter",
        "min": 0.01
      },
      {
        "id": "beam_angle",
        "label": "Angolo del fascio (°)",
        "type": "number",
        "unit": "degree",
        "min": 1,
        "max": 180
      },
      {
        "id": "llf",
        "label": "Fattore di manutenzione (LLF)",
        "type": "number",
        "min": 0.1,
        "max": 1,
        "default": 0.9
      },
      {
        "id": "lux_required",
        "label": "Lux minimi richiesti",
        "type": "number",
        "unit": "lux"
      },
      {
        "id": "iso",
        "label": "ISO della camera",
        "type": "number",
        "default": 400,
        "min": 25
      },
      {
        "id": "shutter",
        "label": "Tempo otturatore (s)",
        "type": "number",
        "default": 0.02
      },
      {
        "id": "fstop",
        "label": "Valore f-stop",
        "type": "number",
        "default": 2.8
      }
    ]
  },
  "page_content": {
    "introduction": [
      "Questo calcolatore avanzato consente di stimare l'illuminamento (lux) generato da una sorgente luminosa in funzione dei lumen emessi, distanza, angolo del fascio e condizioni di degrado (LLF).",
      "Include simulazioni per esposizione fotografica, verifica normativa per ambienti di lavoro e percezione soggettiva secondo la legge di Stevens, coprendo le esigenze di tecnici, cineasti, studenti e appassionati."
    ],
    "methodology": [
      "Il rapporto base tra flusso luminoso Φ (lumen) e illuminamento E (lux) è E = Φ / A, dove A è l'area illuminata. Questa dipende dalla distanza e dall'angolo del fascio, approssimabile come un cono.",
      "L'illuminamento calcolato viene corretto con un fattore LLF (Light Loss Factor) per considerare perdite da sporco, invecchiamento, o inefficienze.",
      "Per la percezione visiva, la legge di Stevens applica una funzione di potenza E^0.33 per modellare la risposta dell'occhio umano. Nei contesti fotografici, l'esposizione può essere stimata a partire dai parametri della camera (ISO, f-stop, tempo di esposizione).",
      "Per ambienti regolamentati, il valore calcolato viene confrontato con soglie di sicurezza e illuminotecniche pubblicate da OSHA, ISO 8995, EN 12464 e linee guida universitarie."
    ],
    "faqs": [
      {
        "question": "Come influenza l'angolo del fascio il valore in lux?",
        "answer": "A parità di lumen, un angolo stretto concentra la luce su un'area minore aumentando il lux, mentre un angolo largo la distribuisce e riduce il lux risultante."
      },
      {
        "question": "Cos'è il LLF (Light Loss Factor)?",
        "answer": "È un coefficiente (tra 0.1 e 1) che riduce il flusso luminoso per riflettere le perdite dovute a manutenzione carente, polvere, invecchiamento della lampada o altri fattori ambientali."
      },
      {
        "question": "Cosa rappresenta la luminosità percepita?",
        "answer": "È una stima della brillantezza soggettiva percepita dall'occhio umano, basata sulla legge di Stevens: lux^0.33."
      },
      {
        "question": "Posso usare questo calcolatore per verifiche di sicurezza?",
        "answer": "Puoi usarlo per pre-verifiche o progettazione preliminare, ma la conformità ufficiale richiede misurazioni reali con luxmetri certificati come richiesto da OSHA o ISO."
      },
      {
        "question": "Quali parametri fotografici vengono simulati?",
        "answer": "ISO, tempo di esposizione e f-stop sono usati per stimare i lux richiesti per una corretta esposizione sul sensore della camera."
      }
    ],
    "citations": [
      {
        "label": "NIST – Realization of the lumen and lux",
        "url": "https://www.nist.gov/pml/sensor-science/optical-radiation/realization-lumen"
      },
      {
        "label": "OSHA – Workplace lighting safety",
        "url": "https://www.osha.gov/laws-regs/regulations/standardnumber/1918/1918.92"
      },
      {
        "label": "Open University – Illuminance and lighting",
        "url": "https://www.open.edu/openlearn/nature-environment/energy-buildings/content-section-5-2-3"
      },
      {
        "label": "U.S. Department of Energy – Lighting Basics",
        "url": "https://www.energy.gov/eere/ssl/lighting-basics"
      },
      {
        "label": "MIT OCW – Photometry and optical radiation",
        "url": "https://ocw.mit.edu/courses/"
      },
      {
        "label": "EN 12464-1 – Illuminazione luoghi di lavoro",
        "url": "https://www.en-standard.eu/bs-en-12464-1-lighting-of-work-places-indoor-work-places/"
      }
    ]
  }
}
