{
  "version": "1.0.0",
  "metadata": {
    "title": "Advanced Lumens to Lux Converter with Simulation",
    "description": "Estimate illuminance in lux from lumens while accounting for distance, beam angle, maintenance factor, and human visual perception. Includes methods tailored for engineers, cinematographers, students, and hobbyists."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "basic_convert",
    "methods": {
      "basic_convert": {
        "label": "Quick Lumens → Lux Conversion",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": [
              "distance",
              "beam_angle"
            ],
            "label": "Illuminated area",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": [
              "lumen",
              "area",
              "llf"
            ],
            "label": "Illuminance (lux)",
            "unit": "lux",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          }
        ]
      },
      "photography_exposure": {
        "label": "Camera Exposure Simulation",
        "variables": {
          "lux_for_exposure": {
            "expression": "(iso / 100) * (1 / shutter) / (fstop^2)",
            "dependencies": [
              "iso",
              "shutter",
              "fstop"
            ],
            "label": "Estimated lux for exposure",
            "unit": "lux",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux_for_exposure",
            "label": "Lux required for exposure",
            "variable": "lux_for_exposure",
            "unit": "lux",
            "format": "decimal"
          }
        ]
      },
      "normative_check": {
        "label": "Normative Level Check (Workplaces)",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": [
              "distance",
              "beam_angle"
            ],
            "label": "Illuminated area",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": [
              "lumen",
              "area",
              "llf"
            ],
            "label": "Calculated illuminance",
            "unit": "lux",
            "format": "decimal",
            "display": true
          },
          "compliance": {
            "expression": "lux >= lux_required",
            "dependencies": [
              "lux",
              "lux_required"
            ],
            "label": "Meets minimum target?",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux (with LLF)",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          },
          {
            "id": "compliance",
            "label": "Meets minimum standard",
            "variable": "compliance",
            "format": "decimal"
          }
        ]
      },
      "perceived_brightness": {
        "label": "Perceived Brightness (Stevens' Law)",
        "variables": {
          "area": {
            "expression": "3.1416 * (distance * tan(beam_angle / 2 * 3.1416 / 180))^2",
            "dependencies": [
              "distance",
              "beam_angle"
            ],
            "label": "Illuminated area",
            "unit": "square_meter",
            "format": "decimal",
            "display": false
          },
          "lux": {
            "expression": "(lumen / area) * llf",
            "dependencies": [
              "lumen",
              "area",
              "llf"
            ],
            "label": "Physical lux",
            "unit": "lux",
            "format": "decimal",
            "display": true
          },
          "perceived": {
            "expression": "lux^0.33",
            "dependencies": [
              "lux"
            ],
            "label": "Perceived brightness (arbitrary scale)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "lux",
            "label": "Lux (physical)",
            "variable": "lux",
            "unit": "lux",
            "format": "decimal"
          },
          {
            "id": "perceived",
            "label": "Perceived brightness",
            "variable": "perceived",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "lumen",
        "label": "Luminous flux (lumens)",
        "type": "number",
        "unit": "lumen",
        "min": 0
      },
      {
        "id": "distance",
        "label": "Distance to target plane (m)",
        "type": "number",
        "unit": "meter",
        "min": 0.01
      },
      {
        "id": "beam_angle",
        "label": "Beam angle (°)",
        "type": "number",
        "unit": "degree",
        "min": 1,
        "max": 180
      },
      {
        "id": "llf",
        "label": "Light Loss Factor (LLF)",
        "type": "number",
        "min": 0.1,
        "max": 1,
        "default": 0.9
      },
      {
        "id": "lux_required",
        "label": "Required minimum lux",
        "type": "number",
        "unit": "lux"
      },
      {
        "id": "iso",
        "label": "Camera ISO",
        "type": "number",
        "default": 400,
        "min": 25
      },
      {
        "id": "shutter",
        "label": "Shutter time (s)",
        "type": "number",
        "default": 0.02
      },
      {
        "id": "fstop",
        "label": "Lens f-stop",
        "type": "number",
        "default": 2.8
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This advanced calculator lets you estimate illuminance in lux from a source's lumen rating while explicitly accounting for distance, beam angle, and maintenance losses (LLF).",
      "It also includes methods for camera exposure estimation, workplace normative checks, and human-perceived brightness based on Stevens' power law, covering the needs of engineers, facility managers, cinematographers, students, and technically minded hobbyists."
    ],
    "methodology": [
      "The fundamental photometric relationship between luminous flux Φ (lumens) and illuminance E (lux) is E = Φ / A, where A is the illuminated area in square metres. Because A depends on geometry, we approximate the lit area as a cone defined by distance and beam angle.",
      "The calculated illuminance is then adjusted with a Light Loss Factor (LLF) to reflect real-world losses due to aging, dirt, optics, and maintenance conditions, following common engineering practice for maintained illuminance.",
      "For visual perception, Stevens' law is used as a simple model of how perceived brightness grows sub-linearly with physical lux; E^0.33 is a commonly cited exponent for brightness judgments in laboratory studies.",
      "For regulated environments, calculated lux can be compared against target values derived from standards and guidance such as OSHA workplace rules, ISO 8995 and EN 12464 for lighting of work places, and university teaching material on recommended illuminance levels."
    ],
    "faqs": [
      {
        "question": "How does beam angle affect lux?",
        "answer": "For the same lumen output, a narrow beam compresses light into a smaller area and raises lux, while a wide beam spreads light over a larger area and lowers lux. Geometry determines the illuminated area, so beam angle is just as important as lumens."
      },
      {
        "question": "What is the Light Loss Factor (LLF)?",
        "answer": "LLF is a coefficient between 0.1 and 1 that reduces the nominal output to account for lumen depreciation, dirt accumulation, aging of optics and lamps, and other maintenance-related losses. It helps approximate maintained illuminance later in the life of an installation."
      },
      {
        "question": "What does perceived brightness represent here?",
        "answer": "Perceived brightness is an approximate, unitless measure of how bright a scene feels to a typical observer. It is derived by applying Stevens' power law to physical lux, using an exponent less than 1 to reflect the diminishing returns of adding more light."
      },
      {
        "question": "Can I rely on this tool for safety and compliance?",
        "answer": "You can use it to plan, estimate, and sanity-check designs, but formal compliance with occupational safety and building-lighting standards normally requires on-site measurements with calibrated lux meters and documented procedures as described by OSHA, ISO and EN standards."
      },
      {
        "question": "Which camera parameters are included in the exposure method?",
        "answer": "The exposure method combines ISO, shutter time, and f-stop to estimate how much illuminance on the scene is needed for a typical digital sensor, using a simplified exposure relationship to connect camera settings with approximate lux levels."
      }
    ],
    "citations": [
      {
        "label": "NIST – Realization of the lumen and lux from the SI base unit candela",
        "url": "https://www.nist.gov/pml/sensor-science/optical-radiation/realization-lumen"
      },
      {
        "label": "OSHA – Illumination requirements for workplace safety",
        "url": "https://www.osha.gov/laws-regs/regulations/standardnumber/1918/1918.92"
      },
      {
        "label": "Open University – Illuminance and the lux definition",
        "url": "https://www.open.edu/openlearn/nature-environment/energy-buildings/content-section-5-2-3"
      },
      {
        "label": "U.S. Department of Energy – Lighting basics and solid-state lighting",
        "url": "https://www.energy.gov/eere/ssl/lighting-basics"
      },
      {
        "label": "MIT OpenCourseWare – Lectures on optical radiation and photometry",
        "url": "https://ocw.mit.edu/courses/"
      },
      {
        "label": "EN 12464-1 / ISO 8995-1 – Lighting of work places (indoor)",
        "url": "https://www.en-standard.eu/bs-en-12464-1-lighting-of-work-places-indoor-work-places/"
      }
    ]
  }
}
