{
  "version": "1.0.0",
  "metadata": {
    "title": "Asset Allocation Calculator (Advanced)",
    "description": "Multi-method asset allocation tool to analyze current allocations, compute rebalance trades to a target allocation, and generate risk-based target suggestions. Includes expected-return assumptions and totals for trade volume; designed for clarity, calibration, and auditability."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "rebalance",
    "methods": {
      "analyze_current": {
        "label": "Analyze current allocation",
        "description": "Compute current asset values and portfolio expected return using supplied expected-return assumptions.",
        "variables": {
          "equities_value": {
            "expression": "total_value * current_equities_pct / 100",
            "dependencies": [
              "total_value",
              "current_equities_pct"
            ],
            "label": "Current equities value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "bonds_value": {
            "expression": "total_value * current_bonds_pct / 100",
            "dependencies": [
              "total_value",
              "current_bonds_pct"
            ],
            "label": "Current bonds value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_value": {
            "expression": "total_value * current_cash_pct / 100",
            "dependencies": [
              "total_value",
              "current_cash_pct"
            ],
            "label": "Current cash value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "alts_value": {
            "expression": "total_value * current_alts_pct / 100",
            "dependencies": [
              "total_value",
              "current_alts_pct"
            ],
            "label": "Current alternatives value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "portfolio_expected_return_pct": {
            "expression": "(current_equities_pct * expected_return_equities_pct + current_bonds_pct * expected_return_bonds_pct + current_cash_pct * expected_return_cash_pct + current_alts_pct * expected_return_alts_pct) / 100",
            "dependencies": [
              "current_equities_pct",
              "current_bonds_pct",
              "current_cash_pct",
              "current_alts_pct",
              "expected_return_equities_pct",
              "expected_return_bonds_pct",
              "expected_return_cash_pct",
              "expected_return_alts_pct"
            ],
            "label": "Portfolio expected return (percent)",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "equities_value",
            "label": "Equities — current value",
            "variable": "equities_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "bonds_value",
            "label": "Bonds — current value",
            "variable": "bonds_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "cash_value",
            "label": "Cash — current value",
            "variable": "cash_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "alts_value",
            "label": "Alternatives — current value",
            "variable": "alts_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "portfolio_expected_return_pct",
            "label": "Estimated portfolio return (%)",
            "variable": "portfolio_expected_return_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "rebalance": {
        "label": "Rebalance to target allocation",
        "description": "Calculate target values and required trades (buy/sell amounts) to move from current allocation to a specified target allocation.",
        "variables": {
          "equities_current_value": {
            "expression": "total_value * current_equities_pct / 100",
            "dependencies": [
              "total_value",
              "current_equities_pct"
            ],
            "label": "Equities current value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "bonds_current_value": {
            "expression": "total_value * current_bonds_pct / 100",
            "dependencies": [
              "total_value",
              "current_bonds_pct"
            ],
            "label": "Bonds current value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_current_value": {
            "expression": "total_value * current_cash_pct / 100",
            "dependencies": [
              "total_value",
              "current_cash_pct"
            ],
            "label": "Cash current value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "alts_current_value": {
            "expression": "total_value * current_alts_pct / 100",
            "dependencies": [
              "total_value",
              "current_alts_pct"
            ],
            "label": "Alternatives current value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "equities_target_value": {
            "expression": "total_value * target_equities_pct / 100",
            "dependencies": [
              "total_value",
              "target_equities_pct"
            ],
            "label": "Equities target value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "bonds_target_value": {
            "expression": "total_value * target_bonds_pct / 100",
            "dependencies": [
              "total_value",
              "target_bonds_pct"
            ],
            "label": "Bonds target value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_target_value": {
            "expression": "total_value * target_cash_pct / 100",
            "dependencies": [
              "total_value",
              "target_cash_pct"
            ],
            "label": "Cash target value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "alts_target_value": {
            "expression": "total_value * target_alts_pct / 100",
            "dependencies": [
              "total_value",
              "target_alts_pct"
            ],
            "label": "Alternatives target value",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "rebalance_equities": {
            "expression": "equities_target_value - equities_current_value",
            "dependencies": [
              "equities_target_value",
              "equities_current_value"
            ],
            "label": "Equities trade amount (positive = buy, negative = sell)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "rebalance_bonds": {
            "expression": "bonds_target_value - bonds_current_value",
            "dependencies": [
              "bonds_target_value",
              "bonds_current_value"
            ],
            "label": "Bonds trade amount (positive = buy, negative = sell)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "rebalance_cash": {
            "expression": "cash_target_value - cash_current_value",
            "dependencies": [
              "cash_target_value",
              "cash_current_value"
            ],
            "label": "Cash trade amount (positive = buy, negative = sell)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "rebalance_alts": {
            "expression": "alts_target_value - alts_current_value",
            "dependencies": [
              "alts_target_value",
              "alts_current_value"
            ],
            "label": "Alternatives trade amount (positive = buy, negative = sell)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_rebalance_volume": {
            "expression": "abs(rebalance_equities) + abs(rebalance_bonds) + abs(rebalance_cash) + abs(rebalance_alts)",
            "dependencies": [
              "rebalance_equities",
              "rebalance_bonds",
              "rebalance_cash",
              "rebalance_alts"
            ],
            "label": "Total trade volume required (sum of absolute buys and sells)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "equities_target_value",
            "label": "Equities — target value",
            "variable": "equities_target_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "rebalance_equities",
            "label": "Equities — trade amount",
            "variable": "rebalance_equities",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "bonds_target_value",
            "label": "Bonds — target value",
            "variable": "bonds_target_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "rebalance_bonds",
            "label": "Bonds — trade amount",
            "variable": "rebalance_bonds",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "cash_target_value",
            "label": "Cash — target value",
            "variable": "cash_target_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "rebalance_cash",
            "label": "Cash — trade amount",
            "variable": "rebalance_cash",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "alts_target_value",
            "label": "Alternatives — target value",
            "variable": "alts_target_value",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "rebalance_alts",
            "label": "Alternatives — trade amount",
            "variable": "rebalance_alts",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_rebalance_volume",
            "label": "Total trade volume",
            "variable": "total_rebalance_volume",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "suggest_target_conservative": {
        "label": "Suggest target — Conservative",
        "description": "Static conservative target allocation recommended as a starting point; adjust for personal circumstances.",
        "variables": {
          "rec_equities_pct": {
            "expression": "40",
            "dependencies": [],
            "label": "Recommended equities (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_bonds_pct": {
            "expression": "50",
            "dependencies": [],
            "label": "Recommended bonds (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_cash_pct": {
            "expression": "5",
            "dependencies": [],
            "label": "Recommended cash (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_alts_pct": {
            "expression": "5",
            "dependencies": [],
            "label": "Recommended alternatives (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_equities_value": {
            "expression": "total_value * rec_equities_pct / 100",
            "dependencies": [
              "total_value",
              "rec_equities_pct"
            ],
            "label": "Recommended equities value",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "rec_equities_pct",
            "label": "Recommended equities (%)",
            "variable": "rec_equities_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_bonds_pct",
            "label": "Recommended bonds (%)",
            "variable": "rec_bonds_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_cash_pct",
            "label": "Recommended cash (%)",
            "variable": "rec_cash_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_alts_pct",
            "label": "Recommended alternatives (%)",
            "variable": "rec_alts_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_equities_value",
            "label": "Recommended equities — value",
            "variable": "rec_equities_value",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "suggest_target_moderate": {
        "label": "Suggest target — Moderate",
        "description": "Static moderate target allocation recommended as a starting point; adjust for personal circumstances.",
        "variables": {
          "rec_equities_pct": {
            "expression": "60",
            "dependencies": [],
            "label": "Recommended equities (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_bonds_pct": {
            "expression": "30",
            "dependencies": [],
            "label": "Recommended bonds (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_cash_pct": {
            "expression": "5",
            "dependencies": [],
            "label": "Recommended cash (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_alts_pct": {
            "expression": "5",
            "dependencies": [],
            "label": "Recommended alternatives (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "rec_equities_pct",
            "label": "Recommended equities (%)",
            "variable": "rec_equities_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_bonds_pct",
            "label": "Recommended bonds (%)",
            "variable": "rec_bonds_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_cash_pct",
            "label": "Recommended cash (%)",
            "variable": "rec_cash_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_alts_pct",
            "label": "Recommended alternatives (%)",
            "variable": "rec_alts_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "suggest_target_aggressive": {
        "label": "Suggest target — Aggressive",
        "description": "Static aggressive target allocation recommended as a starting point; adjust for personal circumstances.",
        "variables": {
          "rec_equities_pct": {
            "expression": "80",
            "dependencies": [],
            "label": "Recommended equities (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_bonds_pct": {
            "expression": "15",
            "dependencies": [],
            "label": "Recommended bonds (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_cash_pct": {
            "expression": "3",
            "dependencies": [],
            "label": "Recommended cash (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "rec_alts_pct": {
            "expression": "2",
            "dependencies": [],
            "label": "Recommended alternatives (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "rec_equities_pct",
            "label": "Recommended equities (%)",
            "variable": "rec_equities_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_bonds_pct",
            "label": "Recommended bonds (%)",
            "variable": "rec_bonds_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_cash_pct",
            "label": "Recommended cash (%)",
            "variable": "rec_cash_pct",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "rec_alts_pct",
            "label": "Recommended alternatives (%)",
            "variable": "rec_alts_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "total_value",
        "label": "Total portfolio value",
        "type": "number",
        "default": 100000,
        "min": 0,
        "step": 100
      },
      {
        "id": "current_equities_pct",
        "label": "Current equities (%)",
        "type": "number",
        "default": 60,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "current_bonds_pct",
        "label": "Current bonds (%)",
        "type": "number",
        "default": 30,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "current_cash_pct",
        "label": "Current cash (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "current_alts_pct",
        "label": "Current alternatives (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "target_equities_pct",
        "label": "Target equities (%)",
        "type": "number",
        "default": 60,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "target_bonds_pct",
        "label": "Target bonds (%)",
        "type": "number",
        "default": 30,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "target_cash_pct",
        "label": "Target cash (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "target_alts_pct",
        "label": "Target alternatives (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "expected_return_equities_pct",
        "label": "Expected equities return (annual %)",
        "type": "number",
        "default": 7,
        "min": -100,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "expected_return_bonds_pct",
        "label": "Expected bonds return (annual %)",
        "type": "number",
        "default": 3,
        "min": -100,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "expected_return_cash_pct",
        "label": "Expected cash return (annual %)",
        "type": "number",
        "default": 0.5,
        "min": -100,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "expected_return_alts_pct",
        "label": "Expected alternatives return (annual %)",
        "type": "number",
        "default": 6,
        "min": -100,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "rebalance_threshold_pct",
        "label": "Rebalance threshold (percent deviation that triggers a rebalance)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "risk_tolerance",
        "label": "Risk tolerance (affects suggested targets)",
        "type": "select",
        "default": "moderate",
        "options": [
          {
            "label": "Conservative",
            "value": "conservative"
          },
          {
            "label": "Moderate",
            "value": "moderate"
          },
          {
            "label": "Aggressive",
            "value": "aggressive"
          }
        ]
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "equities_value",
          "label": "Equities — current value",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "bonds_value",
          "label": "Bonds — current value",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "cash_value",
          "label": "Cash — current value",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "alts_value",
          "label": "Alternatives — current value",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "portfolio_expected_return_pct",
          "label": "Estimated portfolio return (%)",
          "format": "percent",
          "unit": "%"
        },
        {
          "id": "rebalance_equities",
          "label": "Equities — trade amount",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "rebalance_bonds",
          "label": "Bonds — trade amount",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "rebalance_cash",
          "label": "Cash — trade amount",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "rebalance_alts",
          "label": "Alternatives — trade amount",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "total_rebalance_volume",
          "label": "Total trade volume",
          "format": "currency",
          "unit": "USD"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This asset allocation calculator helps you inspect your current portfolio mix, compute the precise dollar trades needed to rebalance to a target allocation, and view risk-based target suggestions. It accepts per-asset percentage inputs and expected-return assumptions and reports values in currency and percent formats.",
      "Use this tool to prepare a rebalancing plan, estimate expected portfolio return under your assumptions, and quantify total trade volume needed. It is intended for planning and illustration, not as personalized financial advice."
    ],
    "methodology": [
      "Calculations are deterministic algebraic computations based on user inputs. Current asset values are calculated as total portfolio value multiplied by the asset's percentage. Target values use the same approach with target percentages.",
      "Rebalance amounts equal target value minus current value for each asset class. Total trade volume is the sum of absolute buy and sell amounts. Expected portfolio return is a weighted average of per-asset expected returns using current allocation weights.",
      "This tool is designed for transparency and auditability. For secure handling of user data and calculation integrity we recommend following recognized standards for data protection and numerical accuracy. See citations to NIST, ISO, and IEEE below for guidance on security, information management, and numeric software practices."
    ],
    "how_is_calculated": [
      "Current asset value = total_portfolio_value × current_asset_pct / 100",
      "Target asset value = total_portfolio_value × target_asset_pct / 100",
      "Trade amount (per asset) = target asset value − current asset value",
      "Total trade volume = Σ |trade amount per asset|",
      "Portfolio expected return (%) = Σ (current_asset_pct × expected_return_asset_pct) / 100"
    ],
    "examples": [
      "Example 1: Total = $100,000; Current equities 60% ($60,000); Target equities 50% ($50,000). Rebalance: sell $10,000 of equities. Total trade volume includes absolute buys/sells across all assets.",
      "Example 2: If expected returns are equities 7%, bonds 3%, cash 0.5%, and current allocation is 60/30/10, portfolio expected return = (60×7 + 30×3 + 10×0.5) / 100 = 5.05%."
    ],
    "faqs": [
      {
        "question": "Is this calculator providing financial advice?",
        "answer": "No. This tool performs mechanical calculations for analysis and planning. It does not consider taxes, transaction costs, timing, legal constraints, or your full financial situation. Consult a licensed advisor for personalized advice."
      },
      {
        "question": "How accurate are the expected-return estimates?",
        "answer": "Expected returns are user-provided assumptions. Past performance and historical averages are not guarantees of future returns. Use the expected-return fields to run sensitivity checks; always treat results as illustrative."
      },
      {
        "question": "Does the tool handle fractional shares, transaction costs, or taxes?",
        "answer": "No. Calculations produce dollar amounts for required trades. Implementation of actual trades must consider fractional shares, commissions, spreads, and tax implications which are not modeled here."
      },
      {
        "question": "How should I choose a rebalance threshold?",
        "answer": "A common approach is a percentage band (for example ±5%) around target weights; when an asset deviates beyond that band, rebalance to target. Consider costs and tax implications when setting a threshold."
      },
      {
        "question": "What are the security and data considerations?",
        "answer": "Protect sensitive inputs and outputs, follow organizational security practices and standards (see citations). Do not paste private account credentials into calculators and avoid storing sensitive data without proper controls."
      }
    ],
    "citations": [
      {
        "label": "NIST - Cybersecurity and privacy best practices",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - Information security management and general standards",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE - Numeric computing and software engineering guidance",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA - Workplace safety & risk-management principles (for operational teams)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Asset allocation",
        "definition": "The distribution of portfolio value across asset classes such as equities, bonds, cash, and alternatives."
      },
      {
        "term": "Rebalancing",
        "definition": "The process of buying or selling assets to return a portfolio to a target allocation."
      },
      {
        "term": "Target allocation",
        "definition": "A set of percentage weights for each asset class that an investor intends to maintain over time."
      },
      {
        "term": "Risk tolerance",
        "definition": "An investor's willingness and ability to endure volatility and potential loss in pursuit of higher expected returns."
      }
    ]
  },
  "links": {
    "internal": [
      "/calculators/portfolio/rebalance-planner",
      "/guides/asset-allocation/overview"
    ],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}