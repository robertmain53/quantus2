{
  "version": "1.0.0",
  "metadata": {
    "title": "Expense Ratio Calculator (Funds & ETFs)",
    "description": "Interactive calculator to estimate annual fees, long-term cost of an expense ratio on investment growth, and side-by-side comparisons between funds. Includes conservative assumptions, contribution support, and explicit accuracy caveats."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "fv_impact",
    "methods": {
      "annual_cost": {
        "label": "Annual fee from expense ratio",
        "description": "Calculate the immediate annual fee charged to an asset base by the stated expense ratio.",
        "variables": {
          "annual_fee": {
            "expression": "asset_value * (expense_ratio / 100)",
            "dependencies": [
              "asset_value",
              "expense_ratio"
            ],
            "label": "Annual fee",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "annual_fee",
            "label": "Annual fee (current year)",
            "variable": "annual_fee",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "fv_impact": {
        "label": "Future value impact (gross vs net)",
        "description": "Estimate future value with and without the expense ratio applied to annual returns and quantify the cumulative cost over time, including optional recurring annual contributions.",
        "variables": {
          "gross_rate": {
            "expression": "expected_return",
            "dependencies": [
              "expected_return"
            ],
            "label": "Gross annual return (%)",
            "format": "percent",
            "display": false
          },
          "net_rate": {
            "expression": "expected_return - expense_ratio",
            "dependencies": [
              "expected_return",
              "expense_ratio"
            ],
            "label": "Net annual return (%)",
            "format": "percent",
            "display": false
          },
          "fv_gross": {
            "expression": "asset_value * (1 + gross_rate/100) ^ years + annual_contribution * (((1 + gross_rate/100) ^ years - 1) / (gross_rate/100))",
            "dependencies": [
              "asset_value",
              "gross_rate",
              "years",
              "annual_contribution"
            ],
            "label": "Future value before fees",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "fv_net": {
            "expression": "asset_value * (1 + net_rate/100) ^ years + annual_contribution * (((1 + net_rate/100) ^ years - 1) / (net_rate/100))",
            "dependencies": [
              "asset_value",
              "net_rate",
              "years",
              "annual_contribution"
            ],
            "label": "Future value after fees",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_cost": {
            "expression": "fv_gross - fv_net",
            "dependencies": [
              "fv_gross",
              "fv_net"
            ],
            "label": "Cumulative cost of fees (over period)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "percent_loss": {
            "expression": "total_cost / fv_gross * 100",
            "dependencies": [
              "total_cost",
              "fv_gross"
            ],
            "label": "Percent reduction in final value",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "fv_gross",
            "label": "Future value (before fees)",
            "variable": "fv_gross",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "fv_net",
            "label": "Future value (after fees)",
            "variable": "fv_net",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_cost",
            "label": "Cumulative fee cost",
            "variable": "total_cost",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "percent_loss",
            "label": "Percent reduction in final value",
            "variable": "percent_loss",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "compare_funds": {
        "label": "Compare two funds (same return assumption)",
        "description": "Compare ending balances for two different expense ratios using the same gross return assumption and contributions to highlight the relative impact.",
        "variables": {
          "net_rate_1": {
            "expression": "expected_return - expense_ratio",
            "dependencies": [
              "expected_return",
              "expense_ratio"
            ],
            "label": "Net annual return fund A (%)",
            "format": "percent",
            "display": false
          },
          "net_rate_2": {
            "expression": "expected_return - expense_ratio_2",
            "dependencies": [
              "expected_return",
              "expense_ratio_2"
            ],
            "label": "Net annual return fund B (%)",
            "format": "percent",
            "display": false
          },
          "fv_1": {
            "expression": "asset_value * (1 + net_rate_1/100) ^ years + annual_contribution * (((1 + net_rate_1/100) ^ years - 1) / (net_rate_1/100))",
            "dependencies": [
              "asset_value",
              "net_rate_1",
              "years",
              "annual_contribution"
            ],
            "label": "Future value fund A",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "fv_2": {
            "expression": "asset_value * (1 + net_rate_2/100) ^ years + annual_contribution * (((1 + net_rate_2/100) ^ years - 1) / (net_rate_2/100))",
            "dependencies": [
              "asset_value",
              "net_rate_2",
              "years",
              "annual_contribution"
            ],
            "label": "Future value fund B",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "difference": {
            "expression": "fv_1 - fv_2",
            "dependencies": [
              "fv_1",
              "fv_2"
            ],
            "label": "Absolute difference (A - B)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "difference_percent": {
            "expression": "difference / fv_1 * 100",
            "dependencies": [
              "difference",
              "fv_1"
            ],
            "label": "Difference as percent of fund A",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "fv_1",
            "label": "Future value (fund A)",
            "variable": "fv_1",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "fv_2",
            "label": "Future value (fund B)",
            "variable": "fv_2",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "difference",
            "label": "Absolute difference (A − B)",
            "variable": "difference",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "difference_percent",
            "label": "Difference as % of fund A",
            "variable": "difference_percent",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "asset_value",
        "label": "Current investment value",
        "type": "number",
        "default": 10000,
        "min": 0,
        "step": 1
      },
      {
        "id": "expense_ratio",
        "label": "Expense ratio (annual %) — fund A",
        "type": "number",
        "default": 0.5,
        "min": 0,
        "max": 10,
        "step": 0.01
      },
      {
        "id": "expense_ratio_2",
        "label": "Expense ratio (annual %) — fund B",
        "type": "number",
        "default": 0.2,
        "min": 0,
        "max": 10,
        "step": 0.01
      },
      {
        "id": "expected_return",
        "label": "Expected gross annual return (%)",
        "type": "number",
        "default": 6,
        "min": -100,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "annual_contribution",
        "label": "Annual contribution",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "years",
        "label": "Years to project",
        "type": "integer",
        "default": 20,
        "min": 0,
        "max": 100,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This Expense Ratio Calculator helps quantify the direct annual fee charged by a fund and the long-term drag that expense ratios impose on investment growth. Use it to estimate the immediate dollar cost, model future-value impact with recurring contributions, and compare two funds side-by-side under the same return assumptions.",
      "Results are illustrative and use algebraic compounding assumptions. Inputs include current assets, expected gross return, expense ratios, recurring annual contributions, and projection length. The tool is designed for clarity and reproducibility; see methodology and caveats for limitations."
    ],
    "methodology": [
      "Annual fees are modeled as a percentage of assets expressed as an annual expense ratio. The calculator computes both the simple annual fee (current assets × expense ratio) and the accumulated effect of that drag on investment growth over time by reducing the gross return by the expense ratio.",
      "Future-value calculations apply standard compound interest formulas for both lump sums and regular annual contributions. The gross scenario uses the stated expected return; the net scenario reduces that return by the expense ratio to approximate the long-run effect of ongoing fees.",
      "For comparisons, the same gross return assumption is used for each fund; only the expense ratio differs. All outputs are rounded and include percent and currency summaries. Edge cases (zero return, negative rates) are handled by algebraic forms but may require careful interpretation."
    ],
    "how_is_calculated": [
      "Annual fee = asset_value × (expense_ratio / 100).",
      "Future value (gross) = asset_value × (1 + r/100)^n + annual_contribution × (((1 + r/100)^n − 1) / (r/100)), where r = expected gross return.",
      "Future value (net) = same formula with r replaced by (r − expense_ratio).",
      "Cumulative cost = future value (gross) − future value (net)."
    ],
    "examples": [
      "Example 1: $10,000 at 6% expected return with 0.50% expense ratio over 20 years and no contributions. Annual fee (first year) = $50. Cumulative difference in final value can exceed several thousand dollars depending on the horizon.",
      "Example 2: Compare fund A (0.50%) vs fund B (0.20%) with $5,000 current value, $2,000 annual contributions, 7% expected return, over 30 years to illustrate compounding differences."
    ],
    "faqs": [
      {
        "question": "Does the calculator include transaction costs or taxes?",
        "answer": "No. This tool models only ongoing management/expense ratios. It does not account for trading costs, bid-ask spreads, taxes, load fees, or taxes on distributions. Include those separately when assessing total cost."
      },
      {
        "question": "How accurate are the compound projections?",
        "answer": "Projections follow standard mathematical compounding formulas and are accurate to the input precision. Real-world returns vary year to year; this tool uses a constant expected return, which is a simplifying assumption. See accuracy and compliance notes."
      },
      {
        "question": "What if expected return equals the expense ratio?",
        "answer": "If expected return equals the expense ratio, the net return is zero and the net future value equals the sum of contributions (no growth). The calculator will produce mathematically consistent results but interpret them as limit cases."
      },
      {
        "question": "Are results suitable for regulatory disclosure or compliance filing?",
        "answer": "This calculator provides illustrative estimates. For formal disclosures, audits, or legal compliance use certified actuarial or compliance processes. See citations for standards on validation and software quality."
      }
    ],
    "glossary": [
      {
        "term": "Expense ratio",
        "definition": "Annual percentage of assets charged by a fund to cover operating expenses, typically expressed as a percentage of assets under management."
      },
      {
        "term": "Gross return",
        "definition": "The expected annual investment return before fees are deducted."
      },
      {
        "term": "Net return",
        "definition": "Gross return minus expense ratio, representing the return remaining to investors after ongoing fund fees."
      },
      {
        "term": "Future value",
        "definition": "Projected value of an investment after compounding returns and contributions over a specified number of years."
      },
      {
        "term": "Annual contribution",
        "definition": "A recurring amount added at the end of each year in the projection."
      }
    ],
    "citations": [
      {
        "label": "NIST — Risk Management Framework and Controls",
        "url": "https://www.nist.gov/"
      },
      {
        "label": "ISO — Quality and management standards",
        "url": "https://www.iso.org/"
      },
      {
        "label": "IEEE — Standards for numerical computing and software engineering",
        "url": "https://www.ieee.org/"
      },
      {
        "label": "OSHA — Workplace safety and procedural controls (governance reference)",
        "url": "https://www.osha.gov/"
      }
    ]
  },
  "links": {
    "internal": [
      "/tools/investing/fee-impact",
      "/guides/understanding-expense-ratios"
    ],
    "external": [
      {
        "url": "https://www.nist.gov/",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org/",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  }
}