{
  "version": "1.0.0",
  "metadata": {
    "title": "Student Loan Payment Calculator with Extra Payments (Advanced)",
    "description": "Estimate payoff time, interest paid, and interest saved when making recurring extra payments or a one-time lump-sum payment. Includes options for payment frequency and clear accuracy and security notes."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "recurring_extra",
    "methods": {
      "recurring_extra": {
        "label": "Standard amortization with recurring extra payment",
        "description": "Applies a fixed additional amount to each scheduled payment and computes reduced payoff time and interest.",
        "variables": {
          "payments_per_year": {
            "expression": "payment_frequency*1",
            "dependencies": [
              "payment_frequency"
            ],
            "label": "Payments per year",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "periodic_rate": {
            "expression": "annual_interest_rate_percent/100 / (payment_frequency*1)",
            "dependencies": [
              "annual_interest_rate_percent",
              "payment_frequency"
            ],
            "label": "Periodic interest rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n_periods": {
            "expression": "term_years * (payment_frequency*1)",
            "dependencies": [
              "term_years",
              "payment_frequency"
            ],
            "label": "Number of scheduled periods",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "pow1": {
            "expression": "pow(1 + periodic_rate, n_periods)",
            "dependencies": [
              "periodic_rate",
              "n_periods"
            ],
            "label": "Discount factor",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "standard_payment": {
            "expression": "(principal * (periodic_rate * pow1)) / (pow1 - 1)",
            "dependencies": [
              "principal",
              "periodic_rate",
              "pow1",
              "n_periods"
            ],
            "label": "Scheduled payment (no extra)",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "payment_with_extra": {
            "expression": "standard_payment + extra_amount_per_payment",
            "dependencies": [
              "standard_payment",
              "extra_amount_per_payment"
            ],
            "label": "Scheduled payment with recurring extra",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "periods_to_payoff": {
            "expression": "log(payment_with_extra / (payment_with_extra - principal * periodic_rate)) / log(1 + periodic_rate)",
            "dependencies": [
              "payment_with_extra",
              "principal",
              "periodic_rate"
            ],
            "label": "Periods until payoff with recurring extra",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "baseline_total_interest": {
            "expression": "standard_payment * n_periods - principal",
            "dependencies": [
              "standard_payment",
              "n_periods",
              "principal"
            ],
            "label": "Total interest (no extra)",
            "unit": "",
            "format": "currency",
            "display": false
          },
          "total_interest": {
            "expression": "payment_with_extra * periods_to_payoff - principal",
            "dependencies": [
              "payment_with_extra",
              "periods_to_payoff",
              "principal"
            ],
            "label": "Total interest paid (with recurring extra)",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "interest_saved": {
            "expression": "baseline_total_interest - total_interest",
            "dependencies": [
              "baseline_total_interest",
              "total_interest"
            ],
            "label": "Interest saved versus no extra payments",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "time_to_payoff_years": {
            "expression": "periods_to_payoff / (payment_frequency*1)",
            "dependencies": [
              "periods_to_payoff",
              "payment_frequency"
            ],
            "label": "Estimated time to payoff (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "standard_payment",
            "label": "Scheduled payment (no extra)",
            "variable": "standard_payment",
            "unit": "",
            "format": "currency"
          },
          {
            "id": "payment_with_extra",
            "label": "Payment with recurring extra",
            "variable": "payment_with_extra",
            "unit": "",
            "format": "currency"
          },
          {
            "id": "time_to_payoff_years",
            "label": "Estimated time to payoff",
            "variable": "time_to_payoff_years",
            "unit": "years",
            "format": "decimal"
          },
          {
            "id": "total_interest",
            "label": "Total interest paid",
            "variable": "total_interest",
            "unit": "",
            "format": "currency"
          },
          {
            "id": "interest_saved",
            "label": "Interest saved vs. no extra payments",
            "variable": "interest_saved",
            "unit": "",
            "format": "currency"
          }
        ]
      },
      "lump_sum_then_recurring": {
        "label": "One-time lump sum followed by recurring extra payments",
        "description": "Applies a lump-sum reduction after a specified number of scheduled payments, then continues with recurring extra payments to estimate remaining payoff time and interest.",
        "variables": {
          "payments_per_year": {
            "expression": "payment_frequency*1",
            "dependencies": [
              "payment_frequency"
            ],
            "label": "Payments per year",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "periodic_rate": {
            "expression": "annual_interest_rate_percent/100 / (payment_frequency*1)",
            "dependencies": [
              "annual_interest_rate_percent",
              "payment_frequency"
            ],
            "label": "Periodic interest rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n_periods": {
            "expression": "term_years * (payment_frequency*1)",
            "dependencies": [
              "term_years",
              "payment_frequency"
            ],
            "label": "Number of scheduled periods",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "pow_full": {
            "expression": "pow(1 + periodic_rate, n_periods)",
            "dependencies": [
              "periodic_rate",
              "n_periods"
            ],
            "label": "Full-schedule discount factor",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "standard_payment": {
            "expression": "(principal * (periodic_rate * pow_full)) / (pow_full - 1)",
            "dependencies": [
              "principal",
              "periodic_rate",
              "pow_full",
              "n_periods"
            ],
            "label": "Scheduled payment (no extra)",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "payment_with_extra": {
            "expression": "standard_payment + extra_amount_per_payment",
            "dependencies": [
              "standard_payment",
              "extra_amount_per_payment"
            ],
            "label": "Scheduled payment with recurring extra",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "pow_m": {
            "expression": "pow(1 + periodic_rate, lump_sum_periods)",
            "dependencies": [
              "periodic_rate",
              "lump_sum_periods"
            ],
            "label": "Factor for periods until lump sum",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "balance_before_lump": {
            "expression": "principal * pow_m - standard_payment * ((pow_m - 1) / periodic_rate)",
            "dependencies": [
              "principal",
              "pow_m",
              "standard_payment",
              "periodic_rate"
            ],
            "label": "Remaining balance before lump-sum",
            "unit": "",
            "format": "currency",
            "display": false
          },
          "remaining_after_lump": {
            "expression": "balance_before_lump - lump_sum_amount",
            "dependencies": [
              "balance_before_lump",
              "lump_sum_amount"
            ],
            "label": "Remaining principal after lump-sum",
            "unit": "",
            "format": "currency",
            "display": false
          },
          "periods_after_lump": {
            "expression": "log(payment_with_extra / (payment_with_extra - remaining_after_lump * periodic_rate)) / log(1 + periodic_rate)",
            "dependencies": [
              "payment_with_extra",
              "remaining_after_lump",
              "periodic_rate"
            ],
            "label": "Periods remaining after lump-sum",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "total_periods": {
            "expression": "lump_sum_periods + periods_after_lump",
            "dependencies": [
              "lump_sum_periods",
              "periods_after_lump"
            ],
            "label": "Total periods to payoff after lump-sum",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "total_paid": {
            "expression": "standard_payment * lump_sum_periods + lump_sum_amount + payment_with_extra * periods_after_lump",
            "dependencies": [
              "standard_payment",
              "lump_sum_periods",
              "lump_sum_amount",
              "payment_with_extra",
              "periods_after_lump"
            ],
            "label": "Total amount paid (principal + interest + lump)",
            "unit": "",
            "format": "currency",
            "display": false
          },
          "total_interest": {
            "expression": "total_paid - principal",
            "dependencies": [
              "total_paid",
              "principal"
            ],
            "label": "Total interest paid (with lump-sum + recurring extra)",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "baseline_total_interest": {
            "expression": "standard_payment * n_periods - principal",
            "dependencies": [
              "standard_payment",
              "n_periods",
              "principal"
            ],
            "label": "Total interest (no extra)",
            "unit": "",
            "format": "currency",
            "display": false
          },
          "interest_saved": {
            "expression": "baseline_total_interest - total_interest",
            "dependencies": [
              "baseline_total_interest",
              "total_interest"
            ],
            "label": "Interest saved versus no extra payments",
            "unit": "",
            "format": "currency",
            "display": true
          },
          "time_to_payoff_years": {
            "expression": "total_periods / (payment_frequency*1)",
            "dependencies": [
              "total_periods",
              "payment_frequency"
            ],
            "label": "Estimated time to payoff (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "standard_payment",
            "label": "Scheduled payment (no extra)",
            "variable": "standard_payment",
            "unit": "",
            "format": "currency"
          },
          {
            "id": "time_to_payoff_years",
            "label": "Estimated time to payoff",
            "variable": "time_to_payoff_years",
            "unit": "years",
            "format": "decimal"
          },
          {
            "id": "total_interest",
            "label": "Total interest paid",
            "variable": "total_interest",
            "unit": "",
            "format": "currency"
          },
          {
            "id": "interest_saved",
            "label": "Interest saved vs. no extra payments",
            "variable": "interest_saved",
            "unit": "",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Current loan balance (principal)",
        "type": "number",
        "default": 30000,
        "min": 0,
        "step": 1
      },
      {
        "id": "annual_interest_rate_percent",
        "label": "Annual interest rate (APR) in percent",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "term_years",
        "label": "Remaining term (years)",
        "type": "number",
        "default": 10,
        "min": 0,
        "step": 0.5
      },
      {
        "id": "payment_frequency",
        "label": "Payment frequency",
        "type": "select",
        "default": "12",
        "options": [
          {
            "label": "Monthly (12)",
            "value": "12"
          },
          {
            "label": "Biweekly (26)",
            "value": "26"
          },
          {
            "label": "Weekly (52)",
            "value": "52"
          }
        ]
      },
      {
        "id": "extra_amount_per_payment",
        "label": "Recurring extra payment per scheduled payment",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "lump_sum_amount",
        "label": "One-time lump-sum payment (applied on specified period)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "lump_sum_periods",
        "label": "Number of scheduled payments until lump-sum is applied",
        "type": "integer",
        "default": 12,
        "min": 0,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator estimates how recurring extra payments or a one-time lump-sum payment change the time to pay off a student loan and the total interest paid. Enter your current balance, APR, remaining term, payment frequency, and any extra payments to see results for multiple scenarios.",
      "Results are provided for two methods: adding a fixed amount to each scheduled payment, and applying a lump-sum reduction after a chosen number of payments then continuing with recurring extras. Use the scenario that matches your plan."
    ],
    "methodology": [
      "Calculations use standard amortization mathematics for fully amortizing installment loans. The scheduled (no-extra) payment is computed with the standard formula for an annuity.",
      "When recurring extras are provided, the calculator treats the extra amount as an additional principal payment each period and recomputes the number of periods until the balance reaches zero using the closed-form logarithmic solution for an amortizing loan.",
      "For a lump-sum application, the remaining balance is computed at the lump moment using the amortization balance formula, the lump-sum is subtracted, and the remaining payoff schedule is recomputed using the recurring payment (including any recurring extra)."
    ],
    "how_is_calculated": [
      "Periodic interest rate = (APR / 100) / payments per year.",
      "Scheduled payment (no extra) = principal * (r * (1+r)^N) / ((1+r)^N - 1), where r is periodic rate and N is number of periods.",
      "Periods to payoff with extra payment are solved from the amortization equation: n = ln(payment / (payment - principal*r)) / ln(1 + r).",
      "For a lump-sum, remaining balance before lump = principal*(1+r)^m - payment*(( (1+r)^m - 1)/r). After subtracting the lump-sum, remaining periods are computed with the same logarithmic formula."
    ],
    "examples": [
      "Example 1: $30,000 balance, 5% APR, 10 years remaining, monthly payments. Adding $50 to each monthly payment shortens the payoff and reduces total interest; the calculator shows years remaining and interest saved.",
      "Example 2: Same loan, apply $5,000 after 12 months, then add $50 extra each payment thereafter. The tool shows the new payoff time and total interest compared to no extra payments."
    ],
    "faqs": [
      {
        "question": "How accurate are these estimates?",
        "answer": "Estimates use standard closed-form amortization formulas and assume interest is compounded at the scheduled interval and payments are applied as specified. Results are numeric estimates; actual amounts may differ slightly due to lender rounding, timing, daily interest accrual, capitalization, or payment application order. See accuracy notes below."
      },
      {
        "question": "What if my loan has variable interest rates, fees, or deferment periods?",
        "answer": "This calculator assumes a fixed APR and uninterrupted payments. Variable rates, fees, deferments, forbearance, interest capitalization, or income-driven repayment plan rules are not modeled. For those cases, use your servicer's statements or an official loan simulator and treat these results as illustrative."
      },
      {
        "question": "Are extra payments always applied to principal?",
        "answer": "This tool assumes recurring extra payments and lump sums reduce principal immediately. Actual allocation depends on your loan servicer's policies. Confirm with your servicer how extras are applied and whether they reduce next payments or principal."
      },
      {
        "question": "Do you store or transmit my inputs?",
        "answer": "This configuration documents behavior only. Implementations should follow security standards such as NIST SP 800-series for data protection and privacy when storing or transmitting user data."
      }
    ],
    "glossary": [
      {
        "term": "APR",
        "definition": "Annual Percentage Rate, the yearly interest rate for the loan expressed as a percentage."
      },
      {
        "term": "Periodic rate",
        "definition": "Interest rate for a single payment period: APR divided by number of payments per year."
      },
      {
        "term": "Scheduled payment",
        "definition": "The payment required to amortize the loan over the remaining term without extra payments."
      },
      {
        "term": "Recurring extra payment",
        "definition": "An additional fixed amount paid alongside each scheduled payment intended to reduce principal faster."
      },
      {
        "term": "Lump-sum payment",
        "definition": "A one-time payment applied to principal at a specified future scheduled payment interval."
      }
    ],
    "summary": [
      "Use the recurring-extra method to model adding the same amount to every scheduled payment. Use the lump-sum method to model a one-time principal reduction followed by recurring extras.",
      "Results are illustrative; confirm with your loan servicer for exact payoff dates and amounts."
    ],
    "citations": [
      {
        "label": "NIST - National Institute of Standards and Technology",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - International Organization for Standardization",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards Association",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "U.S. Department of Education â€” Federal Student Aid (loan info)",
        "url": "https://studentaid.gov"
      },
      {
        "label": "Consumer Financial Protection Bureau (general consumer guidance)",
        "url": "https://www.consumerfinance.gov"
      }
    ]
  },
  "links": {
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}