{
  "version": "1.0.0",
  "metadata": {
    "title": "Student Loan Adjustable-Rate Calculator (Amortizing & Interest-Only)",
    "description": "Estimate initial and post-adjustment payments for adjustable-rate student loans. Supports index+margin or full-rate input, initial fixed period, adjustment intervals, and caps. Includes calibration notes, limits, and references to standards."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "amortizing",
    "methods": {
      "amortizing": {
        "label": "Amortizing Adjustable-Rate Loan",
        "description": "Standard amortizing loan that uses an initial rate for a fixed period then adjusts according to index/margin and caps. Calculates initial payment, outstanding balance at first reset, and example re-set payment.",
        "variables": {
          "annual_rate_pct": {
            "expression": "use_index == 'yes' ? index_rate_pct + margin_pct : initial_rate_pct",
            "dependencies": [
              "use_index",
              "index_rate_pct",
              "margin_pct",
              "initial_rate_pct"
            ],
            "label": "Annual interest rate (percent)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "periodic_rate": {
            "expression": "annual_rate_pct/100/payments_per_year",
            "dependencies": [
              "annual_rate_pct",
              "payments_per_year"
            ],
            "label": "Periodic rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n_payments": {
            "expression": "amortization_years*payments_per_year",
            "dependencies": [
              "amortization_years",
              "payments_per_year"
            ],
            "label": "Total number of payments",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "n_initial_payments": {
            "expression": "initial_period_yrs*payments_per_year",
            "dependencies": [
              "initial_period_yrs",
              "payments_per_year"
            ],
            "label": "Number of payments in initial fixed period",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "payment_amount": {
            "expression": "principal * periodic_rate / (1 - (1+periodic_rate)^(-n_payments))",
            "dependencies": [
              "principal",
              "periodic_rate",
              "n_payments"
            ],
            "label": "Initial periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "outstanding_balance": {
            "expression": "principal*(1+periodic_rate)^n_initial_payments - payment_amount*(( (1+periodic_rate)^n_initial_payments -1)/periodic_rate)",
            "dependencies": [
              "principal",
              "periodic_rate",
              "n_initial_payments",
              "payment_amount"
            ],
            "label": "Outstanding balance at first adjustment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment_rate_after_annual": {
            "expression": "annual_rate_pct + expected_index_change_pct",
            "dependencies": [
              "annual_rate_pct",
              "expected_index_change_pct"
            ],
            "label": "Example annual rate after index change (percent)",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "periodic_rate_after": {
            "expression": "payment_rate_after_annual/100/payments_per_year",
            "dependencies": [
              "payment_rate_after_annual",
              "payments_per_year"
            ],
            "label": "Periodic rate after adjustment",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "remaining_payments": {
            "expression": "(amortization_years - initial_period_yrs)*payments_per_year",
            "dependencies": [
              "amortization_years",
              "initial_period_yrs",
              "payments_per_year"
            ],
            "label": "Remaining payments after initial period",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "payment_amount_after": {
            "expression": "outstanding_balance * periodic_rate_after / (1 - (1+periodic_rate_after)^(-remaining_payments))",
            "dependencies": [
              "outstanding_balance",
              "periodic_rate_after",
              "remaining_payments"
            ],
            "label": "Example periodic payment after adjustment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment_change_pct": {
            "expression": "(payment_amount_after - payment_amount)/payment_amount*100",
            "dependencies": [
              "payment_amount_after",
              "payment_amount"
            ],
            "label": "Example change in payment (percent)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "initial_cap_applied_pct": {
            "expression": "caps_initial_pct",
            "dependencies": [
              "caps_initial_pct"
            ],
            "label": "Initial adjustment cap (percent)",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "period_cap_pct": {
            "expression": "caps_period_pct",
            "dependencies": [
              "caps_period_pct"
            ],
            "label": "Periodic adjustment cap (percent)",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "lifetime_cap_pct": {
            "expression": "caps_lifetime_pct",
            "dependencies": [
              "caps_lifetime_pct"
            ],
            "label": "Lifetime cap (percent)",
            "unit": "%",
            "format": "percent",
            "display": false
          }
        },
        "outputs": [
          {
            "id": "initial_payment",
            "label": "Initial periodic payment",
            "variable": "payment_amount",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "outstanding_balance",
            "label": "Outstanding balance at first reset",
            "variable": "outstanding_balance",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "post_adjustment_payment",
            "label": "Example payment after adjustment",
            "variable": "payment_amount_after",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "payment_change_pct",
            "label": "Example payment change",
            "variable": "payment_change_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "interest_only": {
        "label": "Interest-Only Adjustable-Rate Loan",
        "description": "Interest-only payment mode during an initial period, then converts to amortizing at adjustment. Calculates interest-only payment and example payment after adjustment.",
        "variables": {
          "annual_rate_pct": {
            "expression": "use_index == 'yes' ? index_rate_pct + margin_pct : initial_rate_pct",
            "dependencies": [
              "use_index",
              "index_rate_pct",
              "margin_pct",
              "initial_rate_pct"
            ],
            "label": "Annual interest rate (percent)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "interest_only_payment": {
            "expression": "principal * annual_rate_pct/100 / payments_per_year",
            "dependencies": [
              "principal",
              "annual_rate_pct",
              "payments_per_year"
            ],
            "label": "Interest-only periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment_rate_after_annual": {
            "expression": "annual_rate_pct + expected_index_change_pct",
            "dependencies": [
              "annual_rate_pct",
              "expected_index_change_pct"
            ],
            "label": "Example annual rate after index change (percent)",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "periodic_rate_after": {
            "expression": "payment_rate_after_annual/100/payments_per_year",
            "dependencies": [
              "payment_rate_after_annual",
              "payments_per_year"
            ],
            "label": "Periodic rate after adjustment",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "remaining_payments": {
            "expression": "(amortization_years - initial_period_yrs)*payments_per_year",
            "dependencies": [
              "amortization_years",
              "initial_period_yrs",
              "payments_per_year"
            ],
            "label": "Remaining payments after interest-only period",
            "unit": "",
            "format": "integer",
            "display": false
          },
          "post_adjustment_amort_payment": {
            "expression": "principal * periodic_rate_after / (1 - (1+periodic_rate_after)^(-remaining_payments))",
            "dependencies": [
              "principal",
              "periodic_rate_after",
              "remaining_payments"
            ],
            "label": "Example periodic payment after adjustment (amortizing)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment_change_pct": {
            "expression": "(post_adjustment_amort_payment - interest_only_payment)/interest_only_payment*100",
            "dependencies": [
              "post_adjustment_amort_payment",
              "interest_only_payment"
            ],
            "label": "Example change relative to interest-only payment",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "interest_only_payment",
            "label": "Interest-only payment (initial period)",
            "variable": "interest_only_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "post_adjustment_amort_payment",
            "label": "Example amortizing payment after adjustment",
            "variable": "post_adjustment_amort_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "interest_only_change_pct",
            "label": "Example payment change vs interest-only",
            "variable": "payment_change_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan principal (amount borrowed)",
        "type": "number",
        "default": 20000,
        "min": 0,
        "step": 100
      },
      {
        "id": "use_index",
        "label": "Rate input mode",
        "type": "select",
        "default": "no",
        "options": [
          {
            "label": "No — enter full annual rate",
            "value": "no"
          },
          {
            "label": "Yes — compute rate as index + margin",
            "value": "yes"
          }
        ]
      },
      {
        "id": "initial_rate_pct",
        "label": "Initial annual rate (percent) — enter if not using index+margin",
        "type": "number",
        "default": 5.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "index_rate_pct",
        "label": "Current index rate (percent) — e.g., LIBOR, SOFR",
        "type": "number",
        "default": 2.5,
        "min": -10,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "margin_pct",
        "label": "Lender margin (percent)",
        "type": "number",
        "default": 2.5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "initial_period_yrs",
        "label": "Initial fixed or interest-only period (years)",
        "type": "integer",
        "default": 5,
        "min": 0,
        "max": 30,
        "step": 1
      },
      {
        "id": "adjust_interval_months",
        "label": "Rate adjustment interval (months)",
        "type": "integer",
        "default": 12,
        "min": 1,
        "max": 120,
        "step": 1
      },
      {
        "id": "amortization_years",
        "label": "Total amortization term (years)",
        "type": "integer",
        "default": 10,
        "min": 1,
        "max": 40,
        "step": 1
      },
      {
        "id": "payment_type",
        "label": "Payment mode",
        "type": "select",
        "default": "amortizing",
        "options": [
          {
            "label": "Amortizing",
            "value": "amortizing"
          },
          {
            "label": "Interest-only for initial period",
            "value": "interest_only"
          }
        ]
      },
      {
        "id": "expected_index_change_pct",
        "label": "Example index change at next reset (percentage points)",
        "type": "number",
        "default": 0.5,
        "min": -10,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "caps_initial_pct",
        "label": "Initial adjustment cap (percent)",
        "type": "number",
        "default": 2.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "caps_period_pct",
        "label": "Periodic adjustment cap (percent)",
        "type": "number",
        "default": 2.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "caps_lifetime_pct",
        "label": "Lifetime cap above initial rate (percent)",
        "type": "number",
        "default": 6.0,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "payments_per_year",
        "label": "Payments per year",
        "type": "integer",
        "default": 12,
        "min": 1,
        "max": 12,
        "step": 1
      }
    ],
    "sections": [
      {
        "id": "index_inputs",
        "label": "Index / Margin inputs",
        "show_when": {
          "field": "use_index",
          "is": "yes"
        },
        "fields": [
          {
            "id": "index_rate_pct",
            "label": "Current index rate (percent)",
            "type": "number",
            "default": 2.5,
            "min": -10,
            "max": 100,
            "step": 0.01
          },
          {
            "id": "margin_pct",
            "label": "Lender margin (percent)",
            "type": "number",
            "default": 2.5,
            "min": 0,
            "max": 100,
            "step": 0.01
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator estimates payments for adjustable-rate student loans. It supports two principal modes: amortizing loans and interest-only initial periods. You can enter a full annual rate or compute the rate as index + margin.",
      "Use the form to simulate an example rate adjustment at the next reset. Results include the initial periodic payment, outstanding balance at the first reset, and an example post-adjustment payment. These are illustrative estimates, not a repayment schedule."
    ],
    "methodology": [
      "The tool computes periodic rates from annual percentage rates and payment frequency, then applies standard amortization formulas to derive periodic payments and remaining balances.",
      "When an initial fixed or interest-only period ends, this calculator models an example single adjustment using an expected change to the annual rate (percentage points). It applies standard formulas to compute the outstanding principal at reset and then the amortizing payment required over the remaining term.",
      "Caps and lifetime limits are surfaced as inputs and shown in the glossary; users should verify contract terms and how caps are actually applied by their lender. This calculator does not enforce contractual cap calculations beyond providing fields to capture them for user awareness."
    ],
    "how_is_calculated": [
      "Periodic rate = annual rate (%) / 100 / payments per year.",
      "Standard amortizing payment: payment = P * r / (1 - (1 + r)^-N) where P is principal, r is periodic rate, N is total payments.",
      "Outstanding balance after k payments: balance = P*(1+r)^k - payment * (( (1+r)^k - 1) / r).",
      "Post-adjustment payment example uses outstanding balance and a hypothetical new periodic rate to compute the amortizing payment for remaining payments."
    ],
    "faqs": [
      {
        "question": "Is this an exact repayment schedule?",
        "answer": "No. This tool produces illustrative example payments and balances using standard formulas. Actual schedules depend on exact contract terms, rounding rules, amortization conventions, and how your servicer applies caps and index resets."
      },
      {
        "question": "Does the calculator enforce contractual caps and margin rules?",
        "answer": "The calculator exposes cap fields for awareness but does not automatically apply complex legal cap-roll rules beyond the simple illustrative example. Always consult your loan contract or servicer to confirm cap behavior."
      },
      {
        "question": "What inputs should I use for the index?",
        "answer": "Enter the current published index value your loan references (for example a published short-term rate) and the lender margin. If uncertain, use the rate shown on your loan statement or contact the servicer."
      },
      {
        "question": "How accurate are the results?",
        "answer": "Results use standard actuarial formulas. Accuracy depends on input correctness and assumptions about index changes, rounding, and payment timing. See the accuracy caveats and standards references below."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      },
      {
        "label": "Consumer Financial Protection Bureau (general resources)",
        "url": "https://www.consumerfinance.gov"
      }
    ],
    "glossary": [
      {
        "term": "Index",
        "definition": "A published benchmark interest rate (for example SOFR or another market index) used to determine adjustable loan rates."
      },
      {
        "term": "Margin",
        "definition": "The fixed percentage added by the lender to the index to determine the fully-indexed rate."
      },
      {
        "term": "Initial fixed period",
        "definition": "An initial period (years) during which the rate is fixed or the loan may be interest-only before the first adjustment."
      },
      {
        "term": "Rate cap",
        "definition": "Contractual limits on how much the rate can change at adjustment (initial cap, periodic cap) and over the lifetime of the loan."
      },
      {
        "term": "Amortization",
        "definition": "The process of paying principal and interest over time until the loan is paid off; amortizing payments cover both principal and interest."
      }
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST Home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO Home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.consumerfinance.gov",
        "label": "Consumer Financial Protection Bureau",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}