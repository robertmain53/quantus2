{
  "version": "1.0.0",
  "metadata": {
    "title": "Student Loan Interest & Extra-Payment Calculator (Advanced)",
    "description": "Interactive calculator to estimate amortization, interest paid, time-to-payoff, and savings when applying recurring extra payments or a single lump-sum payment. Includes accuracy caveats, standards references, and clear outputs for planning."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "standard_amortization",
    "methods": {
      "standard_amortization": {
        "label": "Standard amortization (no extra payments)",
        "description": "Computes the periodic payment, total paid, and total interest for a standard fixed-rate amortizing loan.",
        "variables": {
          "r": {
            "expression": "apr / 100 / payments_per_year",
            "dependencies": [
              "apr",
              "payments_per_year"
            ],
            "label": "Periodic interest rate",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "n": {
            "expression": "years * payments_per_year",
            "dependencies": [
              "years",
              "payments_per_year"
            ],
            "label": "Total number of payments",
            "unit": "payments",
            "format": "integer",
            "display": false
          },
          "r_safe": {
            "expression": "max(r, 1e-12)",
            "dependencies": [
              "r"
            ],
            "label": "Safe periodic rate (avoid divide-by-zero)",
            "format": "decimal",
            "display": false
          },
          "interest_factor": {
            "expression": "pow(1 + r_safe, n)",
            "dependencies": [
              "r_safe",
              "n"
            ],
            "label": "Interest accumulation factor",
            "format": "decimal",
            "display": false
          },
          "periodic_payment": {
            "expression": "principal * r_safe * interest_factor / (interest_factor - 1)",
            "dependencies": [
              "principal",
              "r_safe",
              "interest_factor"
            ],
            "label": "Periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_paid": {
            "expression": "periodic_payment * n",
            "dependencies": [
              "periodic_payment",
              "n"
            ],
            "label": "Total paid over life of loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_paid - principal",
            "dependencies": [
              "total_paid",
              "principal"
            ],
            "label": "Total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "periodic_payment",
            "label": "Periodic payment",
            "variable": "periodic_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "n",
            "label": "Number of payments",
            "variable": "n",
            "unit": "payments",
            "format": "integer"
          },
          {
            "id": "total_paid",
            "label": "Total paid",
            "variable": "total_paid",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest",
            "label": "Total interest",
            "variable": "total_interest",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "extra_monthly": {
        "label": "Recurring extra monthly payments",
        "description": "Estimates new payoff time and interest with a fixed additional payment each period on top of the scheduled payment.",
        "variables": {
          "r": {
            "expression": "apr / 100 / payments_per_year",
            "dependencies": [
              "apr",
              "payments_per_year"
            ],
            "label": "Periodic interest rate",
            "format": "decimal",
            "display": false
          },
          "n": {
            "expression": "years * payments_per_year",
            "dependencies": [
              "years",
              "payments_per_year"
            ],
            "label": "Original number of payments",
            "format": "integer",
            "display": false
          },
          "r_safe": {
            "expression": "max(r, 1e-12)",
            "dependencies": [
              "r"
            ],
            "label": "Safe periodic rate",
            "format": "decimal",
            "display": false
          },
          "interest_factor": {
            "expression": "pow(1 + r_safe, n)",
            "dependencies": [
              "r_safe",
              "n"
            ],
            "label": "Interest accumulation factor",
            "format": "decimal",
            "display": false
          },
          "base_payment": {
            "expression": "principal * r_safe * interest_factor / (interest_factor - 1)",
            "dependencies": [
              "principal",
              "r_safe",
              "interest_factor"
            ],
            "label": "Scheduled periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "A": {
            "expression": "base_payment + extra_payment",
            "dependencies": [
              "base_payment",
              "extra_payment"
            ],
            "label": "Actual periodic payment including extra",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "n_new": {
            "expression": "max(-log(max(1 - r_safe * principal / max(A, 1e-12), 1e-12)) / log(1 + r_safe), 0)",
            "dependencies": [
              "r_safe",
              "principal",
              "A"
            ],
            "label": "Estimated number of payments until payoff with extra",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_paid_new": {
            "expression": "A * n_new",
            "dependencies": [
              "A",
              "n_new"
            ],
            "label": "Total paid with extra payments",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest_new": {
            "expression": "total_paid_new - principal",
            "dependencies": [
              "total_paid_new",
              "principal"
            ],
            "label": "Total interest paid with extras",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_saved": {
            "expression": "max((principal * r_safe * interest_factor / (interest_factor - 1) * n) - total_interest_new - principal + principal, 0)",
            "dependencies": [
              "principal",
              "r_safe",
              "interest_factor",
              "n",
              "total_interest_new"
            ],
            "label": "Approximate interest saved vs original schedule",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "time_saved_years": {
            "expression": "max((n - n_new) / payments_per_year, 0)",
            "dependencies": [
              "n",
              "n_new",
              "payments_per_year"
            ],
            "label": "Time saved (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "A",
            "label": "Periodic payment with extra",
            "variable": "A",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "n_new",
            "label": "Estimated payments until payoff",
            "variable": "n_new",
            "unit": "payments",
            "format": "integer"
          },
          {
            "id": "total_paid_new",
            "label": "Total paid with extra",
            "variable": "total_paid_new",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest_new",
            "label": "Total interest with extra",
            "variable": "total_interest_new",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "interest_saved",
            "label": "Interest saved (approx.)",
            "variable": "interest_saved",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "time_saved_years",
            "label": "Time saved (years)",
            "variable": "time_saved_years",
            "unit": "years",
            "format": "decimal"
          }
        ]
      },
      "lump_sum": {
        "label": "Single lump-sum payment at a specified payment number",
        "description": "Applies a one-time extra payment at a given payment number, then recomputes remaining amortization to estimate payoff and interest.",
        "variables": {
          "r": {
            "expression": "apr / 100 / payments_per_year",
            "dependencies": [
              "apr",
              "payments_per_year"
            ],
            "label": "Periodic interest rate",
            "format": "decimal",
            "display": false
          },
          "n": {
            "expression": "years * payments_per_year",
            "dependencies": [
              "years",
              "payments_per_year"
            ],
            "label": "Original number of payments",
            "format": "integer",
            "display": false
          },
          "r_safe": {
            "expression": "max(r, 1e-12)",
            "dependencies": [
              "r"
            ],
            "label": "Safe periodic rate",
            "format": "decimal",
            "display": false
          },
          "interest_factor": {
            "expression": "pow(1 + r_safe, n)",
            "dependencies": [
              "r_safe",
              "n"
            ],
            "label": "Interest accumulation factor",
            "format": "decimal",
            "display": false
          },
          "periodic_payment": {
            "expression": "principal * r_safe * interest_factor / (interest_factor - 1)",
            "dependencies": [
              "principal",
              "r_safe",
              "interest_factor"
            ],
            "label": "Scheduled periodic payment",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "k": {
            "expression": "min(max(lump_sum_at_payment, 1), n)",
            "dependencies": [
              "lump_sum_at_payment",
              "n"
            ],
            "label": "Applied at payment number (clamped)",
            "format": "integer",
            "display": true
          },
          "balance_k": {
            "expression": "principal * pow(1 + r_safe, k) - periodic_payment * (pow(1 + r_safe, k) - 1) / r_safe",
            "dependencies": [
              "principal",
              "r_safe",
              "k",
              "periodic_payment"
            ],
            "label": "Estimated outstanding balance just before lump payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "remaining_principal": {
            "expression": "max(balance_k - lump_sum, 0)",
            "dependencies": [
              "balance_k",
              "lump_sum"
            ],
            "label": "Remaining principal after lump-sum",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "n_after": {
            "expression": "max(-log(max(1 - r_safe * remaining_principal / max(periodic_payment, 1e-12), 1e-12)) / log(1 + r_safe), 0)",
            "dependencies": [
              "r_safe",
              "remaining_principal",
              "periodic_payment"
            ],
            "label": "Estimated remaining payments after lump",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_paid_lump": {
            "expression": "periodic_payment * k + lump_sum + periodic_payment * n_after",
            "dependencies": [
              "periodic_payment",
              "k",
              "lump_sum",
              "n_after"
            ],
            "label": "Total paid including lump",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest_lump": {
            "expression": "total_paid_lump - principal",
            "dependencies": [
              "total_paid_lump",
              "principal"
            ],
            "label": "Total interest paid (with lump)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_saved_lump": {
            "expression": "max((principal * r_safe * interest_factor / (interest_factor - 1) * n) - total_interest_lump - principal + principal, 0)",
            "dependencies": [
              "principal",
              "r_safe",
              "interest_factor",
              "n",
              "total_interest_lump"
            ],
            "label": "Approximate interest saved (vs original)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "k",
            "label": "Lump-sum applied at payment number",
            "variable": "k",
            "unit": "payments",
            "format": "integer"
          },
          {
            "id": "balance_k",
            "label": "Balance before lump-sum",
            "variable": "balance_k",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "remaining_principal",
            "label": "Remaining principal after lump",
            "variable": "remaining_principal",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "n_after",
            "label": "Estimated remaining payments",
            "variable": "n_after",
            "unit": "payments",
            "format": "integer"
          },
          {
            "id": "total_paid_lump",
            "label": "Total paid with lump",
            "variable": "total_paid_lump",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest_lump",
            "label": "Total interest with lump",
            "variable": "total_interest_lump",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "interest_saved_lump",
            "label": "Interest saved (approx.)",
            "variable": "interest_saved_lump",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan principal (amount borrowed)",
        "type": "number",
        "default": 30000,
        "min": 0,
        "step": 100
      },
      {
        "id": "apr",
        "label": "Annual interest rate (APR %)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "years",
        "label": "Original term (years)",
        "type": "number",
        "default": 10,
        "min": 0.25,
        "max": 50,
        "step": 0.25
      },
      {
        "id": "payments_per_year",
        "label": "Payments per year",
        "type": "integer",
        "default": 12,
        "min": 1,
        "max": 365,
        "step": 1
      },
      {
        "id": "extra_payment",
        "label": "Recurring extra payment per period",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "lump_sum",
        "label": "One-time lump-sum extra payment",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "lump_sum_at_payment",
        "label": "Apply lump-sum at payment number",
        "type": "integer",
        "default": 1,
        "min": 1,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator models fixed-rate student loan amortization and the effect of recurring extra payments or a one-time lump-sum payment. Use it to compare scheduled payments, total interest, and estimated time-to-payoff.",
      "It is intended for planning and illustration. Results are approximate; actual lender processing (timing, application to principal vs future payments, fees) can change outcomes. See methodology and citations for accuracy notes and standards used in implementation."
    ],
    "methodology": [
      "Amortization is calculated using standard fixed-rate formulas: a periodic rate is derived from the APR and payments per year, then standard present-value formulas determine the periodic payment and remaining balance.",
      "When extras are applied, the calculator estimates a new payoff schedule. For recurring extras it solves for the number of payments required given an increased periodic payment. For lump sums it computes the estimated balance at the application time, subtracts the lump amount, and then recomputes remaining payments.",
      "Implementation and numerical behavior follow best practices for numeric stability and safety: tiny positive bounds are applied to denominators to avoid divide-by-zero and domain errors. The software and documentation are developed in alignment with quality and security standards such as ISO 9001 for process quality, IEEE floating-point guidance (IEEE 754) for numeric handling, and NIST recommendations for secure software practices. User safety and clarity follow general workplace safety and accessibility expectations as informed by OSHA guidance."
    ],
    "how_is_calculated": [
      "Periodic rate r = APR / 100 / payments_per_year.",
      "Scheduled periodic payment when the rate is above zero = principal × r × (1 + r)^n / ((1 + r)^n - 1) where n = years × payments_per_year. When the rate is zero the payment is principal divided by n.",
      "With recurring extra payments, the calculator finds the payment count n_new that satisfies remaining-balance formula for the higher payment amount.",
      "With a lump-sum at payment k, it computes balance before the lump using the amortization balance formula, subtracts the lump-sum, then recomputes the remaining schedule."
    ],
    "examples": [
      "Example: $30,000 loan, 5% APR, 10 years, monthly payments. The tool shows scheduled monthly payment, total interest, and total paid. Adding $100 extra per month shows reduced payoff time and interest saved.",
      "Example: Same loan with a $5,000 lump-sum applied after 12 payments. The tool estimates the remaining principal after the lump and the new payoff timeline and interest."
    ],
    "faqs": [
      {
        "question": "Are these results exact for my loan?",
        "answer": "These are estimations using standard amortization formulas. Actual results may differ because lenders can apply extra payments differently (immediately to principal, to future payments, or hold in suspense), and there may be fees or payment timing differences. Always confirm with your servicer for exact payoff figures."
      },
      {
        "question": "Does the calculator handle variable rates or income-driven plans?",
        "answer": "No. This tool models fixed-rate amortization only. It does not model variable interest rates, graduated payments, or income-driven repayment formulas. For plans with recertification or income adjustments, consult plan-specific calculators or your loan servicer."
      },
      {
        "question": "How should I interpret interest saved?",
        "answer": "Interest saved values are approximations comparing the modeled schedule with extras to the modeled original schedule. They assume all payments are applied as scheduled and that there are no prepayment penalties or fees."
      },
      {
        "question": "What about rounding and currency?",
        "answer": "Displayed monetary values are rounded for readability. Under the hood calculations use numeric safeguards but final payment amounts on a statement may differ by cents due to lender rounding rules."
      },
      {
        "question": "What safety and accuracy practices were followed?",
        "answer": "Numeric safeguards (small positive bounds on denominators, max/min to avoid domain errors) are applied. Development and documentation reference ISO quality principles, IEEE numeric handling guidance, and NIST secure development recommendations. See citations for authoritative sources."
      }
    ],
    "citations": [
      {
        "label": "NIST - National Institute of Standards and Technology",
        "url": "https://www.nist.gov/"
      },
      {
        "label": "ISO - International Organization for Standardization",
        "url": "https://www.iso.org/"
      },
      {
        "label": "IEEE - Institute of Electrical and Electronics Engineers",
        "url": "https://www.ieee.org/"
      },
      {
        "label": "OSHA - Occupational Safety and Health Administration",
        "url": "https://www.osha.gov/"
      },
      {
        "label": "Federal Student Aid (official guidance on repayment options)",
        "url": "https://studentaid.gov/"
      }
    ],
    "glossary": [
      {
        "term": "APR",
        "definition": "Annual Percentage Rate: the nominal annual interest rate. The calculator converts APR to a periodic rate based on payments per year."
      },
      {
        "term": "Periodic payment",
        "definition": "Payment amount due each period (e.g., monthly) on a fixed-rate amortizing loan assuming scheduled amortization."
      },
      {
        "term": "Amortization",
        "definition": "The process of paying off debt through regular payments that cover interest and principal over time."
      },
      {
        "term": "Lump-sum",
        "definition": "A single additional payment applied at a specified time that reduces outstanding principal immediately in the model."
      }
    ]
  },
  "links": {
    "internal": [
      "/calculators/loan/student-loan-basics",
      "/guides/loan-payoff-strategies"
    ],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://studentaid.gov",
        "label": "Federal Student Aid",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}
