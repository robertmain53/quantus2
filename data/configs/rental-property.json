{
  "version": "1.0.0",
  "metadata": {
    "title": "Rental Property Calculator (Advanced)",
    "description": "Multi-method rental property analysis: NOI, Cap Rate, Cash-on-Cash, mortgage payments and cash flow. Designed for investment screening and scenario comparison with clear accuracy caveats and standards references."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "mortgage",
    "methods": {
      "standard": {
        "label": "Operating Results (NOI & Expenses)",
        "description": "Compute effective gross income, operating expenses and Net Operating Income (NOI). Use for quick underwriting when financing details are not required.",
        "variables": {
          "annual_gross_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Annual gross rent",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "effective_gross_income": {
            "expression": "annual_gross_rent * (1 - vacancy_rate_pct / 100)",
            "dependencies": [
              "annual_gross_rent",
              "vacancy_rate_pct"
            ],
            "label": "Effective gross income",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "operating_expenses": {
            "expression": "property_tax_annual + insurance_annual + (annual_gross_rent * management_pct / 100) + (annual_gross_rent * repairs_pct / 100) + utilities_annual + other_expenses_annual + (hoa_monthly * 12)",
            "dependencies": [
              "property_tax_annual",
              "insurance_annual",
              "annual_gross_rent",
              "management_pct",
              "repairs_pct",
              "utilities_annual",
              "other_expenses_annual",
              "hoa_monthly"
            ],
            "label": "Total operating expenses (annual)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "noi": {
            "expression": "effective_gross_income - operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_cash_invested": {
            "expression": "purchase_price * (down_payment_percent / 100) + closing_costs + rehab_costs",
            "dependencies": [
              "purchase_price",
              "down_payment_percent",
              "closing_costs",
              "rehab_costs"
            ],
            "label": "Total cash invested (down payment + closing + rehab)",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "annual_gross_rent",
            "label": "Annual Gross Rent",
            "variable": "annual_gross_rent",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "effective_gross_income",
            "label": "Effective Gross Income",
            "variable": "effective_gross_income",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "operating_expenses",
            "label": "Operating Expenses (annual)",
            "variable": "operating_expenses",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "noi",
            "label": "Net Operating Income (NOI)",
            "variable": "noi",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_cash_invested",
            "label": "Total Cash Invested",
            "variable": "total_cash_invested",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "mortgage": {
        "label": "Full Investment with Mortgage (Cash Flow & Cash-on-Cash)",
        "description": "Includes mortgage amortization, annual debt service, cash flow before tax and cash-on-cash return. Default method for financed purchases.",
        "variables": {
          "loan_principal": {
            "expression": "purchase_price * (1 - down_payment_percent / 100)",
            "dependencies": [
              "purchase_price",
              "down_payment_percent"
            ],
            "label": "Loan principal (initial)",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "monthly_interest_rate": {
            "expression": "loan_interest_rate_pct / 100 / 12",
            "dependencies": [
              "loan_interest_rate_pct"
            ],
            "label": "Monthly interest rate",
            "unit": "decimal",
            "format": "decimal",
            "display": false
          },
          "loan_payments_n": {
            "expression": "loan_term_years * 12",
            "dependencies": [
              "loan_term_years"
            ],
            "label": "Number of monthly payments",
            "unit": "months",
            "format": "integer",
            "display": false
          },
          "monthly_mortgage_payment": {
            "expression": "(monthly_interest_rate * loan_principal) / (1 - (1 + monthly_interest_rate) ^ (-loan_payments_n))",
            "dependencies": [
              "monthly_interest_rate",
              "loan_principal",
              "loan_payments_n"
            ],
            "label": "Monthly mortgage payment",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "annual_debt_service": {
            "expression": "monthly_mortgage_payment * 12",
            "dependencies": [
              "monthly_mortgage_payment"
            ],
            "label": "Annual debt service",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "annual_gross_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Annual gross rent",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "effective_gross_income": {
            "expression": "annual_gross_rent * (1 - vacancy_rate_pct / 100)",
            "dependencies": [
              "annual_gross_rent",
              "vacancy_rate_pct"
            ],
            "label": "Effective gross income",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "operating_expenses": {
            "expression": "property_tax_annual + insurance_annual + (annual_gross_rent * management_pct / 100) + (annual_gross_rent * repairs_pct / 100) + utilities_annual + other_expenses_annual + (hoa_monthly * 12)",
            "dependencies": [
              "property_tax_annual",
              "insurance_annual",
              "annual_gross_rent",
              "management_pct",
              "repairs_pct",
              "utilities_annual",
              "other_expenses_annual",
              "hoa_monthly"
            ],
            "label": "Operating expenses (annual)",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "noi": {
            "expression": "effective_gross_income - operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "cash_flow_before_tax": {
            "expression": "noi - annual_debt_service",
            "dependencies": [
              "noi",
              "annual_debt_service"
            ],
            "label": "Cash flow before tax (annual)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_cash_invested": {
            "expression": "purchase_price * (down_payment_percent / 100) + closing_costs + rehab_costs",
            "dependencies": [
              "purchase_price",
              "down_payment_percent",
              "closing_costs",
              "rehab_costs"
            ],
            "label": "Total cash invested",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "cash_on_cash_return_pct": {
            "expression": "(cash_flow_before_tax / total_cash_invested) * 100",
            "dependencies": [
              "cash_flow_before_tax",
              "total_cash_invested"
            ],
            "label": "Cash-on-Cash return",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "monthly_mortgage_payment",
            "label": "Monthly Mortgage Payment",
            "variable": "monthly_mortgage_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "annual_debt_service",
            "label": "Annual Debt Service",
            "variable": "annual_debt_service",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "noi",
            "label": "Net Operating Income (NOI)",
            "variable": "noi",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "cash_flow_before_tax",
            "label": "Cash Flow Before Tax (annual)",
            "variable": "cash_flow_before_tax",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_cash_invested",
            "label": "Total Cash Invested",
            "variable": "total_cash_invested",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "cash_on_cash_return_pct",
            "label": "Cash-on-Cash Return",
            "variable": "cash_on_cash_return_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "cap_rate_only": {
        "label": "Cap Rate Analysis",
        "description": "Quick cap rate based on purchase price and NOI.",
        "variables": {
          "annual_gross_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Annual gross rent",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "effective_gross_income": {
            "expression": "annual_gross_rent * (1 - vacancy_rate_pct / 100)",
            "dependencies": [
              "annual_gross_rent",
              "vacancy_rate_pct"
            ],
            "label": "Effective gross income",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "operating_expenses": {
            "expression": "property_tax_annual + insurance_annual + (annual_gross_rent * management_pct / 100) + (annual_gross_rent * repairs_pct / 100) + utilities_annual + other_expenses_annual + (hoa_monthly * 12)",
            "dependencies": [
              "property_tax_annual",
              "insurance_annual",
              "annual_gross_rent",
              "management_pct",
              "repairs_pct",
              "utilities_annual",
              "other_expenses_annual",
              "hoa_monthly"
            ],
            "label": "Operating expenses (annual)",
            "unit": "USD",
            "format": "currency",
            "display": false
          },
          "noi": {
            "expression": "effective_gross_income - operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "cap_rate_pct": {
            "expression": "(noi / purchase_price) * 100",
            "dependencies": [
              "noi",
              "purchase_price"
            ],
            "label": "Capitalization rate",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "noi",
            "label": "Net Operating Income (NOI)",
            "variable": "noi",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "cap_rate_pct",
            "label": "Cap Rate",
            "variable": "cap_rate_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "purchase_price",
        "label": "Purchase price",
        "type": "number",
        "default": 300000,
        "min": 0,
        "step": 1000
      },
      {
        "id": "financing_type",
        "label": "Financing type",
        "type": "select",
        "default": "mortgage",
        "options": [
          {
            "label": "Mortgage (financed)",
            "value": "mortgage"
          },
          {
            "label": "All cash",
            "value": "all_cash"
          }
        ]
      },
      {
        "id": "down_payment_percent",
        "label": "Down payment (%)",
        "type": "number",
        "default": 20,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "loan_interest_rate_pct",
        "label": "Loan interest rate (annual %)",
        "type": "number",
        "default": 4.5,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "loan_term_years",
        "label": "Loan term (years)",
        "type": "integer",
        "default": 30,
        "min": 1,
        "max": 50,
        "step": 1
      },
      {
        "id": "monthly_rent",
        "label": "Estimated monthly rent",
        "type": "number",
        "default": 2000,
        "min": 0,
        "step": 10
      },
      {
        "id": "other_monthly_income",
        "label": "Other monthly income (parking, laundry, etc.)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "vacancy_rate_pct",
        "label": "Vacancy rate (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "property_tax_annual",
        "label": "Property tax (annual)",
        "type": "number",
        "default": 3600,
        "min": 0,
        "step": 10
      },
      {
        "id": "insurance_annual",
        "label": "Insurance (annual)",
        "type": "number",
        "default": 1200,
        "min": 0,
        "step": 10
      },
      {
        "id": "hoa_monthly",
        "label": "HOA / condo fees (monthly)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "management_pct",
        "label": "Management fee (%) of gross rent",
        "type": "number",
        "default": 8,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "repairs_pct",
        "label": "Repairs & maintenance (%) of gross rent",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "utilities_annual",
        "label": "Utilities paid by owner (annual)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 10
      },
      {
        "id": "other_expenses_annual",
        "label": "Other expenses (annual)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 10
      },
      {
        "id": "closing_costs",
        "label": "Closing costs (one-time)",
        "type": "number",
        "default": 3000,
        "min": 0,
        "step": 10
      },
      {
        "id": "rehab_costs",
        "label": "Initial rehab / repairs (one-time)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 50
      },
      {
        "id": "annual_appreciation_pct",
        "label": "Annual appreciation (%) - informational only",
        "type": "number",
        "default": 2,
        "min": -100,
        "max": 100,
        "step": 0.1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator provides multiple analysis modes for rental property investments including Net Operating Income (NOI), capitalization rate (cap rate), mortgage payments, annual debt service, cash flow before tax, and cash-on-cash return. Use the mortgage mode to model financed purchases and the cap-rate mode for quick underwriting.",
      "Values are estimates for screening and scenario planning. Always reconcile to official loan documents, local tax statements, insurance quotes, and a qualified accountant or attorney for tax and compliance advice."
    ],
    "methodology": [
      "Calculations follow standard real estate underwriting conventions: annualizing monthly income, subtracting vacancy to obtain effective gross income, and subtracting operating expenses to derive NOI.",
      "Mortgage amortization uses a fixed-rate annuity formula to compute level monthly payments and annual debt service. Cash-on-cash return divides pre-tax annual cash flow by total cash invested (down payment, closing costs, rehab).",
      "For trust and reproducibility, engineering and accuracy practices align with industry good practices and controls recommended by standards bodies. This tool recommends verification of inputs and periodic calibration against actual performance data; see citations for relevant standards and guidance."
    ],
    "how_is_calculated": [
      "Annual gross rent = (monthly_rent + other_monthly_income) × 12",
      "Effective gross income = Annual gross rent × (1 − vacancy_rate_pct / 100)",
      "Operating expenses = property_tax_annual + insurance_annual + (Annual gross rent × management_pct / 100) + (Annual gross rent × repairs_pct / 100) + utilities_annual + other_expenses_annual + (hoa_monthly × 12)",
      "NOI = Effective gross income − Operating expenses",
      "Monthly mortgage payment = (r × P) / (1 − (1 + r)^(−n)) where r = monthly interest rate, P = loan principal, n = number of monthly payments",
      "Cash-on-Cash (%) = (Annual cash flow before tax / Total cash invested) × 100",
      "Cap rate (%) = (NOI / Purchase price) × 100"
    ],
    "faqs": [
      {
        "question": "How accurate are results?",
        "answer": "Results are estimates based on the inputs and the formulas shown. Accuracy depends on input quality. This tool does not replace lender underwriting, appraisals, inspections, or tax advice. Validate results against actual loan offers, tax bills, and insurance quotes."
      },
      {
        "question": "Should I include principal paydown in returns?",
        "answer": "This calculator shows pre-tax cash flow and commonly used metrics (NOI, cap rate, cash-on-cash). Principal paydown and tax effects increase total investor return but are excluded from the core cash-on-cash calculation. Use the outputs as building blocks to model total return separately."
      },
      {
        "question": "Are regulatory or safety standards applied?",
        "answer": "This tool references recognized standards and recommends that users follow applicable regulatory, safety, and data-handling guidance (see citations). It does not automate compliance checks for local building, safety, or landlord-tenant laws."
      },
      {
        "question": "What are typical calibration limits?",
        "answer": "Inputs like vacancy rate, management fees, and repair reserves should be based on local market data and historical performance. If inputs are outside reasonable bounds (for example, negative rents or vacancy far above 100 percent), results may be invalid. Use sensitivity testing to understand outcome ranges."
      }
    ],
    "citations": [
      {
        "label": "NIST - Framework and guidance for measurement and reporting best practices",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - International Organization for Standardization (quality and risk management guidance)",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE - Standards for software and system engineering best practices",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA - Occupational Safety and Health Administration (safety guidance for property work)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Net Operating Income (NOI)",
        "definition": "Annual property income after vacancy and operating expenses, before debt service and taxes."
      },
      {
        "term": "Cap Rate",
        "definition": "NOI divided by purchase price, expressed as a percentage; used to compare asset yields independent of financing."
      },
      {
        "term": "Cash-on-Cash Return",
        "definition": "Annual pre-tax cash flow divided by total cash invested (down payment plus one-time costs), expressed as a percentage."
      },
      {
        "term": "Annual Debt Service",
        "definition": "Total principal and interest payments to the lender in one year."
      }
    ]
  },
  "links": {
    "internal": [
      "/calculators/real-estate/noi",
      "/guides/rental-investing/underwriting"
    ],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST main site",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}
