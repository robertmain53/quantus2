{
  "version": "1.0.0",
  "metadata": {
    "title": "BRRRR (Buy‑Rehab‑Rent‑Refinance) Advanced Calculator",
    "description": "Multi‑method BRRRR analysis for underwriting rental acquisitions: purchase, rehab, cash flow, refinance cash‑out, cap rate and cash‑on‑cash. Includes conservative defaults, input validation ranges, and method selections suitable for deal screening and deeper underwriting."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "detailed_brrrr",
    "methods": {
      "detailed_brrrr": {
        "label": "Detailed BRRRR analysis",
        "description": "Full-scope monthly and refinance view including invested capital, NOI, pre-refinance cash flow, refinance proceeds (approximate), cap rate and cash-on-cash return.",
        "variables": {
          "purchase_total": {
            "expression": "purchase_price + purchase_closing_costs",
            "dependencies": [
              "purchase_price",
              "purchase_closing_costs"
            ],
            "label": "Total purchase cost",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "rehab_total": {
            "expression": "rehab_cost",
            "dependencies": [
              "rehab_cost"
            ],
            "label": "Rehab cost",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_invested": {
            "expression": "purchase_total + rehab_total + other_upfront_costs",
            "dependencies": [
              "purchase_total",
              "rehab_total",
              "other_upfront_costs"
            ],
            "label": "Total cash invested",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "effective_gross_income": {
            "expression": "expected_rent * (1 - vacancy_rate/100)",
            "dependencies": [
              "expected_rent",
              "vacancy_rate"
            ],
            "label": "Effective gross monthly income",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "operating_expenses": {
            "expression": "(property_taxes + insurance)/12 + expected_rent * management_pct/100 + expected_rent * maintenance_pct/100 + other_monthly",
            "dependencies": [
              "property_taxes",
              "insurance",
              "expected_rent",
              "management_pct",
              "maintenance_pct",
              "other_monthly"
            ],
            "label": "Estimated monthly operating expenses",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "net_operating_income": {
            "expression": "effective_gross_income - operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "operating_expenses"
            ],
            "label": "Monthly Net Operating Income (NOI)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "monthly_cash_flow_before_refinance": {
            "expression": "net_operating_income - current_mortgage_payment",
            "dependencies": [
              "net_operating_income",
              "current_mortgage_payment"
            ],
            "label": "Monthly cash flow (before refinance)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cap_rate": {
            "expression": "net_operating_income * 12 / purchase_price * 100",
            "dependencies": [
              "net_operating_income",
              "purchase_price"
            ],
            "label": "Cap rate",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "refinance_loan_amt": {
            "expression": "arv * refinance_ltv/100",
            "dependencies": [
              "arv",
              "refinance_ltv"
            ],
            "label": "Estimated refinance loan amount (max by LTV)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "refinance_costs_total": {
            "expression": "refinance_fees + refinance_points/100 * refinance_loan_amt",
            "dependencies": [
              "refinance_fees",
              "refinance_points",
              "refinance_loan_amt"
            ],
            "label": "Estimated refinance closing costs",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "cash_out": {
            "expression": "refinance_loan_amt - current_loan_balance - refinance_costs_total",
            "dependencies": [
              "refinance_loan_amt",
              "current_loan_balance",
              "refinance_costs_total"
            ],
            "label": "Estimated cash out at refinance",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_after_refinance": {
            "expression": "cash_out - total_invested",
            "dependencies": [
              "cash_out",
              "total_invested"
            ],
            "label": "Net cash after refinance (cash-out minus invested capital)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_on_cash": {
            "expression": "cash_after_refinance / total_invested * 100",
            "dependencies": [
              "cash_after_refinance",
              "total_invested"
            ],
            "label": "Cash-on-Cash return after refinance",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "total_invested",
            "label": "Total cash invested",
            "variable": "total_invested",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "net_operating_income",
            "label": "Monthly NOI",
            "variable": "net_operating_income",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "monthly_cash_flow_before_refinance",
            "label": "Monthly cash flow (pre-refinance)",
            "variable": "monthly_cash_flow_before_refinance",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cap_rate",
            "label": "Cap rate (%)",
            "variable": "cap_rate",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "refinance_loan_amt",
            "label": "Refinance loan amount",
            "variable": "refinance_loan_amt",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cash_out",
            "label": "Estimated cash out",
            "variable": "cash_out",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cash_after_refinance",
            "label": "Net cash after refinance",
            "variable": "cash_after_refinance",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cash_on_cash",
            "label": "Cash-on-Cash (%)",
            "variable": "cash_on_cash",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "quick_estimate": {
        "label": "Quick BRRRR snapshot",
        "description": "Fast estimate useful for deal screening. Uses rehab percentage and simplified refinance assumptions to provide a rough Cash-on-Cash and estimated cash-out.",
        "variables": {
          "est_rehab": {
            "expression": "purchase_price * rehab_estimate_pct/100",
            "dependencies": [
              "purchase_price",
              "rehab_estimate_pct"
            ],
            "label": "Estimated rehab (percent method)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "est_total_invested": {
            "expression": "purchase_price + est_rehab + purchase_closing_costs",
            "dependencies": [
              "purchase_price",
              "est_rehab",
              "purchase_closing_costs"
            ],
            "label": "Estimated total invested",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "est_refinance_loan": {
            "expression": "arv * refinance_ltv/100",
            "dependencies": [
              "arv",
              "refinance_ltv"
            ],
            "label": "Estimated refinance loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "est_cash_out": {
            "expression": "est_refinance_loan - current_loan_balance - refinance_fees",
            "dependencies": [
              "est_refinance_loan",
              "current_loan_balance",
              "refinance_fees"
            ],
            "label": "Estimated cash out",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "est_cash_on_cash": {
            "expression": "est_cash_out / est_total_invested * 100",
            "dependencies": [
              "est_cash_out",
              "est_total_invested"
            ],
            "label": "Estimated Cash-on-Cash (%)",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "est_total_invested",
            "label": "Estimated total invested",
            "variable": "est_total_invested",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "est_cash_out",
            "label": "Estimated cash out",
            "variable": "est_cash_out",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "est_cash_on_cash",
            "label": "Estimated Cash-on-Cash (%)",
            "variable": "est_cash_on_cash",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "refinance_details": {
        "label": "Refinance payment & coverage detail",
        "description": "Estimates monthly payment on the refinanced balance (amortizing), debt service, and the resulting Debt Service Coverage Ratio (DSCR) using calculated NOI.",
        "variables": {
          "refinance_loan_amt": {
            "expression": "arv * refinance_ltv/100",
            "dependencies": [
              "arv",
              "refinance_ltv"
            ],
            "label": "Refinance loan amount",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "monthly_new_payment": {
            "expression": "refinance_loan_amt * (refinance_rate/100/12) / (1 - (1 + refinance_rate/100/12) ^ (-refinance_term_months))",
            "dependencies": [
              "refinance_loan_amt",
              "refinance_rate",
              "refinance_term_months"
            ],
            "label": "Estimated monthly payment on new loan (amortizing)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "effective_gross_income_rd": {
            "expression": "expected_rent * (1 - vacancy_rate/100)",
            "dependencies": [
              "expected_rent",
              "vacancy_rate"
            ],
            "label": "Effective gross monthly income (refinance view)",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "operating_expenses_rd": {
            "expression": "(property_taxes + insurance)/12 + expected_rent * management_pct/100 + expected_rent * maintenance_pct/100 + other_monthly",
            "dependencies": [
              "property_taxes",
              "insurance",
              "expected_rent",
              "management_pct",
              "maintenance_pct",
              "other_monthly"
            ],
            "label": "Monthly operating expenses (refinance view)",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "net_operating_income_rd": {
            "expression": "effective_gross_income_rd - operating_expenses_rd",
            "dependencies": [
              "effective_gross_income_rd",
              "operating_expenses_rd"
            ],
            "label": "Monthly NOI (refinance view)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "annual_debt_service_new": {
            "expression": "monthly_new_payment * 12",
            "dependencies": [
              "monthly_new_payment"
            ],
            "label": "Annual debt service on new loan",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "debt_coverage_ratio": {
            "expression": "net_operating_income_rd * 12 / annual_debt_service_new",
            "dependencies": [
              "net_operating_income_rd",
              "annual_debt_service_new"
            ],
            "label": "Debt Service Coverage Ratio (DSCR)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "cash_out": {
            "expression": "refinance_loan_amt - current_loan_balance - refinance_fees",
            "dependencies": [
              "refinance_loan_amt",
              "current_loan_balance",
              "refinance_fees"
            ],
            "label": "Estimated cash out at refinance",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "monthly_new_payment",
            "label": "Monthly payment (new loan)",
            "variable": "monthly_new_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "debt_coverage_ratio",
            "label": "DSCR",
            "variable": "debt_coverage_ratio",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "refinance_loan_amt",
            "label": "Refinance loan amount",
            "variable": "refinance_loan_amt",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cash_out",
            "label": "Estimated cash out",
            "variable": "cash_out",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "purchase_price",
        "label": "Purchase price",
        "type": "number",
        "default": 150000,
        "min": 0,
        "step": 1000
      },
      {
        "id": "purchase_closing_costs",
        "label": "Purchase closing costs",
        "type": "number",
        "default": 3000,
        "min": 0,
        "step": 100
      },
      {
        "id": "rehab_cost",
        "label": "Rehab cost (total)",
        "type": "number",
        "default": 20000,
        "min": 0,
        "step": 100
      },
      {
        "id": "other_upfront_costs",
        "label": "Other upfront costs (holding, permits, inspections)",
        "type": "number",
        "default": 2000,
        "min": 0,
        "step": 100
      },
      {
        "id": "arv",
        "label": "After Repair Value (ARV)",
        "type": "number",
        "default": 220000,
        "min": 0,
        "step": 1000
      },
      {
        "id": "expected_rent",
        "label": "Expected monthly rent",
        "type": "number",
        "default": 1600,
        "min": 0,
        "step": 50
      },
      {
        "id": "vacancy_rate",
        "label": "Vacancy rate (%)",
        "type": "number",
        "default": 8,
        "min": 0,
        "max": 50,
        "step": 0.5
      },
      {
        "id": "property_taxes",
        "label": "Annual property taxes",
        "type": "number",
        "default": 2400,
        "min": 0,
        "step": 10
      },
      {
        "id": "insurance",
        "label": "Annual insurance",
        "type": "number",
        "default": 900,
        "min": 0,
        "step": 10
      },
      {
        "id": "management_pct",
        "label": "Property management (%) of rent",
        "type": "number",
        "default": 8,
        "min": 0,
        "max": 50,
        "step": 0.5
      },
      {
        "id": "maintenance_pct",
        "label": "Maintenance (%) of rent",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 50,
        "step": 0.5
      },
      {
        "id": "other_monthly",
        "label": "Other monthly expenses (utilities, HOA, misc)",
        "type": "number",
        "default": 50,
        "min": 0,
        "step": 10
      },
      {
        "id": "current_loan_balance",
        "label": "Current loan balance (if assumed)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 100
      },
      {
        "id": "current_mortgage_payment",
        "label": "Current monthly mortgage payment",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 10
      },
      {
        "id": "refinance_ltv",
        "label": "Refinance target LTV (%)",
        "type": "number",
        "default": 75,
        "min": 0,
        "max": 95,
        "step": 1
      },
      {
        "id": "refinance_fees",
        "label": "Refinance fees (closing costs)",
        "type": "number",
        "default": 3000,
        "min": 0,
        "step": 100
      },
      {
        "id": "refinance_points",
        "label": "Refinance points (% of loan)",
        "type": "number",
        "default": 0.5,
        "min": 0,
        "max": 5,
        "step": 0.01
      },
      {
        "id": "refinance_rate",
        "label": "Refinance annual interest rate (%)",
        "type": "number",
        "default": 6.0,
        "min": 0,
        "max": 25,
        "step": 0.01
      },
      {
        "id": "refinance_term_months",
        "label": "Refinance term (months)",
        "type": "integer",
        "default": 360,
        "min": 1,
        "max": 480,
        "step": 1
      },
      {
        "id": "rehab_estimate_pct",
        "label": "Rehab estimate (% of purchase)",
        "type": "number",
        "default": 13,
        "min": 0,
        "max": 200,
        "step": 0.1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This BRRRR calculator provides multiple underwriting views: a detailed monthly NOI and refinance view, a quick screening snapshot, and a refinance payment and coverage analysis. Use the detailed mode for due diligence and the quick snapshot for initial deal triage.",
      "Results are modelled from user inputs and simplified amortization formulae where noted. Default values are conservative; replace with actual quotes from contractors, lenders, and tax authorities before final underwriting."
    ],
    "methodology": [
      "Calculations separate operating performance (NOI) from financing effects. NOI is computed monthly as effective gross income (rent adjusted for vacancy) minus recurring operating expenses (taxes, insurance, management, maintenance, and other).",
      "Refinance proceeds are estimated from ARV multiplied by a target LTV, minus existing loan balance and estimated refinance closing costs. Monthly amortizing payment on the new loan uses the standard fixed-rate annuity formula. Some refinance metrics are approximations; see accuracy caveats below.",
      "Design and data handling follow established quality and security guidelines: test vectors and numeric stability checks are informed by IEEE numerical recommendations; handling of persisted or transmitted inputs should follow NIST best practices for data protection. Results are intended for underwriting support, not as an official loan commitment. For organizational processes consider ISO quality management principles."
    ],
    "how_is_calculated": [
      "Total invested = Purchase price + Purchase closing costs + Rehab cost + Other upfront costs.",
      "Effective gross income (monthly) = Expected rent * (1 - Vacancy rate).",
      "Monthly NOI = Effective gross income - Monthly operating expenses.",
      "Cap rate (%) = (Monthly NOI * 12) / Purchase price * 100.",
      "Refinance loan amount = ARV * Refinance LTV (%).",
      "Estimated cash out = Refinance loan amount - Current loan balance - Refinance closing costs.",
      "Monthly payment (amortizing) = L * (r/12) / (1 - (1 + r/12)^(-n)), where L is loan amount, r is annual rate (decimal), n is term months."
    ],
    "examples": [
      "Example 1: Purchase $150k, rehab $20k, ARV $220k, target refinance LTV 75%; refinance loan is approximately $165k; cash-out equals $165k minus current balance and costs.",
      "Example 2: If Monthly NOI is $600 and current mortgage payment is $400, pre-refinance cash flow is $200 per month. If refinance yields net cash greater than total invested, the deal is potentially cash-amplifying."
    ],
    "faqs": [
      {
        "question": "How accurate are the refinance and cash-out numbers?",
        "answer": "Refinance and cash-out are estimates based on LTV, stated ARV, and user-entered fees. Actual lender eligibility, loan seasoning, title encumbrances, taxes, and market valuations change outcomes. Treat results as estimates and obtain lender quotes for firm numbers."
      },
      {
        "question": "Does the calculator include taxes on cash-out or closing escrow requirements?",
        "answer": "No. This tool does not calculate tax liabilities or escrow reserves. Consult a tax advisor and closing fee schedule; include those items in Other upfront costs if needed."
      },
      {
        "question": "Why do some outputs use simplified payment formulas?",
        "answer": "Monthly payment uses the fixed-rate annuity formula which assumes a fully amortizing loan at the stated rate. Interest-only products, adjustable rates, points that alter APR, and lender-specific fees are not modelled unless entered explicitly and may materially change payments."
      },
      {
        "question": "What standards inform this tool's reliability and data handling?",
        "answer": "Numeric stability and formula correctness align with IEEE guidance for numerical computations. For data protection and handling of user inputs, follow NIST recommendations. Organizational quality practices can follow ISO quality management principles. Site operators should follow applicable occupational safety guidance when performing on-site rehab work (OSHA)."
      },
      {
        "question": "Is this a substitute for lender underwriting or professional advice?",
        "answer": "No. This calculator is a decision-support tool only. It is not a loan approval or tax, legal, or investment advice. Always confirm with lenders, contractors, and licensed professionals."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "ARV",
        "definition": "After Repair Value; estimated market value of the property after completed renovations."
      },
      {
        "term": "NOI",
        "definition": "Net Operating Income; income after vacancy and operating expenses but before debt service and taxes."
      },
      {
        "term": "LTV",
        "definition": "Loan-to-Value; the loan amount divided by property value (often ARV for refinance)."
      },
      {
        "term": "Cap rate",
        "definition": "Capitalization rate; NOI (annual) divided by purchase price, expressed as a percentage."
      },
      {
        "term": "Cash-on-Cash",
        "definition": "Net cash received divided by cash invested, expressed as a percentage; used to measure immediate return."
      },
      {
        "term": "DSCR",
        "definition": "Debt Service Coverage Ratio; NOI (annual) divided by annual debt service, used by lenders to assess repayment capacity."
      }
    ],
    "summary": [
      "This calculator is a multi‑method BRRRR underwriting tool suitable for deal screening and initial due diligence. It provides both pre-refinance cash flow estimates and refinance cash-out approximations.",
      "Inputs should be validated with contractor bids, property tax records, insurance quotes, and lender term sheets. Use outputs as a conservative baseline and document any assumptions used in pro forma analyses."
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}
