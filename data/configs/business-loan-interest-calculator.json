{
  "version": "1.0.0",
  "metadata": {
    "title": "Business Loan Interest & Bi‑Weekly Payment Calculator (Advanced)",
    "description": "Calculate payments, interest, and payoff for business loans with support for monthly, bi‑weekly (annuity), and accelerated bi‑weekly schedules. Includes optional extra payments and method comparisons with accuracy caveats and standards references."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "biweekly_accelerated",
    "methods": {
      "monthly": {
        "label": "Monthly payments (12/year)",
        "description": "Standard monthly amortizing loan (12 payments per year).",
        "variables": {
          "periodic_rate": {
            "expression": "annual_rate/100/12",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Periodic interest rate (monthly)",
            "unit": "%",
            "format": "decimal",
            "display": true
          },
          "n_payments": {
            "expression": "term_years*12",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of payments (months)",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "base_payment": {
            "expression": "(periodic_rate*principal)/(1-pow(1+periodic_rate,-n_payments))",
            "dependencies": [
              "periodic_rate",
              "principal",
              "n_payments"
            ],
            "label": "Calculated periodic payment (before extra)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment": {
            "expression": "base_payment + extra_payment_per_period",
            "dependencies": [
              "base_payment",
              "extra_payment_per_period"
            ],
            "label": "Actual payment per month (including extra)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_payment": {
            "expression": "payment * n_payments",
            "dependencies": [
              "payment",
              "n_payments"
            ],
            "label": "Total paid over life of loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_payment - principal",
            "dependencies": [
              "total_payment",
              "principal"
            ],
            "label": "Total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment",
            "label": "Monthly payment",
            "variable": "payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest",
            "label": "Total interest (monthly)",
            "variable": "total_interest",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_payment",
            "label": "Total paid (monthly)",
            "variable": "total_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "n_payments",
            "label": "Number of payments (months)",
            "variable": "n_payments",
            "unit": "payments",
            "format": "decimal"
          }
        ]
      },
      "biweekly_annuity": {
        "label": "Bi‑weekly annuity (26 payments/year)",
        "description": "Bi‑weekly schedule treated as 26 equal payments per year using the annuity formula with periodic compounding at the payment frequency.",
        "variables": {
          "periodic_rate": {
            "expression": "annual_rate/100/26",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Periodic interest rate (bi‑weekly)",
            "unit": "%",
            "format": "decimal",
            "display": true
          },
          "n_payments": {
            "expression": "term_years*26",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of payments (bi‑weekly)",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "base_payment": {
            "expression": "(periodic_rate*principal)/(1-pow(1+periodic_rate,-n_payments))",
            "dependencies": [
              "periodic_rate",
              "principal",
              "n_payments"
            ],
            "label": "Calculated bi‑weekly payment (before extra)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payment": {
            "expression": "base_payment + extra_payment_per_period",
            "dependencies": [
              "base_payment",
              "extra_payment_per_period"
            ],
            "label": "Actual bi‑weekly payment (including extra)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_payment": {
            "expression": "payment * n_payments",
            "dependencies": [
              "payment",
              "n_payments"
            ],
            "label": "Total paid over life of loan",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_payment - principal",
            "dependencies": [
              "total_payment",
              "principal"
            ],
            "label": "Total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment",
            "label": "Bi‑weekly payment",
            "variable": "payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest",
            "label": "Total interest (bi‑weekly annuity)",
            "variable": "total_interest",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_payment",
            "label": "Total paid (bi‑weekly annuity)",
            "variable": "total_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "n_payments",
            "label": "Number of payments (bi‑weekly)",
            "variable": "n_payments",
            "unit": "payments",
            "format": "decimal"
          }
        ]
      },
      "biweekly_accelerated": {
        "label": "Accelerated bi‑weekly (monthly/2 approach)",
        "description": "Compute bi‑weekly payments as half a standard monthly payment and compute the actual number of bi‑weekly installments required to retire the loan. This reflects the common accelerated bi‑weekly method where monthly payment is split into two and paid every two weeks.",
        "variables": {
          "monthly_periodic_rate": {
            "expression": "annual_rate/100/12",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Periodic interest rate (monthly)",
            "unit": "%",
            "format": "decimal",
            "display": true
          },
          "monthly_n": {
            "expression": "term_years*12",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of monthly payments",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "monthly_payment": {
            "expression": "(monthly_periodic_rate*principal)/(1-pow(1+monthly_periodic_rate,-monthly_n))",
            "dependencies": [
              "monthly_periodic_rate",
              "principal",
              "monthly_n"
            ],
            "label": "Calculated monthly payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "biweekly_payment": {
            "expression": "monthly_payment/2 + extra_payment_per_period",
            "dependencies": [
              "monthly_payment",
              "extra_payment_per_period"
            ],
            "label": "Bi‑weekly payment (accelerated)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "periodic_rate": {
            "expression": "annual_rate/100/26",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Periodic interest rate (bi‑weekly)",
            "unit": "%",
            "format": "decimal",
            "display": true
          },
          "n_required": {
            "expression": "-ln(1 - periodic_rate*principal/biweekly_payment)/ln(1+periodic_rate)",
            "dependencies": [
              "periodic_rate",
              "principal",
              "biweekly_payment"
            ],
            "label": "Number of bi‑weekly payments required",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_payment": {
            "expression": "biweekly_payment * n_required",
            "dependencies": [
              "biweekly_payment",
              "n_required"
            ],
            "label": "Total paid (accelerated bi‑weekly)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_payment - principal",
            "dependencies": [
              "total_payment",
              "principal"
            ],
            "label": "Total interest paid (accelerated bi‑weekly)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "biweekly_payment",
            "label": "Bi‑weekly payment (accelerated)",
            "variable": "biweekly_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "n_required",
            "label": "Estimated number of bi‑weekly payments to retire loan",
            "variable": "n_required",
            "unit": "payments",
            "format": "decimal"
          },
          {
            "id": "total_interest",
            "label": "Total interest (accelerated bi‑weekly)",
            "variable": "total_interest",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_payment",
            "label": "Total paid (accelerated bi‑weekly)",
            "variable": "total_payment",
            "unit": "USD",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan principal amount",
        "type": "number",
        "default": 50000,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_rate",
        "label": "Annual interest rate (APR) in percent",
        "type": "number",
        "default": 6.5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "term_years",
        "label": "Loan term (years)",
        "type": "number",
        "default": 5,
        "min": 0.25,
        "max": 40,
        "step": 0.25
      },
      {
        "id": "payments_per_year",
        "label": "Payment frequency (used for quick comparisons)",
        "type": "select",
        "default": "26",
        "options": [
          {
            "label": "Monthly (12)",
            "value": "12"
          },
          {
            "label": "Bi‑weekly (26)",
            "value": "26"
          },
          {
            "label": "Weekly (52)",
            "value": "52"
          }
        ]
      },
      {
        "id": "extra_payment_per_period",
        "label": "Extra payment each period (optional)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This tool estimates periodic payments, total interest, and payoff for business loans and lets you compare monthly, bi‑weekly, and accelerated bi‑weekly approaches. Use the fields to set principal, APR, term, and optional extra contributions per period.",
      "Calculations use standard amortization formulas and a method for accelerated bi‑weekly that derives the required number of bi‑weekly payments when splitting the monthly payment in half. Results are estimates for planning and should be validated against lender disclosures."
    ],
    "methodology": [
      "Monthly and annuity bi‑weekly calculations apply the standard annuity formula for an amortizing loan: payment = r*PV / (1-(1+r)^-n) where r is the periodic rate and n the total number of periods.",
      "The accelerated bi‑weekly method here computes a bi‑weekly payment equal to half of the calculated monthly payment and then derives the number of bi‑weekly installments required using logarithmic solution of the amortization equation. This models the common practice of paying half a monthly payment every two weeks; it typically results in extra principal paid each year and earlier payoff.",
      "Inputs are treated as nominal APRs with periodic compounding at the payment frequency. If a lender uses different compounding conventions, fees, or per‑period interest calculations, results will differ; always reconcile with the loan agreement and lender amortization schedule.",
      "This tool follows validation and secure development practices aligned with NIST guidance for numerical reproducibility and ISO recommendations for software quality. Outputs include accuracy caveats; see FAQs and citations for technical references."
    ],
    "how_is_calculated": [
      "Periodic rate r = APR/100 ÷ payments per year.",
      "Number of payments n = term_years × payments per year.",
      "Standard payment (annuity) = (r × PV) / (1 - (1 + r)^-n).",
      "Accelerated bi‑weekly: biweekly_payment = monthly_payment / 2; number of bi‑weekly payments n = -ln(1 - r * PV / payment) / ln(1 + r). Total interest = total paid - principal."
    ],
    "examples": [
      "Example: $50,000 principal, 6.5% APR, 5 years. Monthly payment ≈ calculated via monthly annuity. Accelerated bi‑weekly (monthly/2) will typically show fewer total payments and lower total interest than monthly or bi‑weekly annuity.",
      "Example edge case: Very small payment relative to interest (payment less than or equal to r times principal) will produce no finite solution for amortization; the calculator will indicate the payment is insufficient to reduce principal."
    ],
    "faqs": [
      {
        "question": "Is the accelerated bi‑weekly method exact?",
        "answer": "The accelerated bi‑weekly method modeled here is a commonly used approximation that splits the monthly annuity payment in half and then computes required bi‑weekly installments. It closely matches many lender implementations but may differ if the lender applies interest or fees differently. Verify with your loan contract or lender amortization schedule."
      },
      {
        "question": "What if the payment is too small to reduce principal?",
        "answer": "If the periodic payment is less than or equal to the periodic interest (r × principal), the loan will not amortize. The tool will produce a non‑finite number of periods; increase payment or shorten term to obtain an amortizing solution."
      },
      {
        "question": "How accurate are results and how should I use them?",
        "answer": "Results are numerical estimates produced by standard closed‑form formulas. They are suitable for planning and comparison but not a substitute for lender disclosures or official amortization schedules. Validate final numbers against lender statements."
      },
      {
        "question": "What standards guide this calculator's development?",
        "answer": "Development and numerical verification follow best practices informed by NIST recommendations for numerical software testing, ISO software quality frameworks, and IEEE guidance for reproducible numerical computations. These references inform validation but do not replace regulatory obligations."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Principal",
        "definition": "The original amount of the loan outstanding before interest."
      },
      {
        "term": "APR",
        "definition": "Annual Percentage Rate; the nominal annual interest rate used for periodic interest calculations."
      },
      {
        "term": "Periodic rate",
        "definition": "The interest rate applied each payment period = APR/100 divided by payments per year."
      },
      {
        "term": "Annuity formula",
        "definition": "Closed‑form formula to compute level payments that fully amortize a loan over n periods given a periodic interest rate."
      },
      {
        "term": "Accelerated bi‑weekly",
        "definition": "A method where the monthly payment is split into two equal payments and paid every two weeks, leading to extra payments per year and faster payoff."
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}
