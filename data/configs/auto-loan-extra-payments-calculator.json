{
  "version": "1.0.0",
  "metadata": {
    "title": "Auto Loan Extra Payments & Bi‑Weekly Payment Calculator (Advanced)",
    "description": "Interactive advanced calculator to compare standard, bi‑weekly, and extra‑payment strategies for auto loans. Estimates scheduled payments, payoff time, total paid, and interest saved. Includes conservative accuracy notes and references to testing and measurement standards."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "biweekly_with_extra",
    "methods": {
      "standard_amortization": {
        "label": "Standard amortization (use selected payment frequency)",
        "description": "Computes the regular scheduled payment and totals assuming no incremental extra payments or one-time lumpsums. Uses the user-selected payments per year.",
        "variables": {
          "payments_per_year": {
            "expression": "payments_per_year",
            "dependencies": [
              "payments_per_year"
            ],
            "label": "Payments per year (from form)",
            "unit": "per year",
            "format": "integer",
            "display": true
          },
          "periodic_rate": {
            "expression": "annual_interest_rate/100/payments_per_year",
            "dependencies": [
              "annual_interest_rate",
              "payments_per_year"
            ],
            "label": "Periodic interest rate",
            "unit": "decimal",
            "format": "decimal",
            "display": true
          },
          "n": {
            "expression": "term_years*payments_per_year",
            "dependencies": [
              "term_years",
              "payments_per_year"
            ],
            "label": "Number of payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "principal_net": {
            "expression": "principal+fees",
            "dependencies": [
              "principal",
              "fees"
            ],
            "label": "Net principal including upfront fees",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "scheduled_payment": {
            "expression": "(principal_net*periodic_rate)/(1-(1+periodic_rate)^(-n))",
            "dependencies": [
              "principal_net",
              "periodic_rate",
              "n"
            ],
            "label": "Scheduled payment (per period)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payoff_payments": {
            "expression": "n",
            "dependencies": [
              "n"
            ],
            "label": "Payments to payoff (no extras)",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "total_paid": {
            "expression": "scheduled_payment*n",
            "dependencies": [
              "scheduled_payment",
              "n"
            ],
            "label": "Total amount paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest": {
            "expression": "total_paid-principal-fees",
            "dependencies": [
              "total_paid",
              "principal",
              "fees"
            ],
            "label": "Total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "scheduled_payment",
            "label": "Scheduled payment (per period)",
            "variable": "scheduled_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_paid",
            "label": "Total paid over life of loan",
            "variable": "total_paid",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest",
            "label": "Total interest",
            "variable": "total_interest",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "payoff_payments",
            "label": "Payments until payoff",
            "variable": "payoff_payments",
            "unit": "payments",
            "format": "integer"
          }
        ]
      },
      "biweekly_with_extra": {
        "label": "Bi‑weekly payments with recurring extra per period",
        "description": "Fixed 26 payments per year. Allows an additional recurring amount per bi‑weekly period and a single initial or immediate lump sum. Uses closed-form approximations to estimate payoff time and interest saved.",
        "variables": {
          "payments_per_year_bi": {
            "expression": "26",
            "dependencies": [],
            "label": "Bi‑weekly payments per year",
            "unit": "per year",
            "format": "integer",
            "display": false
          },
          "periodic_rate_bi": {
            "expression": "annual_interest_rate/100/26",
            "dependencies": [
              "annual_interest_rate"
            ],
            "label": "Bi‑weekly periodic rate",
            "unit": "decimal",
            "format": "decimal",
            "display": true
          },
          "n_bi": {
            "expression": "term_years*26",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of bi‑weekly payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "principal_net_bi": {
            "expression": "principal+fees",
            "dependencies": [
              "principal",
              "fees"
            ],
            "label": "Net principal including upfront fees",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "scheduled_standard_bi": {
            "expression": "(principal_net_bi*periodic_rate_bi)/(1-(1+periodic_rate_bi)^(-n_bi))",
            "dependencies": [
              "principal_net_bi",
              "periodic_rate_bi",
              "n_bi"
            ],
            "label": "Standard bi‑weekly scheduled payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "scheduled_with_extra": {
            "expression": "scheduled_standard_bi - extra_payment_per_period",
            "dependencies": [
              "scheduled_standard_bi",
              "extra_payment_per_period"
            ],
            "label": "Effective payment with recurring extra",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "payoff_payments_approx": {
            "expression": "log((scheduled_with_extra)/(scheduled_with_extra - principal*periodic_rate_bi))/log(1+periodic_rate_bi)",
            "dependencies": [
              "scheduled_with_extra",
              "principal",
              "periodic_rate_bi"
            ],
            "label": "Approximate number of payments to payoff (closed form)",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_paid_approx": {
            "expression": "scheduled_with_extra*payoff_payments_approx + lump_sum_amount",
            "dependencies": [
              "scheduled_with_extra",
              "payoff_payments_approx",
              "lump_sum_amount"
            ],
            "label": "Approximate total paid (includes one‑time lump sum)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest_approx": {
            "expression": "total_paid_approx - principal - fees",
            "dependencies": [
              "total_paid_approx",
              "principal",
              "fees"
            ],
            "label": "Approximate total interest paid",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_saved_vs_standard": {
            "expression": "((standard_total_interest - total_interest_approx))",
            "dependencies": [
              "standard_total_interest",
              "total_interest_approx"
            ],
            "label": "Approximate interest saved versus standard schedule",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "scheduled_with_extra",
            "label": "Effective bi‑weekly payment (with extra)",
            "variable": "scheduled_with_extra",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "payoff_payments_approx",
            "label": "Estimated payments until payoff (bi‑weekly)",
            "variable": "payoff_payments_approx",
            "unit": "payments",
            "format": "decimal"
          },
          {
            "id": "total_paid_approx",
            "label": "Estimated total paid",
            "variable": "total_paid_approx",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest_approx",
            "label": "Estimated total interest",
            "variable": "total_interest_approx",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "interest_saved_vs_standard",
            "label": "Estimated interest saved vs selected standard schedule",
            "variable": "interest_saved_vs_standard",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "lump_sum_only": {
        "label": "One‑time lump sum paydown (applied at chosen payment)",
        "description": "Estimates effect of a single lump sum applied at a chosen payment number. Uses closed‑form balance and re‑amortization approximations. For large lump sums applied mid‑term, remaining payoff calculation is approximate.",
        "variables": {
          "payments_per_year_ls": {
            "expression": "payments_per_year",
            "dependencies": [
              "payments_per_year"
            ],
            "label": "Payments per year (from form)",
            "unit": "per year",
            "format": "integer",
            "display": false
          },
          "periodic_rate_ls": {
            "expression": "annual_interest_rate/100/payments_per_year_ls",
            "dependencies": [
              "annual_interest_rate",
              "payments_per_year"
            ],
            "label": "Periodic interest rate",
            "unit": "decimal",
            "format": "decimal",
            "display": true
          },
          "n_ls": {
            "expression": "term_years*payments_per_year_ls",
            "dependencies": [
              "term_years",
              "payments_per_year"
            ],
            "label": "Total scheduled payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "principal_net_ls": {
            "expression": "principal+fees",
            "dependencies": [
              "principal",
              "fees"
            ],
            "label": "Net principal including upfront fees",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "scheduled_payment_ls": {
            "expression": "(principal_net_ls*periodic_rate_ls)/(1-(1+periodic_rate_ls)^(-n_ls))",
            "dependencies": [
              "principal_net_ls",
              "periodic_rate_ls",
              "n_ls"
            ],
            "label": "Scheduled payment (per period)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "m": {
            "expression": "max(0, min(n_ls, lump_sum_at_payment))",
            "dependencies": [
              "n_ls",
              "lump_sum_at_payment"
            ],
            "label": "Payment number when lump sum is applied (clamped)",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "remaining_balance_at_m": {
            "expression": "principal*(1+periodic_rate_ls)^m - scheduled_payment_ls*(( (1+periodic_rate_ls)^m - 1)/periodic_rate_ls)",
            "dependencies": [
              "principal",
              "periodic_rate_ls",
              "m",
              "scheduled_payment_ls"
            ],
            "label": "Estimated remaining balance immediately before lump sum",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "new_balance_post_lump": {
            "expression": "max(0, remaining_balance_at_m - lump_sum_amount)",
            "dependencies": [
              "remaining_balance_at_m",
              "lump_sum_amount"
            ],
            "label": "Remaining balance after lump sum",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "remaining_payments_after_lump_approx": {
            "expression": "log(scheduled_payment_ls/(scheduled_payment_ls - new_balance_post_lump*periodic_rate_ls))/log(1+periodic_rate_ls)",
            "dependencies": [
              "scheduled_payment_ls",
              "new_balance_post_lump",
              "periodic_rate_ls"
            ],
            "label": "Approximate remaining payments after lump sum",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_payments_estimate": {
            "expression": "m + remaining_payments_after_lump_approx",
            "dependencies": [
              "m",
              "remaining_payments_after_lump_approx"
            ],
            "label": "Estimated total payments until payoff",
            "unit": "payments",
            "format": "decimal",
            "display": true
          },
          "total_paid_estimate": {
            "expression": "scheduled_payment_ls*m + lump_sum_amount + scheduled_payment_ls*remaining_payments_after_lump_approx",
            "dependencies": [
              "scheduled_payment_ls",
              "m",
              "lump_sum_amount",
              "remaining_payments_after_lump_approx"
            ],
            "label": "Estimated total paid (includes lump sum)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_interest_estimate": {
            "expression": "total_paid_estimate - principal - fees",
            "dependencies": [
              "total_paid_estimate",
              "principal",
              "fees"
            ],
            "label": "Estimated total interest",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "new_balance_post_lump",
            "label": "Remaining balance after lump sum",
            "variable": "new_balance_post_lump",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_payments_estimate",
            "label": "Estimated total payments until payoff",
            "variable": "total_payments_estimate",
            "unit": "payments",
            "format": "decimal"
          },
          {
            "id": "total_paid_estimate",
            "label": "Estimated total paid (incl. lump sum)",
            "variable": "total_paid_estimate",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_interest_estimate",
            "label": "Estimated total interest",
            "variable": "total_interest_estimate",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan principal (amount financed)",
        "type": "number",
        "default": 25000,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_interest_rate",
        "label": "Annual interest rate (APR %)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "term_years",
        "label": "Loan term (years)",
        "type": "integer",
        "default": 5,
        "min": 1,
        "max": 15,
        "step": 1
      },
      {
        "id": "payments_per_year",
        "label": "Payment frequency",
        "type": "select",
        "default": "12",
        "options": [
          {
            "label": "Monthly (12)",
            "value": "12"
          },
          {
            "label": "Bi‑weekly (26)",
            "value": "26"
          },
          {
            "label": "Weekly (52)",
            "value": "52"
          }
        ]
      },
      {
        "id": "extra_payment_per_period",
        "label": "Recurring extra payment per period",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "lump_sum_amount",
        "label": "One‑time lump sum amount (0 if none)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 100
      },
      {
        "id": "lump_sum_at_payment",
        "label": "Apply lump sum at payment number (0 = immediately)",
        "type": "integer",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "fees",
        "label": "Upfront fees rolled into financed amount",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This advanced auto‑loan calculator compares standard amortization, bi‑weekly schedules, and extra‑payment strategies. It provides estimates for scheduled payments, payoff timing, total paid, and approximate interest savings.",
      "Use the fields to enter the financed amount, APR, term, desired payment frequency, recurring extras per payment, and any one‑time lump sum. The tool uses closed‑form amortization formulas and conservative approximations for payoff time when extras are applied."
    ],
    "methodology": [
      "The calculator implements standard loan mathematics: periodic rate = APR/periods_per_year, and the level‑payment amortization formula to compute scheduled payment for a fixed term.",
      "For recurring extras and one‑time lumps, the tool applies algebraic rearrangements of the amortization balance equations to estimate remaining payments. These closed‑form approximations are computationally efficient and suitable for comparison, but they simplify amortization edge cases (rounded payments, lender timing rules).",
      "Inputs and calculations are validated against best practices for numerical stability. Users should confirm exact payoff amounts and final statements with their lender because escrow, late fees, prepayment penalties, or different day‑count conventions can change outcomes."
    ],
    "how_is_calculated": [
      "Periodic rate = APR / 100 / payments_per_year.",
      "Scheduled payment = (principal_net * periodic_rate) / (1 - (1 + periodic_rate)^(-number_of_payments)).",
      "When recurring extras are used, the effective per‑period payment = scheduled payment - extra_per_period. The calculator estimates remaining payments solving the geometric amortization relation for number of payments.",
      "For a lump sum at payment m, the remaining balance before the lump is estimated from the closed‑form balance formula; the new payoff period is estimated by re‑solving the amortization equation with the reduced balance."
    ],
    "examples": [
      "Example 1: $25,000 financed at 5% APR for 5 years with bi‑weekly payments and $50 extra per bi‑weekly period. The calculator estimates a lower number of payments and interest saved compared to the monthly schedule.",
      "Example 2: $15,000 financed at 6% APR for 4 years; applying a $2,000 lump sum at payment 12 reduces the remaining balance and shortens payoff time; the tool gives an approximate new payoff schedule."
    ],
    "summary": [
      "This tool is intended for planning and comparison. For a binding payoff amount, request a payoff statement from your lender.",
      "Results use standard financial formulas and closed‑form approximations; small discrepancies may occur relative to actual lender amortization schedules due to rounding, payment timing, and lender policies."
    ],
    "faqs": [
      {
        "question": "Does switching to bi‑weekly automatically save interest?",
        "answer": "Bi‑weekly schedules typically increase the number of payments per year (26 vs 12) which can reduce interest by paying principal more frequently. Actual savings depend on whether your lender applies payments as received or only on posted dates. Confirm with your lender."
      },
      {
        "question": "Are results exact for every lender?",
        "answer": "No. Calculations use standard formulas and conservative closed‑form approximations. Lender practices (daily interest accrual, payment posting time, rounding, prepayment penalties) can change final totals. Use this tool for estimates and planning, not as a payoff statement."
      },
      {
        "question": "Why does the calculator ask for fees?",
        "answer": "Upfront fees added to the financed amount increase the principal and therefore affect scheduled payments and total interest. Include any fees rolled into the loan for accurate estimates."
      },
      {
        "question": "What if I want to model monthly extra payments instead of per‑period extras?",
        "answer": "This calculator accepts a direct extra amount per scheduled period. To model monthly extras on a different frequency, convert the monthly extra to the per‑period equivalent (for example, for bi‑weekly, monthly_extra*(12/26))."
      },
      {
        "question": "How accurate are the payoff time estimates when extras are used?",
        "answer": "Payoff time estimates use algebraic solutions of amortization equations. They are typically accurate within rounding differences for standard loans but can deviate if the lender uses nonstandard compounding, applies payments at different times of day, or charges additional fees."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST) - Numerical analysis and software testing principles",
        "url": "https://www.nist.gov/"
      },
      {
        "label": "International Organization for Standardization (ISO) - Standards for verification and validation of calculations",
        "url": "https://www.iso.org/"
      },
      {
        "label": "IEEE Standards Association - Best practices for software numerical stability",
        "url": "https://standards.ieee.org/"
      },
      {
        "label": "U.S. Occupational Safety and Health Administration (OSHA) - Risk communication principles",
        "url": "https://www.osha.gov/"
      }
    ],
    "glossary": [
      {
        "term": "APR",
        "definition": "Annual Percentage Rate. The yearly interest rate without dividing by payment frequency; expressed here as a percentage (for example 5 means 5%)."
      },
      {
        "term": "Periodic rate",
        "definition": "Interest rate applied each payment period: APR/100 divided by number of payments per year."
      },
      {
        "term": "Amortization",
        "definition": "The process of spreading loan payments over time so that each regular payment covers interest and reduces principal according to an amortization schedule."
      },
      {
        "term": "Bi‑weekly payment",
        "definition": "A payment frequency of 26 payments per year (every two weeks). Paying bi‑weekly often results in an extra equivalent of one monthly payment per year compared to strict monthly payments."
      },
      {
        "term": "Closed‑form approximation",
        "definition": "A mathematical expression that estimates a result directly (without iterative simulation). Useful for fast comparisons but may simplify certain real‑world lender rules."
      }
    ]
  }
}