{
  "version": "1.0.0",
  "metadata": {
    "title": "Rental Income & Return Advanced Calculator",
    "description": "Multi-method rental property calculator for Net Operating Income (NOI), Cap Rate, Cash-on-Cash Return, and after-tax cash flow. Designed for clarity, traceable calculations, and practical accuracy guidance."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "standard_income",
    "methods": {
      "standard_income": {
        "label": "NOI and Cash Flow (Standard)",
        "description": "Compute effective gross income, operating expenses, Net Operating Income (NOI), annual mortgage payments and net annual cash flow.",
        "variables": {
          "gross_annual_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Gross annual rent (including other income)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "vacancy_loss": {
            "expression": "gross_annual_rent * vacancy_rate_pct / 100",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_rate_pct"
            ],
            "label": "Estimated annual vacancy loss",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "effective_gross_income": {
            "expression": "gross_annual_rent - vacancy_loss",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_loss"
            ],
            "label": "Effective gross income",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_operating_expenses": {
            "expression": "annual_operating_expenses + annual_property_tax + annual_insurance + (hoa_monthly * 12) + (gross_annual_rent * management_pct / 100)",
            "dependencies": [
              "annual_operating_expenses",
              "annual_property_tax",
              "annual_insurance",
              "hoa_monthly",
              "gross_annual_rent",
              "management_pct"
            ],
            "label": "Total annual operating expenses",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "noi": {
            "expression": "effective_gross_income - total_operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "total_operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "monthly_interest_rate": {
            "expression": "loan_interest_rate_pct / 100 / 12",
            "dependencies": [
              "loan_interest_rate_pct"
            ],
            "label": "Monthly interest rate (decimal)",
            "format": "decimal",
            "display": false
          },
          "annual_mortgage_payment": {
            "expression": "loan_amount == 0 ? 0 : (loan_amount * (loan_interest_rate_pct/100/12) / (1 - (1 + (loan_interest_rate_pct/100/12)) ^ (-loan_term_years * 12))) * 12",
            "dependencies": [
              "loan_amount",
              "loan_interest_rate_pct",
              "loan_term_years"
            ],
            "label": "Estimated annual mortgage payment (principal + interest)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "annual_cash_flow": {
            "expression": "noi - annual_mortgage_payment",
            "dependencies": [
              "noi",
              "annual_mortgage_payment"
            ],
            "label": "Annual cash flow (before tax)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "noi",
            "label": "Net Operating Income (NOI)",
            "variable": "noi",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "annual_mortgage_payment",
            "label": "Annual mortgage payment",
            "variable": "annual_mortgage_payment",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "annual_cash_flow",
            "label": "Annual cash flow (before tax)",
            "variable": "annual_cash_flow",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "cap_rate": {
        "label": "Cap Rate (NOI / Purchase Price)",
        "description": "Calculate NOI and express capitalization rate as a percentage of purchase price.",
        "variables": {
          "gross_annual_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Gross annual rent",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "vacancy_loss": {
            "expression": "gross_annual_rent * vacancy_rate_pct / 100",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_rate_pct"
            ],
            "label": "Vacancy loss",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "effective_gross_income": {
            "expression": "gross_annual_rent - vacancy_loss",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_loss"
            ],
            "label": "Effective gross income",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "total_operating_expenses": {
            "expression": "annual_operating_expenses + annual_property_tax + annual_insurance + (hoa_monthly * 12) + (gross_annual_rent * management_pct / 100)",
            "dependencies": [
              "annual_operating_expenses",
              "annual_property_tax",
              "annual_insurance",
              "hoa_monthly",
              "gross_annual_rent",
              "management_pct"
            ],
            "label": "Total operating expenses",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "noi": {
            "expression": "effective_gross_income - total_operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "total_operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cap_rate_pct": {
            "expression": "purchase_price == 0 ? 0 : (noi / purchase_price) * 100",
            "dependencies": [
              "noi",
              "purchase_price"
            ],
            "label": "Capitalization rate",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "noi",
            "label": "Net Operating Income (NOI)",
            "variable": "noi",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cap_rate_pct",
            "label": "Cap rate (%)",
            "variable": "cap_rate_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "cash_on_cash": {
        "label": "Cash-on-Cash Return",
        "description": "Annual pre-tax cash flow divided by initial cash invested (down payment + closing costs + initial repairs).",
        "variables": {
          "gross_annual_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Gross annual rent",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "vacancy_loss": {
            "expression": "gross_annual_rent * vacancy_rate_pct / 100",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_rate_pct"
            ],
            "label": "Vacancy loss",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "effective_gross_income": {
            "expression": "gross_annual_rent - vacancy_loss",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_loss"
            ],
            "label": "Effective gross income",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "total_operating_expenses": {
            "expression": "annual_operating_expenses + annual_property_tax + annual_insurance + (hoa_monthly * 12) + (gross_annual_rent * management_pct / 100)",
            "dependencies": [
              "annual_operating_expenses",
              "annual_property_tax",
              "annual_insurance",
              "hoa_monthly",
              "gross_annual_rent",
              "management_pct"
            ],
            "label": "Total operating expenses",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "noi": {
            "expression": "effective_gross_income - total_operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "total_operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "annual_mortgage_payment": {
            "expression": "loan_amount == 0 ? 0 : (loan_amount * (loan_interest_rate_pct/100/12) / (1 - (1 + (loan_interest_rate_pct/100/12)) ^ (-loan_term_years * 12))) * 12",
            "dependencies": [
              "loan_amount",
              "loan_interest_rate_pct",
              "loan_term_years"
            ],
            "label": "Annual mortgage payment",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "annual_cash_flow": {
            "expression": "noi - annual_mortgage_payment",
            "dependencies": [
              "noi",
              "annual_mortgage_payment"
            ],
            "label": "Annual cash flow (before tax)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_cash_invested": {
            "expression": "down_payment + closing_costs + initial_repair_cost",
            "dependencies": [
              "down_payment",
              "closing_costs",
              "initial_repair_cost"
            ],
            "label": "Total cash invested at purchase",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "cash_on_cash_pct": {
            "expression": "total_cash_invested == 0 ? 0 : (annual_cash_flow / total_cash_invested) * 100",
            "dependencies": [
              "annual_cash_flow",
              "total_cash_invested"
            ],
            "label": "Cash-on-Cash Return",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "annual_cash_flow",
            "label": "Annual cash flow (before tax)",
            "variable": "annual_cash_flow",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "total_cash_invested",
            "label": "Total cash invested",
            "variable": "total_cash_invested",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "cash_on_cash_pct",
            "label": "Cash-on-Cash Return (%)",
            "variable": "cash_on_cash_pct",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "after_tax_return": {
        "label": "After-Tax Cash Flow (Illustrative)",
        "description": "Estimate after-tax cash flow using a simplified taxable income approximation. Intended for planning; consult a tax professional for precise results.",
        "variables": {
          "gross_annual_rent": {
            "expression": "(monthly_rent + other_monthly_income) * 12",
            "dependencies": [
              "monthly_rent",
              "other_monthly_income"
            ],
            "label": "Gross annual rent",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "vacancy_loss": {
            "expression": "gross_annual_rent * vacancy_rate_pct / 100",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_rate_pct"
            ],
            "label": "Vacancy loss",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "effective_gross_income": {
            "expression": "gross_annual_rent - vacancy_loss",
            "dependencies": [
              "gross_annual_rent",
              "vacancy_loss"
            ],
            "label": "Effective gross income",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "total_operating_expenses": {
            "expression": "annual_operating_expenses + annual_property_tax + annual_insurance + (hoa_monthly * 12) + (gross_annual_rent * management_pct / 100)",
            "dependencies": [
              "annual_operating_expenses",
              "annual_property_tax",
              "annual_insurance",
              "hoa_monthly",
              "gross_annual_rent",
              "management_pct"
            ],
            "label": "Total operating expenses",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "noi": {
            "expression": "effective_gross_income - total_operating_expenses",
            "dependencies": [
              "effective_gross_income",
              "total_operating_expenses"
            ],
            "label": "Net Operating Income (NOI)",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "annual_mortgage_payment": {
            "expression": "loan_amount == 0 ? 0 : (loan_amount * (loan_interest_rate_pct/100/12) / (1 - (1 + (loan_interest_rate_pct/100/12)) ^ (-loan_term_years * 12))) * 12",
            "dependencies": [
              "loan_amount",
              "loan_interest_rate_pct",
              "loan_term_years"
            ],
            "label": "Annual mortgage payment",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "estimated_taxable_income": {
            "expression": "noi - (depreciation_annual) - (annual_mortgage_payment * 0.4)",
            "dependencies": [
              "noi",
              "depreciation_annual",
              "annual_mortgage_payment"
            ],
            "label": "Estimated taxable rental income (illustrative)",
            "unit": "currency",
            "format": "currency",
            "display": false
          },
          "estimated_tax_liability": {
            "expression": "estimated_taxable_income > 0 ? estimated_taxable_income * marginal_tax_rate_pct / 100 : 0",
            "dependencies": [
              "estimated_taxable_income",
              "marginal_tax_rate_pct"
            ],
            "label": "Estimated annual tax on rental income",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "after_tax_cash_flow": {
            "expression": "noi - annual_mortgage_payment - estimated_tax_liability",
            "dependencies": [
              "noi",
              "annual_mortgage_payment",
              "estimated_tax_liability"
            ],
            "label": "Estimated after-tax annual cash flow",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "estimated_tax_liability",
            "label": "Estimated tax liability (annual)",
            "variable": "estimated_tax_liability",
            "unit": "currency",
            "format": "currency"
          },
          {
            "id": "after_tax_cash_flow",
            "label": "Estimated after-tax annual cash flow",
            "variable": "after_tax_cash_flow",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "purchase_price",
        "label": "Purchase price",
        "type": "number",
        "default": 300000,
        "min": 0,
        "step": 1000
      },
      {
        "id": "monthly_rent",
        "label": "Expected monthly rent (total)",
        "type": "number",
        "default": 2000,
        "min": 0,
        "step": 50
      },
      {
        "id": "other_monthly_income",
        "label": "Other monthly rental income (parking, laundry, etc.)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 10
      },
      {
        "id": "vacancy_rate_pct",
        "label": "Vacancy rate (%)",
        "type": "number",
        "default": 5,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "annual_operating_expenses",
        "label": "Annual operating expenses (excl. tax & insurance)",
        "type": "number",
        "default": 5000,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_property_tax",
        "label": "Annual property tax",
        "type": "number",
        "default": 3000,
        "min": 0,
        "step": 50
      },
      {
        "id": "annual_insurance",
        "label": "Annual insurance",
        "type": "number",
        "default": 1000,
        "min": 0,
        "step": 50
      },
      {
        "id": "hoa_monthly",
        "label": "HOA / condo fees (monthly)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 10
      },
      {
        "id": "management_pct",
        "label": "Property management fee (% of gross rent)",
        "type": "number",
        "default": 10,
        "min": 0,
        "max": 100,
        "step": 0.1
      },
      {
        "id": "loan_amount",
        "label": "Loan amount (principal)",
        "type": "number",
        "default": 240000,
        "min": 0,
        "step": 1000
      },
      {
        "id": "loan_interest_rate_pct",
        "label": "Loan interest rate (annual %)",
        "type": "number",
        "default": 4.5,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "loan_term_years",
        "label": "Loan term (years)",
        "type": "integer",
        "default": 30,
        "min": 1,
        "max": 40,
        "step": 1
      },
      {
        "id": "down_payment",
        "label": "Cash down payment",
        "type": "number",
        "default": 60000,
        "min": 0,
        "step": 100
      },
      {
        "id": "closing_costs",
        "label": "Estimated closing costs",
        "type": "number",
        "default": 5000,
        "min": 0,
        "step": 50
      },
      {
        "id": "initial_repair_cost",
        "label": "Initial repair / rehab cost",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 50
      },
      {
        "id": "depreciation_annual",
        "label": "Useful depreciation per year (tax schedule, annual)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 100
      },
      {
        "id": "marginal_tax_rate_pct",
        "label": "Your marginal federal + state tax rate (%)",
        "type": "number",
        "default": 24,
        "min": 0,
        "max": 100,
        "step": 0.1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This multi-method rental income calculator estimates Net Operating Income (NOI), capitalization rate, cash-on-cash return, and an illustrative after-tax cash flow. It is intended for planning and comparison of rental investments.",
      "Results are based on user-provided inputs and standard financial formulas. Use values that match your local market and consult professionals for underwriting, tax, and legal advice."
    ],
    "methodology": [
      "Calculations follow common real-estate finance conventions: gross rent less vacancy yields effective gross income; NOI equals effective gross income minus recurring operating expenses; cap rate is NOI divided by purchase price; cash-on-cash compares pre-tax cash flow to initial cash invested.",
      "Mortgage payments use the standard fixed-rate annuity formula for level payments. Tax estimates are intentionally simplified: they do not replace tax professional calculations and use the marginal tax rate provided by the user."
    ],
    "how_is_calculated": [
      "Gross annual rent = (monthly rent + other monthly income) × 12",
      "Vacancy loss = Gross annual rent × (vacancy rate % / 100)",
      "Effective gross income = Gross annual rent − Vacancy loss",
      "Total operating expenses = Operating expenses + Taxes + Insurance + HOA + (Gross annual rent × Management % / 100)",
      "NOI = Effective gross income − Total operating expenses",
      "Annual mortgage payment = loan_amount × (r/ (1 − (1 + r)^(−n))) × 12, where r = annual interest rate / 12 and n = loan term in months",
      "Cap rate (%) = (NOI / Purchase price) × 100",
      "Cash-on-Cash (%) = (Annual cash flow / Total cash invested) × 100"
    ],
    "examples": [
      "Example: $2,000 monthly rent, $0 other income, 5% vacancy, $5,000 operating expenses, $240,000 loan at 4.5% → NOI and annual cash flow are computed to assess both cap rate and cash-on-cash return.",
      "Example: When loan_amount = 0 (cash purchase), annual mortgage payment is treated as zero and cash-on-cash is annual cash flow divided by cash invested."
    ],
    "summary": [
      "Use NOI and cap rate to compare asset value and market yields.",
      "Use cash-on-cash to evaluate short-term liquidity returns on invested equity.",
      "After-tax estimates are illustrative only; they rely on simplified assumptions about interest and depreciation."
    ],
    "faqs": [
      {
        "question": "Is this calculator a substitute for professional underwriting?",
        "answer": "No. This tool provides illustrative estimates. Use it for initial screening. For financing, tax, or legal decisions, consult a licensed professional and request full amortization schedules and tax computation."
      },
      {
        "question": "How accurate are mortgage payment calculations?",
        "answer": "Mortgage payments are calculated with the standard fixed-rate annuity formula. Rounding and input precision affect cents-level accuracy; amortization schedules and escrow payments are not included."
      },
      {
        "question": "How does the tool handle taxes?",
        "answer": "Tax computations are simplified and illustrative. The tool applies a user-provided marginal tax rate to a simplified taxable income estimate. It does not account for itemized deductions, passive activity loss rules, local taxes, or tax credits."
      },
      {
        "question": "What if I enter zero or missing values?",
        "answer": "Zero loan amount is treated as an all-cash purchase and sets mortgage payments to zero. Missing fields should be completed to obtain meaningful results. Division-by-zero safeguards return zero where appropriate."
      }
    ],
    "glossary": [
      {
        "term": "Net Operating Income (NOI)",
        "definition": "Annual income from property after vacancy and operating expenses, before debt service and taxes."
      },
      {
        "term": "Cap Rate",
        "definition": "NOI divided by purchase price, expressed as a percentage; a measure of yield independent of financing."
      },
      {
        "term": "Cash-on-Cash Return",
        "definition": "Annual pre-tax cash flow divided by the total cash invested at purchase, expressed as a percentage."
      },
      {
        "term": "Effective Gross Income",
        "definition": "Gross rent plus other income minus vacancy loss."
      },
      {
        "term": "Debt Service",
        "definition": "Periodic mortgage payments (principal + interest)."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (data integrity & best practices)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (numeric and documentation standards)",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE (engineering and numeric computation best practices)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA) — guidance for safe workplace practices",
        "url": "https://www.osha.gov"
      }
    ]
  },
  "links": {
    "internal": [
      "/calculators/finance/mortgage-payment",
      "/guides/rental-property-underwriting"
    ],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST — standards & guidance",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO — standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}