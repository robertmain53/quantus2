{
  "version": "1.0.0",
  "metadata": {
    "title": "Personal Loan APR & Bi-Weekly Payment Calculator (Advanced)",
    "description": "Calculate bi-weekly loan payments, amortization totals, effective annual rate, and compare bi-weekly vs monthly schedules. Includes handling for upfront fees and extra per-payment principal."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "biweekly",
    "methods": {
      "biweekly": {
        "label": "Bi-weekly payment and summary (from APR)",
        "description": "Compute the bi-weekly payment based on nominal APR, term, and principal; show totals and effective annual rate.",
        "variables": {
          "periodic_rate": {
            "expression": "apr_percent / 100 / 26",
            "dependencies": [
              "apr_percent"
            ],
            "label": "Periodic interest rate (per bi-weekly period)",
            "unit": "",
            "format": "decimal",
            "display": true
          },
          "n_payments": {
            "expression": "term_years * 26",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of bi-weekly payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "payment_amt": {
            "expression": "(principal * periodic_rate) / (1 - (1 + periodic_rate) ^ (-n_payments)) + extra_payment",
            "dependencies": [
              "principal",
              "periodic_rate",
              "n_payments",
              "extra_payment"
            ],
            "label": "Bi-weekly payment (principal + interest) including extra payment",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_paid": {
            "expression": "payment_amt * n_payments",
            "dependencies": [
              "payment_amt",
              "n_payments"
            ],
            "label": "Total paid across all bi-weekly payments",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "interest_paid": {
            "expression": "total_paid - principal",
            "dependencies": [
              "total_paid",
              "principal"
            ],
            "label": "Total interest paid (excludes upfront fees)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_cost_including_fees": {
            "expression": "total_paid + origination_fee",
            "dependencies": [
              "total_paid",
              "origination_fee"
            ],
            "label": "Total cash cost including upfront fees",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "effective_annual_rate": {
            "expression": "(1 + periodic_rate) ^ 26 - 1",
            "dependencies": [
              "periodic_rate"
            ],
            "label": "Effective annual rate (EAR) from bi-weekly compounding",
            "unit": "%",
            "format": "percent",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment_amt",
            "label": "Bi-weekly payment",
            "variable": "payment_amt",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "n_payments",
            "label": "Number of payments",
            "variable": "n_payments",
            "format": "integer"
          },
          {
            "id": "total_paid",
            "label": "Total paid (payments only)",
            "variable": "total_paid",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "interest_paid",
            "label": "Total interest paid",
            "variable": "interest_paid",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_cost_including_fees",
            "label": "Total cash cost (including fees)",
            "variable": "total_cost_including_fees",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "effective_annual_rate",
            "label": "Effective annual rate (EAR)",
            "variable": "effective_annual_rate",
            "unit": "%",
            "format": "percent"
          }
        ]
      },
      "compare_monthly_biweekly": {
        "label": "Compare monthly vs bi-weekly schedules",
        "description": "Compute monthly schedule values for the same APR and term, and show differences versus bi-weekly totals.",
        "variables": {
          "monthly_rate": {
            "expression": "apr_percent / 100 / 12",
            "dependencies": [
              "apr_percent"
            ],
            "label": "Monthly periodic rate",
            "unit": "",
            "format": "decimal",
            "display": true
          },
          "n_monthly": {
            "expression": "term_years * 12",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of monthly payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "monthly_payment": {
            "expression": "(principal * monthly_rate) / (1 - (1 + monthly_rate) ^ (-n_monthly)) + (extra_payment * 12 / 26)",
            "dependencies": [
              "principal",
              "monthly_rate",
              "n_monthly",
              "extra_payment"
            ],
            "label": "Equivalent monthly payment (includes prorated extra payment)",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "total_paid_monthly": {
            "expression": "monthly_payment * n_monthly",
            "dependencies": [
              "monthly_payment",
              "n_monthly"
            ],
            "label": "Total paid on monthly schedule",
            "unit": "currency",
            "format": "currency",
            "display": true
          },
          "savings_by_biweekly": {
            "expression": "total_paid_monthly - (payment_amt * (term_years * 26))",
            "dependencies": [
              "total_paid_monthly",
              "payment_amt",
              "term_years"
            ],
            "label": "Total savings using bi-weekly schedule (positive = bi-weekly cheaper)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "monthly_payment",
            "label": "Monthly payment",
            "variable": "monthly_payment",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_paid_monthly",
            "label": "Total paid (monthly)",
            "variable": "total_paid_monthly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "savings_by_biweekly",
            "label": "Bi-weekly vs monthly savings",
            "variable": "savings_by_biweekly",
            "unit": "USD",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "principal",
        "label": "Loan amount (principal)",
        "type": "number",
        "default": 10000,
        "min": 0,
        "step": 50
      },
      {
        "id": "apr_percent",
        "label": "Nominal APR (annual percentage rate)",
        "type": "number",
        "default": 6,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "term_years",
        "label": "Loan term (years)",
        "type": "number",
        "default": 5,
        "min": 0.083,
        "max": 50,
        "step": 0.25
      },
      {
        "id": "origination_fee",
        "label": "Upfront origination fee (cash paid at closing)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      },
      {
        "id": "extra_payment",
        "label": "Extra amount added to each bi-weekly payment",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator computes bi-weekly payments from a given nominal APR, loan amount, and loan term, and provides totals and an effective annual rate. It also offers a side-by-side comparison with a standard monthly schedule so you can evaluate potential interest savings from bi-weekly payments.",
      "Values shown assume the APR entered is the nominal annual rate used to calculate periodic interest (not an internally computed APR that includes fees). Upfront fees are shown separately and included in total cash cost. Use the compare method to estimate the difference between monthly and bi-weekly scheduling."
    ],
    "methodology": [
      "Bi-weekly periodic rate is taken as APR / 26 and number of payments as term years × 26. Payment is calculated from the standard amortizing loan formula for level payments per period. Effective annual rate (EAR) is (1 + periodic_rate)^26 − 1 to reflect compounding at the bi-weekly frequency.",
      "If an upfront origination fee is charged, the calculator shows total cash cost including that fee but does not adjust the payment formula to treat the fee as financed. For regulatory or disclosure APR that includes fees, use lender-provided APR disclosures or consult a method that iteratively solves for APR that equates cash flows including fees."
    ],
    "how_is_calculated": [
      "Periodic rate (bi-weekly) = APR (%) / 100 / 26",
      "Number of payments = Term (years) × 26",
      "Bi-weekly payment = (Principal × periodic_rate) / (1 − (1 + periodic_rate)^(−number_of_payments)) + extra_payment",
      "Effective annual rate (EAR) = (1 + periodic_rate)^26 − 1",
      "Total interest = (payment × number_of_payments) − principal",
      "Total cash cost = Total paid via payments + upfront fees"
    ],
    "examples": [
      "Example: $10,000 principal, 6% APR, 5 years, no fees. Periodic rate = 0.06/26 ≈ 0.0023077. Number of payments = 5 × 26 = 130. Standard bi-weekly payment computed by the formula above.",
      "Comparison: The same APR on a monthly schedule uses APR/12 and 12 × term_years payments; comparing total paid across schedules shows expected interest savings from more frequent payments (all else equal)."
    ],
    "faqs": [
      {
        "question": "Does this calculator compute legally required APR for disclosures?",
        "answer": "No. This tool computes payments from a nominal APR and displays totals including separately-entered fees. Legally required APR (the finance charge expressed as an annual rate for disclosure) may be computed differently and often requires iterative calculation including timing of fees. For official APR disclosures, rely on lender documents or a certified finance professional."
      },
      {
        "question": "Why is effective annual rate (EAR) different from the APR I enter?",
        "answer": "APR is commonly quoted as a nominal annual rate; EAR accounts for the effect of periodic compounding (bi-weekly in this tool). EAR = (1 + periodic_rate)^(periods per year) − 1 and shows the true annual growth of interest."
      },
      {
        "question": "How are upfront fees handled?",
        "answer": "Upfront fees are shown as a separate cash cost and are added to total cash outlay. This calculator does not retroactively change payment amounts to reflect fees financed into the loan unless those fees are included in the principal value entered."
      },
      {
        "question": "Can I estimate APR from a known payment amount and fees?",
        "answer": "Estimating APR from a payment amount and fees requires solving for the rate that equalizes present-value cash flows and typically needs iterative numerical methods. This tool focuses on forward calculations (payments from APR). For backward APR calculation, consult a financial professional or use a dedicated APR solver that performs root-finding on cash flows."
      },
      {
        "question": "Is bi-weekly always better than monthly?",
        "answer": "Not always. Bi-weekly increases the frequency of compounding and, if you truly make extra principal payments (for example, the equivalent of one extra monthly payment per year), it can reduce interest paid. Compare total paid values to see the net effect for your inputs."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE Standards Association",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Nominal APR",
        "definition": "The annual interest rate without adjustment for compounding within the year; commonly used to quote loan rates."
      },
      {
        "term": "Effective Annual Rate (EAR)",
        "definition": "Annual interest rate that accounts for compounding during the year; computed as (1 + periodic_rate)^(periods per year) − 1."
      },
      {
        "term": "Periodic rate",
        "definition": "Interest rate applied per payment period; for bi-weekly payments this is APR/26."
      },
      {
        "term": "Origination fee",
        "definition": "An upfront fee charged by some lenders at closing; treated here as a separate cash cost unless included in the principal."
      }
    ],
    "summary": [
      "This advanced calculator supports detailed bi-weekly payment computations from a nominal APR, shows effective annual rate and total costs, and provides a comparison against monthly schedules.",
      "For regulatory APR disclosures or backwards calculation of APR that includes fees, use dedicated APR disclosure tools or consult a qualified financial professional. Figures are estimates and dependent on accurate input values."
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}