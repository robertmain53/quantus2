{
  "version": "1.0.0",
  "metadata": {
    "title": "Mortgage APR & Bi‑Weekly Payment Calculator (Advanced)",
    "description": "Interactive calculator that computes bi‑weekly and monthly payment schedules, effective annual rates, total interest, and compares interest and time savings. Includes configurable loan amount, nominal annual rate, loan term, and optional extra payments. Results use standard amortization formulas and show effective APR equivalents."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "comparison",
    "methods": {
      "biweekly": {
        "label": "Bi‑weekly schedule (26 payments/year)",
        "description": "Compute exact bi‑weekly payment, total interest, and effective annual rate using 26 periods per year.",
        "variables": {
          "r_biweekly": {
            "expression": "annual_rate/100/26",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Bi‑weekly periodic rate",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "n_biweekly": {
            "expression": "term_years*26",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of bi‑weekly payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "payment_biweekly": {
            "expression": "(r_biweekly*loan_amount)/(1-pow(1+r_biweekly,-n_biweekly))",
            "dependencies": [
              "r_biweekly",
              "loan_amount",
              "n_biweekly"
            ],
            "label": "Bi‑weekly payment",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_paid_biweekly": {
            "expression": "payment_biweekly*n_biweekly",
            "dependencies": [
              "payment_biweekly",
              "n_biweekly"
            ],
            "label": "Total paid (bi‑weekly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_interest_biweekly": {
            "expression": "total_paid_biweekly-loan_amount",
            "dependencies": [
              "total_paid_biweekly",
              "loan_amount"
            ],
            "label": "Total interest (bi‑weekly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "effective_annual_rate_biweekly": {
            "expression": "pow(1+r_biweekly,26)-1",
            "dependencies": [
              "r_biweekly"
            ],
            "label": "Effective annual rate (bi‑weekly)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "payoff_years_biweekly": {
            "expression": "n_biweekly/26",
            "dependencies": [
              "n_biweekly"
            ],
            "label": "Payoff time (years) - bi‑weekly",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment_biweekly",
            "label": "Bi‑weekly payment",
            "variable": "payment_biweekly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest_biweekly",
            "label": "Total interest (bi‑weekly)",
            "variable": "total_interest_biweekly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "effective_annual_rate_biweekly",
            "label": "Effective annual rate (bi‑weekly)",
            "variable": "effective_annual_rate_biweekly",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "payoff_years_biweekly",
            "label": "Estimated payoff (years)",
            "variable": "payoff_years_biweekly",
            "unit": "years",
            "format": "decimal"
          }
        ]
      },
      "monthly": {
        "label": "Monthly schedule (12 payments/year)",
        "description": "Compute standard monthly payment, total interest, and effective annual rate using 12 periods per year.",
        "variables": {
          "r_monthly": {
            "expression": "annual_rate/100/12",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Monthly periodic rate",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "n_monthly": {
            "expression": "term_years*12",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of monthly payments",
            "unit": "payments",
            "format": "integer",
            "display": true
          },
          "payment_monthly": {
            "expression": "(r_monthly*loan_amount)/(1-pow(1+r_monthly,-n_monthly))",
            "dependencies": [
              "r_monthly",
              "loan_amount",
              "n_monthly"
            ],
            "label": "Monthly payment",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_paid_monthly": {
            "expression": "payment_monthly*n_monthly",
            "dependencies": [
              "payment_monthly",
              "n_monthly"
            ],
            "label": "Total paid (monthly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_interest_monthly": {
            "expression": "total_paid_monthly-loan_amount",
            "dependencies": [
              "total_paid_monthly",
              "loan_amount"
            ],
            "label": "Total interest (monthly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "effective_annual_rate_monthly": {
            "expression": "pow(1+r_monthly,12)-1",
            "dependencies": [
              "r_monthly"
            ],
            "label": "Effective annual rate (monthly)",
            "unit": "%",
            "format": "percent",
            "display": true
          },
          "payoff_years_monthly": {
            "expression": "n_monthly/12",
            "dependencies": [
              "n_monthly"
            ],
            "label": "Payoff time (years) - monthly",
            "unit": "years",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "payment_monthly",
            "label": "Monthly payment",
            "variable": "payment_monthly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest_monthly",
            "label": "Total interest (monthly)",
            "variable": "total_interest_monthly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "effective_annual_rate_monthly",
            "label": "Effective annual rate (monthly)",
            "variable": "effective_annual_rate_monthly",
            "unit": "%",
            "format": "percent"
          },
          {
            "id": "payoff_years_monthly",
            "label": "Estimated payoff (years)",
            "variable": "payoff_years_monthly",
            "unit": "years",
            "format": "decimal"
          }
        ]
      },
      "comparison": {
        "label": "Bi‑weekly vs Monthly comparison",
        "description": "Compute both schedules and show interest and time differences. This method repeats the amortization formulas for direct comparison.",
        "variables": {
          "r_biweekly": {
            "expression": "annual_rate/100/26",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Bi‑weekly periodic rate",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "n_biweekly": {
            "expression": "term_years*26",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of bi‑weekly payments",
            "unit": "payments",
            "format": "integer",
            "display": false
          },
          "payment_biweekly": {
            "expression": "(r_biweekly*loan_amount)/(1-pow(1+r_biweekly,-n_biweekly))",
            "dependencies": [
              "r_biweekly",
              "loan_amount",
              "n_biweekly"
            ],
            "label": "Bi‑weekly payment",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_interest_biweekly": {
            "expression": "payment_biweekly*n_biweekly-loan_amount",
            "dependencies": [
              "payment_biweekly",
              "n_biweekly",
              "loan_amount"
            ],
            "label": "Total interest (bi‑weekly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "r_monthly": {
            "expression": "annual_rate/100/12",
            "dependencies": [
              "annual_rate"
            ],
            "label": "Monthly periodic rate",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "n_monthly": {
            "expression": "term_years*12",
            "dependencies": [
              "term_years"
            ],
            "label": "Number of monthly payments",
            "unit": "payments",
            "format": "integer",
            "display": false
          },
          "payment_monthly": {
            "expression": "(r_monthly*loan_amount)/(1-pow(1+r_monthly,-n_monthly))",
            "dependencies": [
              "r_monthly",
              "loan_amount",
              "n_monthly"
            ],
            "label": "Monthly payment",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "total_interest_monthly": {
            "expression": "payment_monthly*n_monthly-loan_amount",
            "dependencies": [
              "payment_monthly",
              "n_monthly",
              "loan_amount"
            ],
            "label": "Total interest (monthly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "interest_savings": {
            "expression": "total_interest_monthly-total_interest_biweekly",
            "dependencies": [
              "total_interest_monthly",
              "total_interest_biweekly"
            ],
            "label": "Estimated interest savings (monthly → bi‑weekly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "time_saved_years": {
            "expression": "(n_monthly/12)-(n_biweekly/26)",
            "dependencies": [
              "n_monthly",
              "n_biweekly"
            ],
            "label": "Estimated time saved (years)",
            "unit": "years",
            "format": "decimal",
            "display": true
          },
          "effective_annual_rate_biweekly": {
            "expression": "pow(1+r_biweekly,26)-1",
            "dependencies": [
              "r_biweekly"
            ],
            "label": "Effective annual rate (bi‑weekly)",
            "unit": "%",
            "format": "percent",
            "display": false
          },
          "effective_annual_rate_monthly": {
            "expression": "pow(1+r_monthly,12)-1",
            "dependencies": [
              "r_monthly"
            ],
            "label": "Effective annual rate (monthly)",
            "unit": "%",
            "format": "percent",
            "display": false
          }
        },
        "outputs": [
          {
            "id": "payment_biweekly",
            "label": "Bi‑weekly payment",
            "variable": "payment_biweekly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "payment_monthly",
            "label": "Monthly payment",
            "variable": "payment_monthly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest_biweekly",
            "label": "Total interest (bi‑weekly)",
            "variable": "total_interest_biweekly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "total_interest_monthly",
            "label": "Total interest (monthly)",
            "variable": "total_interest_monthly",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "interest_savings",
            "label": "Interest savings (monthly → bi‑weekly)",
            "variable": "interest_savings",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "time_saved_years",
            "label": "Estimated time saved",
            "variable": "time_saved_years",
            "unit": "years",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "loan_amount",
        "label": "Loan amount",
        "type": "number",
        "default": 300000,
        "min": 0,
        "step": 100
      },
      {
        "id": "annual_rate",
        "label": "Nominal annual interest rate (APR) in percent",
        "type": "number",
        "default": 4,
        "min": 0,
        "max": 100,
        "step": 0.001
      },
      {
        "id": "term_years",
        "label": "Loan term (years)",
        "type": "integer",
        "default": 30,
        "min": 1,
        "max": 50,
        "step": 1
      },
      {
        "id": "extra_payment",
        "label": "Extra payment per selected period (optional)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 1
      }
    ],
    "sections": [
      {
        "id": "extra_section",
        "label": "Extra payment options",
        "fields": [
          {
            "id": "apply_extra_to",
            "label": "Apply extra payment to",
            "type": "select",
            "default": "principal",
            "options": [
              {
                "label": "Principal (reduces balance)",
                "value": "principal"
              },
              {
                "label": "Future payments (reduce payment amount)",
                "value": "payments"
              }
            ]
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator compares a true bi‑weekly amortization schedule (26 payments per year) with a standard monthly schedule (12 payments per year). It computes periodic payments, total interest paid over the loan, effective annual rates, and estimated time and interest savings when switching to bi‑weekly payments.",
      "Results are derived from standard amortization formulas for fixed‑rate loans and show both periodic payment amounts and aggregate totals. Use the inputs to model the loan amount, nominal annual rate (APR), loan term, and any consistent extra payment applied each period."
    ],
    "methodology": [
      "We use fixed-rate amortization formulas where periodic_rate = nominal_annual_rate/periods_per_year and periodic_payment = (r*PV)/(1-(1+r)^-n) when the rate is positive. For zero interest the payment equals principal divided by the number of periods.",
      "Effective annual rate (EAR) for k periods per year is computed as EAR = (1 + periodic_rate)^k - 1. Bi‑weekly schedules use k = 26, monthly uses k = 12.",
      "Comparison is performed by computing both schedules from the same nominal annual rate and loan term, then subtracting total interest and comparing payoff durations. This reflects the mathematical difference from compounding frequency and payment timing; actual savings may vary with lender policies and exact payment application."
    ],
    "how_is_calculated": [
      "periodic_rate = annual_rate / 100 / periods_per_year",
      "number_of_payments = term_years * periods_per_year",
      "payment = (periodic_rate * loan_amount) / (1 - (1 + periodic_rate) ^ -number_of_payments) when periodic_rate is positive; if the rate is zero, payment = loan_amount / number_of_payments",
      "total_paid = payment * number_of_payments",
      "total_interest = total_paid - loan_amount",
      "effective_annual_rate = (1 + periodic_rate) ^ periods_per_year - 1"
    ],
    "examples": [
      "Example: $300,000 loan, 4.0% APR, 30 years. Monthly payment computed with periods_per_year=12; bi‑weekly payment computed with periods_per_year=26. The tool outputs both payments, total interest for each schedule, effective annual rate for each compounding frequency, and the interest/time difference."
    ],
    "faqs": [
      {
        "question": "Does the calculator compute the legal APR under consumer protection laws?",
        "answer": "This tool computes amortization-based effective rates and compares schedules; it does not perform a full statutory APR disclosure calculation that may require fees, points, prepaid interest, or lender charges. For regulated APR disclosures consult your lender's Good Faith Estimate or Truth in Lending statement."
      },
      {
        "question": "Why do bi‑weekly payments sometimes save interest?",
        "answer": "When payments are made more frequently, interest is calculated on a slightly smaller principal between payments, and more frequent contributions toward principal reduce compounded interest. The calculator models true 26‑period compounding and payment timing to illustrate this effect."
      },
      {
        "question": "Are results exact for every lender?",
        "answer": "Results are mathematically exact for fixed-rate loans under the assumptions stated, but lenders may apply payments, fees, or rounding differently. Always confirm payoff and APR details with your lender."
      },
      {
        "question": "How accurate is this calculator?",
        "answer": "Calculations use standard numerical formulas suitable for consumer planning. Follow validation best practices (see citations). Small differences may appear due to rounding conventions, payment posting rules, fees, and escrow. Use results for planning and verification, not as a legal disclosure."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Institute of Electrical and Electronics Engineers (IEEE)",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "APR (Nominal annual rate)",
        "definition": "The stated annual interest rate before compounding; used to derive periodic rates. This tool expects the nominal APR input."
      },
      {
        "term": "Periodic rate",
        "definition": "The interest rate applied each payment period; computed as nominal annual rate divided by periods per year."
      },
      {
        "term": "Effective annual rate (EAR)",
        "definition": "Annual interest rate that accounts for compounding within the year: EAR = (1 + periodic_rate) ^ periods_per_year - 1."
      },
      {
        "term": "Amortization",
        "definition": "Schedule of payments over the loan term that gradually reduces principal to zero and shows the split between interest and principal in each payment."
      },
      {
        "term": "Bi‑weekly payments",
        "definition": "A schedule with 26 equal payments per year (every two weeks). This calculator models true 26‑period compounding."
      }
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}
