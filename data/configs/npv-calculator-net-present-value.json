{
  "version": "1.0.0",
  "metadata": {
    "title": "Net Present Value (NPV) Calculator",
    "description": "Calculate Net Present Value for one-off, annuity, or manual periodic cash flows. Supports up to 11 manual periods, constant annuities, and single future cash flows with a specified annual discount rate."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "manual_series",
    "methods": {
      "manual_series": {
        "label": "Regular manual periodic series (up to 11 periods)",
        "description": "NPV calculated by discounting each entered cash flow at the annual discount rate. Useful for uneven cash flows entered per period.",
        "variables": {
          "npv_manual": {
            "expression": "-initial_investment + (cf0)/pow(1+discount_rate/100,0) + (cf1)/pow(1+discount_rate/100,1) + (cf2)/pow(1+discount_rate/100,2) + (cf3)/pow(1+discount_rate/100,3) + (cf4)/pow(1+discount_rate/100,4) + (cf5)/pow(1+discount_rate/100,5) + (cf6)/pow(1+discount_rate/100,6) + (cf7)/pow(1+discount_rate/100,7) + (cf8)/pow(1+discount_rate/100,8) + (cf9)/pow(1+discount_rate/100,9) + (cf10)/pow(1+discount_rate/100,10)",
            "dependencies": [
              "initial_investment",
              "discount_rate",
              "cf0",
              "cf1",
              "cf2",
              "cf3",
              "cf4",
              "cf5",
              "cf6",
              "cf7",
              "cf8",
              "cf9",
              "cf10"
            ],
            "label": "Net Present Value (manual series)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv_manual",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "annuity": {
        "label": "Constant periodic payment (annuity)",
        "description": "NPV for a level periodic payment (annuity) discounted at the annual rate for N periods.",
        "variables": {
          "npv_annuity": {
            "expression": "-initial_investment + annuity_payment * (1 - pow(1+discount_rate/100, -periods)) / (discount_rate/100)",
            "dependencies": [
              "initial_investment",
              "annuity_payment",
              "discount_rate",
              "periods"
            ],
            "label": "Net Present Value (annuity)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv_annuity",
            "unit": "currency",
            "format": "currency"
          }
        ]
      },
      "single_future": {
        "label": "Single future cash flow",
        "description": "Discount a single future cash flow occurring at a specified future period back to present value and include initial investment.",
        "variables": {
          "npv_future": {
            "expression": "-initial_investment + future_value / pow(1+discount_rate/100, future_time)",
            "dependencies": [
              "initial_investment",
              "future_value",
              "future_time",
              "discount_rate"
            ],
            "label": "Net Present Value (single future cash flow)",
            "unit": "currency",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv_future",
            "unit": "currency",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "method",
        "label": "Calculation method",
        "type": "select",
        "default": "manual_series",
        "options": [
          {
            "label": "Manual periodic series (up to 11 periods)",
            "value": "manual_series"
          },
          {
            "label": "Constant annuity",
            "value": "annuity"
          },
          {
            "label": "Single future cash flow",
            "value": "single_future"
          }
        ]
      },
      {
        "id": "initial_investment",
        "label": "Initial investment (enter as positive number for cash outflow)",
        "type": "number",
        "default": 1000,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "discount_rate",
        "label": "Annual discount rate (percent)",
        "type": "number",
        "default": 8,
        "min": 0,
        "max": 100,
        "step": 0.01
      },
      {
        "id": "periods",
        "label": "Number of periods (used by annuity and for guidance in manual series)",
        "type": "integer",
        "default": 5,
        "min": 1,
        "max": 11,
        "step": 1
      },
      {
        "id": "annuity_payment",
        "label": "Periodic payment (annuity) per period",
        "type": "number",
        "default": 300,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "future_value",
        "label": "Future cash flow amount",
        "type": "number",
        "default": 2000,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "future_time",
        "label": "Periods until future cash flow occurs",
        "type": "integer",
        "default": 3,
        "min": 0,
        "max": 100,
        "step": 1
      }
    ],
    "sections": [
      {
        "id": "manual_series_cashflows",
        "label": "Manual cash flows (period 0 through 10)",
        "show_when": {
          "field": "method",
          "is": "manual_series"
        },
        "fields": [
          {
            "id": "cf0",
            "label": "Cash flow period 0",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf1",
            "label": "Cash flow period 1",
            "type": "number",
            "default": 300,
            "step": 0.01
          },
          {
            "id": "cf2",
            "label": "Cash flow period 2",
            "type": "number",
            "default": 300,
            "step": 0.01
          },
          {
            "id": "cf3",
            "label": "Cash flow period 3",
            "type": "number",
            "default": 300,
            "step": 0.01
          },
          {
            "id": "cf4",
            "label": "Cash flow period 4",
            "type": "number",
            "default": 300,
            "step": 0.01
          },
          {
            "id": "cf5",
            "label": "Cash flow period 5",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf6",
            "label": "Cash flow period 6",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf7",
            "label": "Cash flow period 7",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf8",
            "label": "Cash flow period 8",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf9",
            "label": "Cash flow period 9",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cf10",
            "label": "Cash flow period 10",
            "type": "number",
            "default": 0,
            "step": 0.01
          }
        ]
      },
      {
        "id": "annuity_inputs",
        "label": "Annuity inputs",
        "show_when": {
          "field": "method",
          "is": "annuity"
        },
        "fields": [
          {
            "id": "annuity_payment",
            "label": "Periodic payment (annuity) per period",
            "type": "number",
            "default": 300,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "periods",
            "label": "Number of periods",
            "type": "integer",
            "default": 5,
            "min": 1,
            "max": 120,
            "step": 1
          }
        ]
      },
      {
        "id": "single_future_inputs",
        "label": "Single future cash flow inputs",
        "show_when": {
          "field": "method",
          "is": "single_future"
        },
        "fields": [
          {
            "id": "future_value",
            "label": "Future cash flow amount",
            "type": "number",
            "default": 2000,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "future_time",
            "label": "Periods until future cash flow occurs",
            "type": "integer",
            "default": 3,
            "min": 0,
            "max": 100,
            "step": 1
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "Net Present Value (NPV) discounts future cash flows to the present using an annual discount rate and sums them together with the initial investment. Positive NPV indicates expected value creation given the discount rate used.",
      "This tool supports three workflows: a manual periodic series (up to 11 periods), a constant annuity, and a single future cash flow. Use the manual series for uneven cash flows, annuity for level payments, and single-future for a one-time future amount."
    ],
    "methodology": [
      "Discounting follows standard time-value-of-money principles. Each cash flow is divided by (1 + r)^t where r is the annual discount rate expressed as a decimal and t is the period index.",
      "For annuities the present value factor is used: PV = P * (1 - (1+r)^-N) / r, where P is the periodic payment, r is the periodic discount rate and N the number of periods.",
      "Calculations assume periods are equally spaced and the discount rate provided is an annual rate. When compounding or period length differs from one year, users should convert rates accordingly before input."
    ],
    "how_is_calculated": [
      "Manual periodic series: NPV = -InitialInvestment + sum_{t=0..10} CF_t / (1 + r)^t. Enter CF_t for each period; unused periods may remain zero.",
      "Annuity: NPV = -InitialInvestment + Payment * (1 - (1 + r)^-N) / r where r = discount_rate / 100 and N = periods.",
      "Single future cash flow: NPV = -InitialInvestment + FutureValue / (1 + r)^T where T = future_time."
    ],
    "examples": [
      "Example 1 (manual series): Initial investment 1000, periodic cash inflows of 300 for 5 periods, discount rate 8%. NPV approximates the sum of discounted inflows minus 1000.",
      "Example 2 (annuity): Initial investment 1000, annuity payment 300, 5 periods, discount rate 8% gives NPV using the annuity present value factor.",
      "Example 3 (single future): Initial investment 1000, future cash flow 2000 at period 3, discount rate 8% discounts that single amount back to present value."
    ],
    "summary": [
      "Use this calculator to estimate whether an investment returns value above the chosen discount rate. Interpret results in the context of project risk, alternative uses of capital, and the assumptions entered.",
      "Always verify inputs (sign convention for outflows/inflows, period definitions, and correct rate conversion) before making decisions."
    ],
    "faqs": [
      {
        "question": "Should I enter the initial investment as a positive or negative number?",
        "answer": "Enter the initial investment as a positive number in the Initial investment field; the tool treats it as a cash outflow when computing NPV (it subtracts that amount)."
      },
      {
        "question": "What discount rate should I use?",
        "answer": "Choose a discount rate that reflects your required return or cost of capital. For comparative decisions use the same discount rate across projects. Convert multi-period rates to the per-period equivalent if periods are not annual."
      },
      {
        "question": "How many periods can I enter for the manual series?",
        "answer": "The manual periodic method accepts up to 11 period cash flow inputs (period 0 through 10). Unused period fields may remain at zero."
      },
      {
        "question": "Are results exact?",
        "answer": "Results are computed using floating-point arithmetic and formulae shown. Rounding, representation limits, and omitted compounding details can introduce small differences from specialized financial systems. See accuracy notes and citations."
      }
    ],
    "glossary": [
      {
        "term": "Discount rate",
        "definition": "The annual rate used to discount future cash flows to their present values, entered here as a percent (for example, 8 means 8%)."
      },
      {
        "term": "Period",
        "definition": "A single interval at which cash flows occur (commonly years). Ensure discount rate and period definitions match."
      },
      {
        "term": "Annuity",
        "definition": "A sequence of equal payments made at regular intervals."
      }
    ],
    "citations": [
      {
        "label": "IEEE 754 (floating-point arithmetic guidance)",
        "url": "https://standards.ieee.org/standard/754-2019.html"
      },
      {
        "label": "National Institute of Standards and Technology (NIST)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO)",
        "url": "https://www.iso.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA)",
        "url": "https://www.osha.gov"
      }
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://standards.ieee.org/standard/754-2019.html",
        "label": "IEEE 754 floating-point standard",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}