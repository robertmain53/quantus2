{
  "version": "1.0.0",
  "metadata": {
    "title": "Profitability Index (PI) — Advanced Project Analysis Calculator",
    "description": "Compute Profitability Index (PI) and related metrics from either explicit period cash flows or a uniform annuity stream. Includes NPV and PV breakdowns, with input validation, guidance, and accuracy caveats aligned to engineering and IT quality standards."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "explicit",
    "methods": {
      "explicit": {
        "label": "Explicit cash flows (year-by-year)",
        "description": "Discount each individual year cash flow and sum present values. Unused year fields should be set to 0.",
        "variables": {
          "pv_cashflows": {
            "expression": "cash_1/(1+discountRate)^1 + cash_2/(1+discountRate)^2 + cash_3/(1+discountRate)^3 + cash_4/(1+discountRate)^4 + cash_5/(1+discountRate)^5 + cash_6/(1+discountRate)^6 + cash_7/(1+discountRate)^7 + cash_8/(1+discountRate)^8 + cash_9/(1+discountRate)^9 + cash_10/(1+discountRate)^10 + salvage/(1+discountRate)^periods",
            "dependencies": [
              "cash_1",
              "cash_2",
              "cash_3",
              "cash_4",
              "cash_5",
              "cash_6",
              "cash_7",
              "cash_8",
              "cash_9",
              "cash_10",
              "salvage",
              "discountRate",
              "periods"
            ],
            "label": "Present value of forecasted cash flows",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "npv": {
            "expression": "pv_cashflows - initialInvestment",
            "dependencies": [
              "pv_cashflows",
              "initialInvestment"
            ],
            "label": "Net Present Value (NPV)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "pi": {
            "expression": "pv_cashflows / abs(initialInvestment)",
            "dependencies": [
              "pv_cashflows",
              "initialInvestment"
            ],
            "label": "Profitability Index (PI)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pi",
            "label": "Profitability Index (PI)",
            "variable": "pi",
            "format": "decimal"
          },
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "pv",
            "label": "Present value of cash flows (PV)",
            "variable": "pv_cashflows",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "annuity": {
        "label": "Uniform annual cash flow (annuity) method",
        "description": "Treats project inflows as a uniform annuity across the specified number of periods and discounts using the provided rate. Discount rate must be greater than zero.",
        "variables": {
          "pv_annuity_factor": {
            "expression": "(1 - (1+discountRate)^(-periods)) / discountRate",
            "dependencies": [
              "discountRate",
              "periods"
            ],
            "label": "Present value annuity factor",
            "format": "decimal",
            "display": false
          },
          "pv_cashflows": {
            "expression": "annualCashFlow * pv_annuity_factor + salvage/(1+discountRate)^periods",
            "dependencies": [
              "annualCashFlow",
              "pv_annuity_factor",
              "salvage",
              "discountRate",
              "periods"
            ],
            "label": "Present value of uniform annual cash flows",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "npv": {
            "expression": "pv_cashflows - initialInvestment",
            "dependencies": [
              "pv_cashflows",
              "initialInvestment"
            ],
            "label": "Net Present Value (NPV)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "pi": {
            "expression": "pv_cashflows / abs(initialInvestment)",
            "dependencies": [
              "pv_cashflows",
              "initialInvestment"
            ],
            "label": "Profitability Index (PI)",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pi",
            "label": "Profitability Index (PI)",
            "variable": "pi",
            "format": "decimal"
          },
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "pv",
            "label": "Present value of cash flows (PV)",
            "variable": "pv_cashflows",
            "unit": "USD",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "method",
        "label": "Calculation method",
        "type": "select",
        "default": "explicit",
        "options": [
          {
            "label": "Explicit year-by-year cash flows",
            "value": "explicit"
          },
          {
            "label": "Uniform annual cash flow (annuity)",
            "value": "annuity"
          }
        ]
      },
      {
        "id": "discountRate",
        "label": "Discount rate (decimal, e.g., 0.10 = 10%)",
        "type": "number",
        "default": 0.1,
        "min": 0.0001,
        "max": 1,
        "step": 0.0001
      },
      {
        "id": "initialInvestment",
        "label": "Initial investment / cost (positive number)",
        "type": "number",
        "default": 100000,
        "min": 0.01,
        "step": 0.01
      },
      {
        "id": "periods",
        "label": "Number of periods (years)",
        "type": "integer",
        "default": 5,
        "min": 1,
        "max": 10,
        "step": 1
      },
      {
        "id": "salvage",
        "label": "Salvage / terminal value (enter 0 if none)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      }
    ],
    "sections": [
      {
        "id": "annuity_inputs",
        "label": "Annuity inputs",
        "show_when": {
          "field": "method",
          "is": "annuity"
        },
        "fields": [
          {
            "id": "annualCashFlow",
            "label": "Uniform annual cash inflow",
            "type": "number",
            "default": 30000,
            "min": 0,
            "step": 0.01
          }
        ]
      },
      {
        "id": "explicit_cashflows",
        "label": "Year-by-year cash flows (set unused years to 0)",
        "show_when": {
          "field": "method",
          "is": "explicit"
        },
        "fields": [
          {
            "id": "cash_1",
            "label": "Year 1 cash flow",
            "type": "number",
            "default": 30000,
            "step": 0.01
          },
          {
            "id": "cash_2",
            "label": "Year 2 cash flow",
            "type": "number",
            "default": 30000,
            "step": 0.01
          },
          {
            "id": "cash_3",
            "label": "Year 3 cash flow",
            "type": "number",
            "default": 30000,
            "step": 0.01
          },
          {
            "id": "cash_4",
            "label": "Year 4 cash flow",
            "type": "number",
            "default": 30000,
            "step": 0.01
          },
          {
            "id": "cash_5",
            "label": "Year 5 cash flow",
            "type": "number",
            "default": 30000,
            "step": 0.01
          },
          {
            "id": "cash_6",
            "label": "Year 6 cash flow",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cash_7",
            "label": "Year 7 cash flow",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cash_8",
            "label": "Year 8 cash flow",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cash_9",
            "label": "Year 9 cash flow",
            "type": "number",
            "default": 0,
            "step": 0.01
          },
          {
            "id": "cash_10",
            "label": "Year 10 cash flow",
            "type": "number",
            "default": 0,
            "step": 0.01
          }
        ]
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "pi",
          "label": "Profitability Index (PI)",
          "format": "decimal"
        },
        {
          "id": "npv",
          "label": "Net Present Value (NPV)",
          "unit": "USD",
          "format": "currency"
        },
        {
          "id": "pv",
          "label": "Present value of cash flows (PV)",
          "unit": "USD",
          "format": "currency"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "The Profitability Index (PI) compares the present value of future cash inflows to the initial investment. A PI above 1.0 indicates the project’s discounted inflows exceed its cost and is generally considered acceptable under capital rationing.",
      "This tool supports two workflows: explicit year-by-year cash flows for irregular inflows, and a uniform annuity method for consistent annual receipts. Enter amounts in the same currency and provide the discount rate as a decimal (for example 0.10 for 10%)."
    ],
    "methodology": [
      "Explicit method: Discount each period's cash flow by (1 + discountRate)^period and sum present values. Add any terminal/salvage value discounted to present at the chosen rate.",
      "Annuity method: Convert a uniform annual cash flow to its present value using the present value annuity factor ((1 - (1+rate)^-n) / rate) and add discounted terminal value. Subtract the initial investment to compute NPV, and divide PV of inflows by the absolute initial investment to compute PI."
    ],
    "how_is_calculated": [
      "PI = Present value of forecasted cash inflows / |Initial investment|",
      "NPV = Present value of forecasted cash inflows - Initial investment",
      "Explicit PV (example) = Σ (Cash_t / (1 + discountRate)^t) for t = 1..n, plus Salvage/(1+discountRate)^n",
      "Annuity PV = annualCashFlow * ((1 - (1+discountRate)^(-periods)) / discountRate) + Salvage/(1+discountRate)^periods"
    ],
    "examples": [
      "Explicit example: Initial investment = 100,000; cash flows = 30,000 for years 1–5; discountRate = 0.10; salvage = 0. PV of cash flows ≈ 113,355; PI ≈ 1.1336; NPV ≈ 13,355.",
      "Annuity example: Initial investment = 100,000; uniform annualCashFlow = 30,000 for 5 years; discountRate = 0.10; salvage = 0. Use annuity factor to compute PV and then PI as above."
    ],
    "faqs": [
      {
        "question": "What does a PI value mean?",
        "answer": "PI greater than 1 indicates the present value of future inflows exceeds the initial investment; PI less than 1 indicates the opposite. Use PI alongside NPV and other metrics for decision-making."
      },
      {
        "question": "Which method should I use: explicit or annuity?",
        "answer": "Use explicit when cash flows vary year-to-year. Use annuity only when inflows are consistent each period. For mixed or irregular schedules, explicit method gives more accurate results."
      },
      {
        "question": "What inputs can cause large numerical error?",
        "answer": "Very low discount rates (approaching zero), extremely large magnitudes, and inconsistent currency units can create instability. This tool enforces a small positive minimum for discountRate to avoid division by zero."
      },
      {
        "question": "Is this financial or legal advice?",
        "answer": "No. This calculator provides quantitative outputs for analysis and should not replace professional financial, tax, or legal advice. Review model assumptions before acting."
      }
    ],
    "citations": [
      {
        "label": "NIST - Frameworks and recommended practices for testing and validation",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - Risk management and quality systems guidance",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE - Standards for software and numerical method documentation",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA - Guidance on workplace safety for data center and lab equipment (operational governance)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Profitability Index (PI)",
        "definition": "Ratio of the present value of future cash inflows to the absolute value of the initial investment. A PI greater than one implies value creation under the chosen discount rate."
      },
      {
        "term": "Net Present Value (NPV)",
        "definition": "Present value of future cash inflows minus the initial investment. Positive NPV indicates project value addition."
      },
      {
        "term": "Present Value (PV)",
        "definition": "Sum of future cash flows discounted back to today using the discount rate."
      },
      {
        "term": "Discount rate",
        "definition": "Rate used to convert future cash amounts into present value; reflects time value of money and project risk."
      },
      {
        "term": "Salvage value",
        "definition": "Terminal value received at the end of the project life, discounted to present for inclusion in PV."
      }
    ],
    "summary": [
      "This calculator returns PI, NPV, and PV using either year-by-year cash flows or a uniform annuity approach. Ensure consistent currency and that unused explicit cash flow fields are set to zero.",
      "For model testing, follow established validation and documentation practices (e.g., traceable inputs, unit tests, and tolerance checks) consistent with organizational quality standards."
    ]
  },
  "links": {
    "internal": [],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}
