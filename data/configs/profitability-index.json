{
  "version": "1.0.0",
  "metadata": {
    "title": "Profitability Index Calculator",
    "description": "Interactive calculator to compute the Profitability Index (PI) and supporting values (PV of cash inflows and NPV). Supports uniform periodic cash flows (annuity) and a custom pre-computed discounted-sum input. Includes guidance, accuracy notes and standards references."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "annuity",
    "methods": {
      "annuity": {
        "label": "Uniform periodic cash flows (annuity)",
        "description": "Use when future cash inflows are identical each period.",
        "variables": {
          "r": {
            "expression": "discount_rate / 100",
            "dependencies": [
              "discount_rate"
            ],
            "label": "Discount rate (decimal)",
            "unit": "",
            "format": "decimal",
            "display": false
          },
          "pv_annuity": {
            "expression": "periodic_cash_flow * (1 - (1 + r) ^ (-periods)) / r",
            "dependencies": [
              "periodic_cash_flow",
              "r",
              "periods"
            ],
            "label": "Present value of equal future cash inflows",
            "unit": "$",
            "format": "currency",
            "display": true
          },
          "pv_total": {
            "expression": "pv_annuity",
            "dependencies": [
              "pv_annuity"
            ],
            "label": "Present value of future cash inflows (PV)",
            "unit": "$",
            "format": "currency",
            "display": true
          },
          "npv": {
            "expression": "pv_total - initial_investment",
            "dependencies": [
              "pv_total",
              "initial_investment"
            ],
            "label": "Net Present Value (NPV)",
            "unit": "$",
            "format": "currency",
            "display": true
          },
          "profitability_index": {
            "expression": "pv_total / initial_investment",
            "dependencies": [
              "pv_total",
              "initial_investment"
            ],
            "label": "Profitability Index (PI)",
            "unit": "",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pv_inflows",
            "label": "Present value of future cash inflows (PV)",
            "variable": "pv_total",
            "unit": "$",
            "format": "currency"
          },
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv",
            "unit": "$",
            "format": "currency"
          },
          {
            "id": "profitability_index",
            "label": "Profitability Index (PI)",
            "variable": "profitability_index",
            "unit": "",
            "format": "decimal"
          }
        ]
      },
      "custom": {
        "label": "Custom discounted-sum (pre-computed PV)",
        "description": "Use when you have already discounted each individual inflow and can enter the summed present value.",
        "variables": {
          "pv_total": {
            "expression": "sum_discounted_inflows",
            "dependencies": [
              "sum_discounted_inflows"
            ],
            "label": "Present value of future cash inflows (PV)",
            "unit": "$",
            "format": "currency",
            "display": true
          },
          "npv": {
            "expression": "pv_total - initial_investment",
            "dependencies": [
              "pv_total",
              "initial_investment"
            ],
            "label": "Net Present Value (NPV)",
            "unit": "$",
            "format": "currency",
            "display": true
          },
          "profitability_index": {
            "expression": "pv_total / initial_investment",
            "dependencies": [
              "pv_total",
              "initial_investment"
            ],
            "label": "Profitability Index (PI)",
            "unit": "",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "pv_inflows",
            "label": "Present value of future cash inflows (PV)",
            "variable": "pv_total",
            "unit": "$",
            "format": "currency"
          },
          {
            "id": "npv",
            "label": "Net Present Value (NPV)",
            "variable": "npv",
            "unit": "$",
            "format": "currency"
          },
          {
            "id": "profitability_index",
            "label": "Profitability Index (PI)",
            "variable": "profitability_index",
            "unit": "",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "input_method",
        "label": "Input method",
        "type": "select",
        "default": "annuity",
        "options": [
          {
            "label": "Uniform periodic cash flows (annuity)",
            "value": "annuity"
          },
          {
            "label": "Custom discounted-sum (I will provide PV)",
            "value": "custom"
          }
        ]
      },
      {
        "id": "initial_investment",
        "label": "Initial investment / project cost",
        "type": "number",
        "default": 100000,
        "min": 0,
        "step": 1
      },
      {
        "id": "discount_rate",
        "label": "Discount rate (annual %)",
        "type": "number",
        "default": 10,
        "min": 0,
        "max": 100,
        "step": 0.01
      }
    ],
    "sections": [
      {
        "id": "annuity_inputs",
        "label": "Annuity inputs",
        "show_when": {
          "field": "input_method",
          "is": "annuity"
        },
        "fields": [
          {
            "id": "periodic_cash_flow",
            "label": "Periodic (equal) cash inflow per period",
            "type": "number",
            "default": 30000,
            "min": 0,
            "step": 1
          },
          {
            "id": "periods",
            "label": "Number of periods",
            "type": "integer",
            "default": 5,
            "min": 1,
            "step": 1
          }
        ]
      },
      {
        "id": "custom_inputs",
        "label": "Custom discounted-sum input",
        "show_when": {
          "field": "input_method",
          "is": "custom"
        },
        "fields": [
          {
            "id": "sum_discounted_inflows",
            "label": "Sum of discounted future cash inflows (PV)",
            "type": "number",
            "default": 0,
            "min": 0,
            "step": 1
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator computes the Profitability Index (PI) and supporting metrics for capital budgeting. PI is the ratio of the present value of future cash inflows to the initial investment and helps rank projects when capital is constrained.",
      "Two input modes are supported: (1) uniform periodic cash inflows (annuity) where a single recurring cash flow is assumed, and (2) a custom mode where you supply the pre-computed present value of all future inflows. Use the mode that best matches your cash flow profile."
    ],
    "methodology": [
      "For the annuity method the present value of equal periodic cash inflows is calculated using the standard present-value annuity formula PV = C * (1 - (1 + r)^-n) / r, where C is the periodic cash inflow, r is the discount rate (decimal), and n is the number of periods.",
      "For the custom method the calculator treats the entered sum as the already-discounted total present value of future inflows. This is useful when cash inflows are irregular and you've discounted each cash flow externally."
    ],
    "how_is_calculated": [
      "Profitability Index (PI) = Present value of future cash inflows (PV) / Initial investment.",
      "Net Present Value (NPV) = PV - Initial investment.",
      "Annity PV formula used when 'Uniform periodic cash flows' is selected: PV = C * (1 - (1 + r)^-n) / r, with r = discount_rate / 100."
    ],
    "examples": [
      "Example (annuity): Initial investment = 100,000; periodic inflow = 30,000; periods = 5; discount rate = 10%. PV = 30,000 * (1 - 1.1^-5) / 0.10 ≈ 113,355. PI = 113,355 / 100,000 = 1.1336. NPV ≈ 13,355.",
      "Example (custom): If you have individually discounted irregular inflows that sum to 80,000 and the initial investment is 60,000 then PI = 80,000 / 60,000 = 1.3333 and NPV = 20,000."
    ],
    "faqs": [
      {
        "question": "What does a PI greater than 1 mean?",
        "answer": "A PI greater than 1 indicates the present value of inflows exceeds the initial investment and the project is expected to create value (positive NPV)."
      },
      {
        "question": "Which input mode should I use for irregular cash flows?",
        "answer": "Use the custom discounted-sum mode: discount each individual inflow to present value at your chosen discount rate, sum them, and enter the total as the PV input."
      },
      {
        "question": "Does the calculator handle varying discount rates over time?",
        "answer": "No. This tool assumes a constant discount rate. For time-varying discount rates discount each inflow separately and use the custom discounted-sum input."
      },
      {
        "question": "Can initial investment be entered as a negative number?",
        "answer": "Enter the initial investment as a positive amount representing the capital outlay. The calculator treats it as the project cost when computing PI and NPV."
      },
      {
        "question": "Is this a substitute for professional financial advice?",
        "answer": "No. This calculator is a decision-support tool. For regulatory reporting, audit, tax, or large capital decisions consult a qualified financial professional."
      }
    ],
    "citations": [
      {
        "label": "NIST - National Institute of Standards and Technology",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO - International Organization for Standardization",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE - Institute of Electrical and Electronics Engineers",
        "url": "https://www.ieee.org"
      },
      {
        "label": "OSHA - Occupational Safety and Health Administration",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Profitability Index (PI)",
        "definition": "The ratio of the present value of future cash inflows to the initial investment. PI = PV / Initial investment."
      },
      {
        "term": "Net Present Value (NPV)",
        "definition": "The difference between the present value of future cash inflows and the initial investment. NPV = PV - Initial investment."
      },
      {
        "term": "Discount rate",
        "definition": "The rate used to bring future cash flows to present value. Enter as an annual percentage."
      },
      {
        "term": "Present Value (PV)",
        "definition": "The current equivalent value of a future cash flow or series of cash flows after discounting."
      }
    ]
  },
  "links": {
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.ieee.org",
        "label": "IEEE",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.osha.gov",
        "label": "OSHA",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}