{
  "version": "1.0.0",
  "metadata": {
    "title": "Butterfly Spread Calculator (multi-mode)",
    "description": "Interactive calculator for long call butterfly, long put butterfly, and iron butterfly option strategies. Computes initial cost/credit, maximum profit, maximum loss, break-even points, and standard payoff metrics. Includes inputs for strikes, premiums, contract quantity, contract size, and commissions."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "long_call_butterfly",
    "methods": {
      "long_call_butterfly": {
        "label": "Long Call Butterfly",
        "description": "Classic long butterfly using calls: buy 1 lower-strike call, sell 2 middle-strike calls, buy 1 upper-strike call. Best when you expect low volatility and underlying at the middle strike at expiry.",
        "variables": {
          "legs": {
            "expression": "4",
            "dependencies": [],
            "label": "Number of option legs",
            "display": false,
            "format": "integer"
          },
          "initial_cost": {
            "expression": "(premium_long_lower + premium_long_upper - 2 * premium_short_middle) * contracts * contract_size + commission_per_contract * legs * contracts",
            "dependencies": [
              "premium_long_lower",
              "premium_long_upper",
              "premium_short_middle",
              "contracts",
              "contract_size",
              "commission_per_contract",
              "legs"
            ],
            "label": "Net initial cost (debit positive / credit negative)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "wing_width": {
            "expression": "strike_middle - strike_lower",
            "dependencies": [
              "strike_middle",
              "strike_lower"
            ],
            "label": "Wing width (strike spacing)",
            "unit": "USD",
            "format": "decimal",
            "display": false
          },
          "max_profit": {
            "expression": "wing_width * contract_size * contracts - initial_cost",
            "dependencies": [
              "wing_width",
              "contract_size",
              "contracts",
              "initial_cost"
            ],
            "label": "Maximum possible profit",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "max_loss": {
            "expression": "initial_cost",
            "dependencies": [
              "initial_cost"
            ],
            "label": "Maximum possible loss (initial cost for long butterfly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "breakeven_lower": {
            "expression": "strike_lower + (initial_cost / (contract_size * contracts))",
            "dependencies": [
              "strike_lower",
              "initial_cost",
              "contract_size",
              "contracts"
            ],
            "label": "Lower break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          },
          "breakeven_upper": {
            "expression": "strike_upper - (initial_cost / (contract_size * contracts))",
            "dependencies": [
              "strike_upper",
              "initial_cost",
              "contract_size",
              "contracts"
            ],
            "label": "Upper break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "initial_cost",
            "label": "Net initial cost (debit + fees)",
            "variable": "initial_cost",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_profit",
            "label": "Maximum profit",
            "variable": "max_profit",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_loss",
            "label": "Maximum loss",
            "variable": "max_loss",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "breakeven_lower",
            "label": "Lower breakeven",
            "variable": "breakeven_lower",
            "unit": "USD",
            "format": "decimal"
          },
          {
            "id": "breakeven_upper",
            "label": "Upper breakeven",
            "variable": "breakeven_upper",
            "unit": "USD",
            "format": "decimal"
          }
        ]
      },
      "long_put_butterfly": {
        "label": "Long Put Butterfly",
        "description": "Long butterfly constructed with puts: buy 1 lower-strike put, sell 2 middle-strike puts, buy 1 upper-strike put. Similar payoff shape to call butterfly but using puts.",
        "variables": {
          "legs": {
            "expression": "4",
            "dependencies": [],
            "label": "Number of option legs",
            "display": false,
            "format": "integer"
          },
          "initial_cost": {
            "expression": "(premium_long_lower_put + premium_long_upper_put - 2 * premium_short_middle_put) * contracts * contract_size + commission_per_contract * legs * contracts",
            "dependencies": [
              "premium_long_lower_put",
              "premium_long_upper_put",
              "premium_short_middle_put",
              "contracts",
              "contract_size",
              "commission_per_contract",
              "legs"
            ],
            "label": "Net initial cost (debit positive / credit negative)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "wing_width": {
            "expression": "strike_middle_put - strike_lower_put",
            "dependencies": [
              "strike_middle_put",
              "strike_lower_put"
            ],
            "label": "Wing width (strike spacing)",
            "unit": "USD",
            "format": "decimal",
            "display": false
          },
          "max_profit": {
            "expression": "wing_width * contract_size * contracts - initial_cost",
            "dependencies": [
              "wing_width",
              "contract_size",
              "contracts",
              "initial_cost"
            ],
            "label": "Maximum possible profit",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "max_loss": {
            "expression": "initial_cost",
            "dependencies": [
              "initial_cost"
            ],
            "label": "Maximum possible loss (initial cost for long butterfly)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "breakeven_lower": {
            "expression": "strike_lower_put + (initial_cost / (contract_size * contracts))",
            "dependencies": [
              "strike_lower_put",
              "initial_cost",
              "contract_size",
              "contracts"
            ],
            "label": "Lower break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          },
          "breakeven_upper": {
            "expression": "strike_upper_put - (initial_cost / (contract_size * contracts))",
            "dependencies": [
              "strike_upper_put",
              "initial_cost",
              "contract_size",
              "contracts"
            ],
            "label": "Upper break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "initial_cost",
            "label": "Net initial cost (debit + fees)",
            "variable": "initial_cost",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_profit",
            "label": "Maximum profit",
            "variable": "max_profit",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_loss",
            "label": "Maximum loss",
            "variable": "max_loss",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "breakeven_lower",
            "label": "Lower breakeven",
            "variable": "breakeven_lower",
            "unit": "USD",
            "format": "decimal"
          },
          {
            "id": "breakeven_upper",
            "label": "Upper breakeven",
            "variable": "breakeven_upper",
            "unit": "USD",
            "format": "decimal"
          }
        ]
      },
      "iron_butterfly": {
        "label": "Iron Butterfly",
        "description": "Iron butterfly combines a short straddle at the middle strike with long wings (one protective call and one protective put). Typically initiated for a net credit and has different risk profile than a long butterfly.",
        "variables": {
          "legs": {
            "expression": "4",
            "dependencies": [],
            "label": "Number of option legs",
            "display": false,
            "format": "integer"
          },
          "net_credit": {
            "expression": "(premium_short_call + premium_short_put - premium_long_call - premium_long_put) * contracts * contract_size - commission_per_contract * legs * contracts",
            "dependencies": [
              "premium_short_call",
              "premium_short_put",
              "premium_long_call",
              "premium_long_put",
              "contracts",
              "contract_size",
              "commission_per_contract",
              "legs"
            ],
            "label": "Net initial credit (positive = credit received)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "width_call": {
            "expression": "strike_call_short - strike_call_long",
            "dependencies": [
              "strike_call_short",
              "strike_call_long"
            ],
            "label": "Call-side wing width",
            "unit": "USD",
            "format": "decimal",
            "display": false
          },
          "width_put": {
            "expression": "strike_put_short - strike_put_long",
            "dependencies": [
              "strike_put_short",
              "strike_put_long"
            ],
            "label": "Put-side wing width",
            "unit": "USD",
            "format": "decimal",
            "display": false
          },
          "wing_width": {
            "expression": "width_call",
            "dependencies": [
              "width_call",
              "width_put"
            ],
            "label": "Selected wing width (assumes symmetric or user-chosen)",
            "unit": "USD",
            "format": "decimal",
            "display": false
          },
          "max_profit": {
            "expression": "net_credit",
            "dependencies": [
              "net_credit"
            ],
            "label": "Maximum possible profit (initial credit)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "max_loss": {
            "expression": "wing_width * contract_size * contracts - net_credit",
            "dependencies": [
              "wing_width",
              "contract_size",
              "contracts",
              "net_credit"
            ],
            "label": "Maximum possible loss",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "breakeven_lower": {
            "expression": "strike_put_short - (net_credit / (contract_size * contracts))",
            "dependencies": [
              "strike_put_short",
              "net_credit",
              "contract_size",
              "contracts"
            ],
            "label": "Lower break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          },
          "breakeven_upper": {
            "expression": "strike_call_short + (net_credit / (contract_size * contracts))",
            "dependencies": [
              "strike_call_short",
              "net_credit",
              "contract_size",
              "contracts"
            ],
            "label": "Upper break-even price",
            "unit": "USD",
            "format": "decimal",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "net_credit",
            "label": "Net initial credit (after fees)",
            "variable": "net_credit",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_profit",
            "label": "Maximum profit",
            "variable": "max_profit",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "max_loss",
            "label": "Maximum loss",
            "variable": "max_loss",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "breakeven_lower",
            "label": "Lower breakeven",
            "variable": "breakeven_lower",
            "unit": "USD",
            "format": "decimal"
          },
          {
            "id": "breakeven_upper",
            "label": "Upper breakeven",
            "variable": "breakeven_upper",
            "unit": "USD",
            "format": "decimal"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "method",
        "label": "Strategy",
        "type": "select",
        "default": "long_call_butterfly",
        "options": [
          {
            "label": "Long Call Butterfly",
            "value": "long_call_butterfly"
          },
          {
            "label": "Long Put Butterfly",
            "value": "long_put_butterfly"
          },
          {
            "label": "Iron Butterfly",
            "value": "iron_butterfly"
          }
        ]
      },
      {
        "id": "contracts",
        "label": "Number of option contracts",
        "type": "integer",
        "default": 1,
        "min": 1,
        "step": 1
      },
      {
        "id": "contract_size",
        "label": "Contract size (shares per contract)",
        "type": "integer",
        "default": 100,
        "min": 1,
        "step": 1
      },
      {
        "id": "commission_per_contract",
        "label": "Commission per contract (per leg)",
        "type": "number",
        "default": 0.65,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "underlying_price",
        "label": "Current underlying price (optional)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      }
    ],
    "sections": [
      {
        "id": "section_long_call_butterfly",
        "label": "Long Call Butterfly inputs",
        "show_when": {
          "field": "method",
          "is": "long_call_butterfly"
        },
        "fields": [
          {
            "id": "strike_lower",
            "label": "Lower strike (long call)",
            "type": "number",
            "default": 95,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_middle",
            "label": "Middle strike (short calls)",
            "type": "number",
            "default": 100,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_upper",
            "label": "Upper strike (long call)",
            "type": "number",
            "default": 105,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_lower",
            "label": "Premium paid for lower long call (per share)",
            "type": "number",
            "default": 6.5,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_short_middle",
            "label": "Premium received for each short middle call (per share)",
            "type": "number",
            "default": 3.0,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_upper",
            "label": "Premium paid for upper long call (per share)",
            "type": "number",
            "default": 0.8,
            "min": 0,
            "step": 0.01
          }
        ]
      },
      {
        "id": "section_long_put_butterfly",
        "label": "Long Put Butterfly inputs",
        "show_when": {
          "field": "method",
          "is": "long_put_butterfly"
        },
        "fields": [
          {
            "id": "strike_lower_put",
            "label": "Lower strike (long put)",
            "type": "number",
            "default": 95,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_middle_put",
            "label": "Middle strike (short puts)",
            "type": "number",
            "default": 100,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_upper_put",
            "label": "Upper strike (long put)",
            "type": "number",
            "default": 105,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_lower_put",
            "label": "Premium paid for lower long put (per share)",
            "type": "number",
            "default": 0.8,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_short_middle_put",
            "label": "Premium received for each short middle put (per share)",
            "type": "number",
            "default": 3.0,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_upper_put",
            "label": "Premium paid for upper long put (per share)",
            "type": "number",
            "default": 6.5,
            "min": 0,
            "step": 0.01
          }
        ]
      },
      {
        "id": "section_iron_butterfly",
        "label": "Iron Butterfly inputs",
        "show_when": {
          "field": "method",
          "is": "iron_butterfly"
        },
        "fields": [
          {
            "id": "strike_call_long",
            "label": "Long call strike (upper protective call)",
            "type": "number",
            "default": 105,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_call_short",
            "label": "Short call strike (middle short call)",
            "type": "number",
            "default": 100,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_put_short",
            "label": "Short put strike (middle short put)",
            "type": "number",
            "default": 100,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "strike_put_long",
            "label": "Long put strike (lower protective put)",
            "type": "number",
            "default": 95,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_call",
            "label": "Premium paid for long call (per share)",
            "type": "number",
            "default": 0.8,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_short_call",
            "label": "Premium received for short call (per share)",
            "type": "number",
            "default": 3.0,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_short_put",
            "label": "Premium received for short put (per share)",
            "type": "number",
            "default": 3.0,
            "min": 0,
            "step": 0.01
          },
          {
            "id": "premium_long_put",
            "label": "Premium paid for long put (per share)",
            "type": "number",
            "default": 0.8,
            "min": 0,
            "step": 0.01
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator supports three common butterfly implementations: long call butterfly, long put butterfly, and iron butterfly. Enter strike prices, per-share option premiums, contract quantity, contract size, and commission per contract to compute net cost or credit, maximum profit and loss, and break-even prices.",
      "Results are provided as standard approximations used for option payoff analysis at expiry. The tool is intended for scenario analysis and trade planning; it does not execute trades or provide margin estimates."
    ],
    "methodology": [
      "Each method models the standard contract mix and computes net cash flow at opening (debit or credit including commission per leg). Payoff calculations assume European-style expiry payoff per share and do not include margin, early assignment, or exercise mechanics.",
      "Formulas use strike spacing and net premium to derive theoretical maximum profit and loss and breakeven points. For iron butterflies the tool assumes user-supplied wing widths and computes losses using the chosen wing width. If widths are asymmetric, review results carefully—real-world margin and assignment risk can differ."
    ],
    "how_is_calculated": [
      "Net initial cost (long butterflies) = (sum of premiums paid - sum of premiums received) * contracts * contract_size + commissions_total.",
      "Net initial credit (iron butterfly) = (premiums received - premiums paid) * contracts * contract_size - commissions_total.",
      "Maximum profit (long butterfly) ≈ wing_width * contract_size * contracts - initial_cost. Maximum loss (long butterfly) ≈ initial_cost.",
      "Maximum profit (iron butterfly) ≈ net_credit. Maximum loss (iron butterfly) ≈ wing_width * contract_size * contracts - net_credit.",
      "Break-even points are computed by adding/subtracting per-share net debit or net credit divided by (contract_size * contracts) to the relevant short strikes."
    ],
    "faqs": [
      {
        "question": "How accurate are these numbers?",
        "answer": "Outputs use deterministic arithmetic based on user inputs and common payoff formulas. They do not model implied volatility changes, early assignment, dividends, transaction slippage, or real-time exchange fees. For precision in live trading, reconcile with broker/clearing margin rules and market data. The tool follows general practice and provides conservative assumptions; see citations for standards on measurement, testing, and documentation."
      },
      {
        "question": "Do you model Greeks or margin requirements?",
        "answer": "No. This calculator focuses on static expiry payoff, net cost/credit, and break-even analysis. Greeks (vega, theta, delta) and margin requirements require dynamic pricing models and broker-specific rules and are outside this tool's scope."
      },
      {
        "question": "What inputs should I verify before relying on results?",
        "answer": "Confirm premium quotes are per-share (not per contract), ensure strikes and wing widths reflect the intended structure, and enter commissions consistent with your broker. For iron butterflies, ensure you understand which strikes are short vs long. When in doubt, test with small contract counts and cross-check with broker tools."
      }
    ],
    "citations": [
      {
        "label": "NIST (general measurement and testing guidance)",
        "url": "https://www.nist.gov"
      },
      {
        "label": "ISO 31000 (risk management principles)",
        "url": "https://www.iso.org/iso-31000-risk-management.html"
      },
      {
        "label": "IEEE Standards (general standards and best practices)",
        "url": "https://standards.ieee.org"
      },
      {
        "label": "OSHA (operational safety and procedural guidance)",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Net initial cost / net credit",
        "definition": "The cash flow when the position is opened: positive for net debit (you pay), negative for net credit (you receive), after commissions."
      },
      {
        "term": "Wing width",
        "definition": "Distance between adjacent strikes in a butterfly (e.g., middle strike minus lower strike). Determines max intrinsic value at expiration."
      },
      {
        "term": "Break-even points",
        "definition": "Underlying prices at expiry where the strategy's payoff equals the initial cash flow (no profit or loss)."
      },
      {
        "term": "Maximum profit",
        "definition": "Highest possible profit at expiration under the standard expiry payoff model, ignoring margin and assignment."
      },
      {
        "term": "Maximum loss",
        "definition": "Largest possible loss at expiration under the standard expiry payoff model; for long butterflies this is typically the initial debit, for iron butterflies it is based on wing width minus net credit."
      }
    ]
  },
  "links": {
    "internal": [
      "/options/strategies/butterfly",
      "/tools/options-payoff"
    ],
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org/iso-31000-risk-management.html",
        "label": "ISO 31000",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://standards.ieee.org",
        "label": "IEEE Standards",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo"
    ]
  }
}