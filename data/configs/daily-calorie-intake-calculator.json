{
  "version": "1.0.0",
  "metadata": {
    "title": "Daily Calorie Intake Calculator (Multi-method)",
    "description": "Estimate your daily caloric needs (kcal) using multiple validated methods. Choose inputs for age, sex, weight, height, optional body fat, activity level, and goal (maintain/lose/gain). Includes method switching, transparent formulas, and accuracy notes referencing standards for software validation and safety."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "mifflin_st_jeor",
    "methods": {
      "mifflin_st_jeor": {
        "label": "Mifflin–St Jeor (widely used modern BMR)",
        "description": "Baseline metabolic rate using the Mifflin–St Jeor equation, then scaled by activity factor and adjusted for weight-change goal.",
        "variables": {
          "bmr": {
            "expression": "10 * weight_kg + 6.25 * height_cm - 5 * age + (sex == 'male' ? 5 : -161)",
            "dependencies": [
              "weight_kg",
              "height_cm",
              "age",
              "sex"
            ],
            "label": "Basal metabolic rate (BMR)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "tdee": {
            "expression": "bmr * activity_level",
            "dependencies": [
              "bmr",
              "activity_level"
            ],
            "label": "Total Daily Energy Expenditure (TDEE)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "adjusted_calories": {
            "expression": "tdee + tdee * goal",
            "dependencies": [
              "tdee",
              "goal"
            ],
            "label": "Recommended daily calories (adjusted for goal)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "tdee",
            "label": "Estimated TDEE",
            "variable": "tdee",
            "unit": "kcal",
            "format": "integer"
          },
          {
            "id": "adjusted_calories",
            "label": "Daily calories for selected goal",
            "variable": "adjusted_calories",
            "unit": "kcal",
            "format": "integer"
          }
        ]
      },
      "harris_benedict": {
        "label": "Revised Harris–Benedict (older BMR formula)",
        "description": "Alternative BMR calculation using the revised Harris–Benedict formula, then scaled by activity factor and adjusted for goal.",
        "variables": {
          "bmr": {
            "expression": "sex == 'male' ? (88.362 + 13.397 * weight_kg + 4.799 * height_cm - 5.677 * age) : (447.593 + 9.247 * weight_kg + 3.098 * height_cm - 4.330 * age)",
            "dependencies": [
              "weight_kg",
              "height_cm",
              "age",
              "sex"
            ],
            "label": "Basal metabolic rate (BMR) - Harris–Benedict",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "tdee": {
            "expression": "bmr * activity_level",
            "dependencies": [
              "bmr",
              "activity_level"
            ],
            "label": "Total Daily Energy Expenditure (TDEE)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "adjusted_calories": {
            "expression": "tdee + tdee * goal",
            "dependencies": [
              "tdee",
              "goal"
            ],
            "label": "Recommended daily calories (adjusted for goal)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "tdee",
            "label": "Estimated TDEE",
            "variable": "tdee",
            "unit": "kcal",
            "format": "integer"
          },
          {
            "id": "adjusted_calories",
            "label": "Daily calories for selected goal",
            "variable": "adjusted_calories",
            "unit": "kcal",
            "format": "integer"
          }
        ]
      },
      "katch_mcardle": {
        "label": "Katch–McArdle (lean-mass based)",
        "description": "BMR estimated from lean body mass. Requires body fat percentage. If body fat is 0 or not provided, result will follow Mifflin–St Jeor if available.",
        "variables": {
          "lean_mass": {
            "expression": "body_fat_pct > 0 ? weight_kg * (1 - body_fat_pct / 100) : null",
            "dependencies": [
              "weight_kg",
              "body_fat_pct"
            ],
            "label": "Lean body mass (kg)",
            "unit": "kg",
            "format": "decimal",
            "display": true
          },
          "bmr": {
            "expression": "lean_mass != null ? 370 + 21.6 * lean_mass : (10 * weight_kg + 6.25 * height_cm - 5 * age + (sex == 'male' ? 5 : -161))",
            "dependencies": [
              "lean_mass",
              "weight_kg",
              "height_cm",
              "age",
              "sex"
            ],
            "label": "Basal metabolic rate (BMR)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "tdee": {
            "expression": "bmr * activity_level",
            "dependencies": [
              "bmr",
              "activity_level"
            ],
            "label": "Total Daily Energy Expenditure (TDEE)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          },
          "adjusted_calories": {
            "expression": "tdee + tdee * goal",
            "dependencies": [
              "tdee",
              "goal"
            ],
            "label": "Recommended daily calories (adjusted for goal)",
            "unit": "kcal",
            "format": "integer",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "tdee",
            "label": "Estimated TDEE",
            "variable": "tdee",
            "unit": "kcal",
            "format": "integer"
          },
          {
            "id": "adjusted_calories",
            "label": "Daily calories for selected goal",
            "variable": "adjusted_calories",
            "unit": "kcal",
            "format": "integer"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "sex",
        "label": "Sex",
        "type": "select",
        "default": "female",
        "options": [
          {
            "label": "Female",
            "value": "female"
          },
          {
            "label": "Male",
            "value": "male"
          }
        ]
      },
      {
        "id": "age",
        "label": "Age (years)",
        "type": "integer",
        "default": 30,
        "min": 10,
        "max": 120,
        "step": 1
      },
      {
        "id": "weight_kg",
        "label": "Weight (kg)",
        "type": "number",
        "default": 70,
        "min": 20,
        "max": 300,
        "step": 0.1
      },
      {
        "id": "height_cm",
        "label": "Height (cm)",
        "type": "number",
        "default": 170,
        "min": 50,
        "max": 250,
        "step": 0.1
      },
      {
        "id": "body_fat_pct",
        "label": "Body fat (%) — optional (required for Katch–McArdle)",
        "type": "number",
        "default": 0,
        "min": 0,
        "max": 70,
        "step": 0.1
      },
      {
        "id": "activity_level",
        "label": "Activity level (pick closest)",
        "type": "select",
        "default": "1.2",
        "options": [
          {
            "label": "Sedentary (little or no exercise)",
            "value": "1.2"
          },
          {
            "label": "Lightly active (light exercise 1–3 days/week)",
            "value": "1.375"
          },
          {
            "label": "Moderately active (moderate exercise 3–5 days/week)",
            "value": "1.55"
          },
          {
            "label": "Very active (hard exercise 6–7 days/week)",
            "value": "1.725"
          },
          {
            "label": "Extra active (very hard exercise or physical job)",
            "value": "1.9"
          }
        ]
      },
      {
        "id": "goal",
        "label": "Goal",
        "type": "select",
        "default": "0",
        "options": [
          {
            "label": "Maintain weight",
            "value": "0"
          },
          {
            "label": "Weight loss (~10% deficit)",
            "value": "-0.1"
          },
          {
            "label": "Weight loss (~20% deficit)",
            "value": "-0.2"
          },
          {
            "label": "Weight gain (moderate surplus ~10%)",
            "value": "0.1"
          },
          {
            "label": "Weight gain (aggressive surplus ~15%)",
            "value": "0.15"
          }
        ]
      }
    ]
  },
  "page_content": {
    "introduction": [
      "This calculator estimates daily calorie needs using multiple peer-accepted formulas (Mifflin–St Jeor, revised Harris–Benedict, and Katch–McArdle). Select the method that best fits your available data and preferences.",
      "Use age, sex, weight, height, activity level, and an adjustable goal (maintain, deficit, or surplus). Optional body fat percentage lets the Katch–McArdle method compute energy needs from lean mass."
    ],
    "methodology": [
      "Equations implemented are standard published formulas for basal metabolic rate (BMR). BMR is multiplied by an activity factor to produce Total Daily Energy Expenditure (TDEE). The final recommendation applies a goal adjustment (percentage deficit or surplus).",
      "We follow software and quality guidance to help ensure reliability: validate inputs, enforce reasonable min/max ranges, and flag missing required values for each method. See citations for standards on software validation and medical device/software quality."
    ],
    "how_is_calculated": [
      "Mifflin–St Jeor BMR: 10 × weight(kg) + 6.25 × height(cm) − 5 × age(years) + (5 if male, −161 if female).",
      "Revised Harris–Benedict BMR: male: 88.362 + 13.397×weight + 4.799×height − 5.677×age; female: 447.593 + 9.247×weight + 3.098×height − 4.330×age.",
      "Katch–McArdle BMR: 370 + 21.6 × lean_mass(kg) where lean_mass = weight × (1 minus body_fat_fraction).",
      "TDEE = BMR × activity_factor. Final recommended daily calories = TDEE × (1 + goal), where goal is negative for a deficit and positive for a surplus."
    ],
    "faqs": [
      {
        "question": "Which method should I choose?",
        "answer": "If you know your body fat percentage, Katch–McArdle can be more personalized. Mifflin–St Jeor is recommended for general population estimates. Harris–Benedict is an acceptable alternative. All are estimates and should be combined with monitoring."
      },
      {
        "question": "How accurate are these numbers?",
        "answer": "These are population-level estimates and can vary per individual by ±10–20% or more. Use them as starting points, then track weight and composition changes and adjust. See accuracy and standards notes in citations."
      },
      {
        "question": "Can I use this if I have a medical condition?",
        "answer": "This tool does not replace medical or dietetic advice. Consult a healthcare professional for conditions that affect metabolism, such as thyroid disorders, recent surgery, or pregnancy."
      },
      {
        "question": "Why enforce input ranges?",
        "answer": "Input range checks reduce the risk of nonsensical outputs and help meet basic software safety and usability expectations as recommended by engineering standards."
      }
    ],
    "citations": [
      {
        "label": "National Institute of Standards and Technology (NIST) — Software and Systems Validation Guidance",
        "url": "https://www.nist.gov"
      },
      {
        "label": "International Organization for Standardization (ISO) — Quality and safety standards for health software",
        "url": "https://www.iso.org"
      },
      {
        "label": "IEEE — Standards for software engineering and system safety best-practices",
        "url": "https://www.ieee.org"
      },
      {
        "label": "Occupational Safety and Health Administration (OSHA) — Guidance on safety and human-factors considerations",
        "url": "https://www.osha.gov"
      }
    ],
    "glossary": [
      {
        "term": "Basal Metabolic Rate (BMR)",
        "definition": "Energy expended at rest to maintain basic physiological functions. Formulas estimate BMR from age, sex, weight, height, and/or lean mass."
      },
      {
        "term": "Total Daily Energy Expenditure (TDEE)",
        "definition": "Estimated total calories burned each day: BMR multiplied by an activity factor representing average daily activity."
      },
      {
        "term": "kcal",
        "definition": "Kilocalorie, commonly referred to as 'calorie' in dietary contexts; the unit used for food energy."
      },
      {
        "term": "Activity factor",
        "definition": "Multiplier representing average daily physical activity. Typical values range from about 1.2 (sedentary) to 1.9 (very active)."
      }
    ]
  },
  "links": {
    "external": [
      {
        "url": "https://www.nist.gov",
        "label": "NIST home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.iso.org",
        "label": "ISO home",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  }
}
