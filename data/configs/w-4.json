{
  "version": "1.0.0",
  "metadata": {
    "title": "W-4 Withholding Calculator (Advanced)",
    "description": "Estimate federal tax withholding per pay period and recommended additional withholding using quick or target-based workflows. Includes conservative accuracy notes and citations to standards for validation and data handling."
  },
  "logic": {
    "type": "advanced",
    "defaultMethod": "quick_estimate",
    "methods": {
      "quick_estimate": {
        "label": "Quick estimate (use an effective tax rate)",
        "description": "Estimate your annual tax using an effective tax rate you provide or accept the default. Good when you want a fast, transparent estimate without entering detailed tax-bracket data.",
        "variables": {
          "annual_income": {
            "expression": "wages_per_period * pay_periods_per_year + other_income_annual",
            "dependencies": [
              "wages_per_period",
              "pay_periods_per_year",
              "other_income_annual"
            ],
            "label": "Estimated total annual income",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "taxable_income": {
            "expression": "annual_income - estimated_annual_deductions",
            "dependencies": [
              "annual_income",
              "estimated_annual_deductions"
            ],
            "label": "Estimated taxable income (before credits)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "annual_tax_estimate": {
            "expression": "taxable_income * effective_tax_rate",
            "dependencies": [
              "taxable_income",
              "effective_tax_rate"
            ],
            "label": "Estimated annual federal tax",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "current_total_withholding": {
            "expression": "additional_withholding_per_period * pay_periods_per_year + current_annual_withholding",
            "dependencies": [
              "additional_withholding_per_period",
              "pay_periods_per_year",
              "current_annual_withholding"
            ],
            "label": "Current annual withholding (including extra amounts)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "recommended_additional_per_period": {
            "expression": "(annual_tax_estimate - current_total_withholding) / pay_periods_per_year",
            "dependencies": [
              "annual_tax_estimate",
              "current_total_withholding",
              "pay_periods_per_year"
            ],
            "label": "Recommended additional withholding per pay period",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "estimated_total_annual_income",
            "label": "Estimated total annual income",
            "variable": "annual_income",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "estimated_taxable_income",
            "label": "Estimated taxable income",
            "variable": "taxable_income",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "estimated_annual_tax",
            "label": "Estimated annual federal tax",
            "variable": "annual_tax_estimate",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "current_annual_withholding",
            "label": "Current annual withholding (total)",
            "variable": "current_total_withholding",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "recommended_additional_per_period",
            "label": "Recommended additional withholding per pay period",
            "variable": "recommended_additional_per_period",
            "unit": "USD",
            "format": "currency"
          }
        ]
      },
      "target_based": {
        "label": "Target input (use your expected annual tax)",
        "description": "Enter your expected annual federal tax from last year or your tax preparer. The tool calculates how much additional withholding per pay period is needed to reach that target.",
        "variables": {
          "annual_income": {
            "expression": "wages_per_period * pay_periods_per_year + other_income_annual",
            "dependencies": [
              "wages_per_period",
              "pay_periods_per_year",
              "other_income_annual"
            ],
            "label": "Estimated total annual income",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "current_total_withholding": {
            "expression": "additional_withholding_per_period * pay_periods_per_year + current_annual_withholding",
            "dependencies": [
              "additional_withholding_per_period",
              "pay_periods_per_year",
              "current_annual_withholding"
            ],
            "label": "Current annual withholding (including extra amounts)",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "shortfall": {
            "expression": "annual_tax_liability - current_total_withholding",
            "dependencies": [
              "annual_tax_liability",
              "current_total_withholding"
            ],
            "label": "Remaining tax to withhold this year",
            "unit": "USD",
            "format": "currency",
            "display": true
          },
          "recommended_additional_per_period": {
            "expression": "shortfall / pay_periods_per_year",
            "dependencies": [
              "shortfall",
              "pay_periods_per_year"
            ],
            "label": "Recommended additional withholding per pay period",
            "unit": "USD",
            "format": "currency",
            "display": true
          }
        },
        "outputs": [
          {
            "id": "estimated_total_annual_income",
            "label": "Estimated total annual income",
            "variable": "annual_income",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "current_annual_withholding",
            "label": "Current annual withholding (total)",
            "variable": "current_total_withholding",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "remaining_shortfall",
            "label": "Remaining tax to withhold this year",
            "variable": "shortfall",
            "unit": "USD",
            "format": "currency"
          },
          {
            "id": "recommended_additional_per_period",
            "label": "Recommended additional withholding per pay period",
            "variable": "recommended_additional_per_period",
            "unit": "USD",
            "format": "currency"
          }
        ]
      }
    }
  },
  "form": {
    "fields": [
      {
        "id": "filing_status",
        "label": "Filing status",
        "type": "select",
        "default": "single",
        "options": [
          {
            "label": "Single",
            "value": "single"
          },
          {
            "label": "Married filing jointly",
            "value": "married_joint"
          },
          {
            "label": "Married filing separately",
            "value": "married_separate"
          },
          {
            "label": "Head of household",
            "value": "head_household"
          }
        ]
      },
      {
        "id": "pay_periods_per_year",
        "label": "Pay frequency (periods per year)",
        "type": "select",
        "default": "24",
        "options": [
          {
            "label": "Weekly (52)",
            "value": "52"
          },
          {
            "label": "Every 2 weeks (26)",
            "value": "26"
          },
          {
            "label": "Semi-monthly (24)",
            "value": "24"
          },
          {
            "label": "Monthly (12)",
            "value": "12"
          },
          {
            "label": "Quarterly (4)",
            "value": "4"
          }
        ]
      },
      {
        "id": "wages_per_period",
        "label": "Wages per pay period (gross)",
        "type": "number",
        "default": 1000,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "other_income_annual",
        "label": "Other annual taxable income (interest, dividends, self-employment, etc.)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "estimated_annual_deductions",
        "label": "Estimated annual deductions (itemized or standard amount)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "effective_tax_rate",
        "label": "Assumed effective federal tax rate (decimal, e.g. 0.12 for 12%)",
        "type": "number",
        "default": 0.12,
        "min": 0,
        "max": 1,
        "step": 0.001
      },
      {
        "id": "additional_withholding_per_period",
        "label": "Current additional federal withholding per pay period (on Form W-4 Line for extra withholding)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "current_annual_withholding",
        "label": "Current total annual federal withholding (from pay stubs or payroll)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      },
      {
        "id": "annual_tax_liability",
        "label": "Expected annual federal tax liability (use last filed return or tax pro estimate)",
        "type": "number",
        "default": 0,
        "min": 0,
        "step": 0.01
      }
    ],
    "result": {
      "outputs": [
        {
          "id": "estimated_total_annual_income",
          "label": "Estimated total annual income"
        },
        {
          "id": "estimated_taxable_income",
          "label": "Estimated taxable income"
        },
        {
          "id": "estimated_annual_tax",
          "label": "Estimated annual federal tax"
        },
        {
          "id": "current_annual_withholding",
          "label": "Current annual withholding (total)"
        },
        {
          "id": "recommended_additional_per_period",
          "label": "Recommended additional withholding per pay period",
          "format": "currency",
          "unit": "USD"
        },
        {
          "id": "remaining_shortfall",
          "label": "Remaining tax to withhold this year"
        }
      ]
    }
  },
  "page_content": {
    "introduction": [
      "This W-4 withholding calculator provides two workflows: a quick estimate that uses an effective federal tax rate you supply, and a target-based workflow that uses an expected annual tax liability. The tool focuses on practical, per-pay-period recommendations for additional withholding.",
      "Use the quick estimate when you want a fast projection based on a plausible effective tax rate. Use the target-based workflow when you have a known annual tax liability (for example from last year or from a tax preparer) and want to calculate how much additional withholding is needed each pay period."
    ],
    "methodology": [
      "The calculator annualizes pay-period wages and other taxable income, subtracts estimated deductions (entered by the user) to compute taxable income, and multiplies by an effective tax rate or a supplied annual tax liability to produce an annual tax target.",
      "Where precise bracketed tax calculations would require up-to-date rate tables and individual credits, this tool intentionally uses either a user-supplied effective rate or a supplied target liability to avoid making incorrect bracket assumptions. This approach prioritizes transparency and reduces the risk of hidden assumptions.",
      "For security and reliability of user data, system design follows guidance consistent with NIST Cybersecurity Framework controls for data protection and ISO/IEC 27001 for information security management. Calculation accuracy guidance references accepted engineering practices (IEEE) for algorithm validation and stresses operational safety in line with general compliance principles; this tool does not perform tax filing or professional advice functions."
    ],
    "how_is_calculated": [
      "Step 1: Annualize wages: annual income = wages per period × pay periods per year + other taxable income.",
      "Step 2: Compute taxable base: taxable income = annual income − estimated annual deductions (user-provided). Negative values are treated as zero for practical withholding considerations; check results if negative.",
      "Step 3a (Quick): Estimated annual tax = taxable income × effective tax rate (user input or default).",
      "Step 3b (Target): Use the user-provided annual tax liability as the annual tax target.",
      "Step 4: Current annual withholding = current annual withholding (from pay stubs) + additional withholding per period × pay periods per year.",
      "Step 5: Recommended additional per pay period = (annual tax target − current annual withholding) ÷ pay periods per year. If result is negative, it indicates current withholding exceeds the target."
    ],
    "examples": [
      "Example 1 (Quick): Weekly wages $800, 52 periods, no other income, estimated deductions $12,950, effective rate 0.12. The tool computes annual income, taxable income, estimated annual tax, compares to current withholding and returns recommended extra withholding per paycheck.",
      "Example 2 (Target): Monthly wages $4,000, annual tax liability from last year $10,000, current annual withholding $6,000. The tool divides the remaining $4,000 by 12 (periods) to show required additional withholding per month."
    ],
    "summary": [
      "This calculator provides a practical, conservative estimate to help you decide how to fill out extra withholding on Form W-4. It is not a replacement for a full tax-preparation computation which requires exact tax brackets, credits, and up-to-date law changes.",
      "For highest accuracy, cross-check outputs with your most recent tax return or consult a tax professional. Use the target-based mode when you know your expected annual tax liability."
    ],
    "faqs": [
      {
        "question": "Is this a replacement for filing taxes or professional tax advice?",
        "answer": "No. This tool provides estimates to help set withholding. It does not prepare tax returns or substitute for professional advice. For complex situations, consult a qualified tax preparer."
      },
      {
        "question": "What is an effective tax rate?",
        "answer": "An effective tax rate is total federal tax divided by taxable income. It is a single number representing average tax rate across brackets. Use a conservative estimate or your historical effective rate for best results."
      },
      {
        "question": "How accurate are the estimates?",
        "answer": "Estimates depend on user inputs and chosen method. The quick method uses a user-supplied effective rate and should be treated as an approximation. The target method uses a supplied annual tax liability and is as accurate as that liability. See citations for validation frameworks and data-protection standards. Always verify against official tax forms or a professional."
      },
      {
        "question": "What should I enter for deductions if I take the standard deduction?",
        "answer": "If you take the standard deduction, enter your expected standard deduction amount for the tax year. If unknown, enter zero and use the target-based workflow with an expected annual tax liability instead."
      },
      {
        "question": "What if the recommended additional withholding is negative?",
        "answer": "A negative value indicates your current withholding exceeds the estimated annual tax target. You may consider reducing additional withholding, but review your full tax picture before changing W-4 entries."
      }
    ],
    "glossary": [
      {
        "term": "Withholding",
        "definition": "Amounts withheld from wages by an employer and remitted to the IRS as prepayment of federal income tax."
      },
      {
        "term": "Taxable income",
        "definition": "Annual income subject to federal income tax after subtracting allowable deductions."
      },
      {
        "term": "Effective tax rate",
        "definition": "Average percentage of taxable income paid in federal tax; calculated as total tax divided by taxable income."
      },
      {
        "term": "Pay period frequency",
        "definition": "Number of paychecks you receive per year (for example, 24 for semi-monthly or 26 for biweekly)."
      }
    ],
    "citations": [
      {
        "label": "IRS — About Form W-4",
        "url": "https://www.irs.gov/forms-pubs/about-form-w-4"
      },
      {
        "label": "IRS — Tax Withholding Estimator",
        "url": "https://www.irs.gov/individuals/tax-withholding-estimator"
      },
      {
        "label": "NIST — Cybersecurity Framework",
        "url": "https://www.nist.gov/cyberframework"
      },
      {
        "label": "ISO — Information security management (ISO/IEC 27001)",
        "url": "https://www.iso.org/isoiec-27001-information-security.html"
      },
      {
        "label": "IEEE — Standards development",
        "url": "https://standards.ieee.org/"
      },
      {
        "label": "OSHA — General resources (organizational compliance resources)",
        "url": "https://www.osha.gov/"
      }
    ]
  },
  "links": {
    "internal": [
      "/tax-tools/withholding/w4-explainer",
      "/tax-tools/withholding/checklist"
    ],
    "external": [
      {
        "url": "https://www.irs.gov/forms-pubs/about-form-w-4",
        "label": "IRS — About Form W-4",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.irs.gov/individuals/tax-withholding-estimator",
        "label": "IRS — Tax Withholding Estimator",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      },
      {
        "url": "https://www.nist.gov/cyberframework",
        "label": "NIST Cybersecurity Framework",
        "rel": [
          "noopener",
          "noreferrer"
        ]
      }
    ]
  },
  "schema": {
    "additionalTypes": [
      "HowTo",
      "FinancialProduct"
    ]
  }
}
