# Cernarus Strategic Actions Matrix

Use this matrix to brief an engineering team or an AI planner on the next generation of the Cernarus enterprise calculator platform. It layers the current README narrative with tactical actions, success metrics, and guardrails so every collaborator—from developers to prompt engineers—can understand their role in advancing the build.

| Focus Area | Current State (per README) | Strategic Objective | Action Items | Owner / Stakeholders | Metrics & Signals |
|------------|-----------------------------|---------------------|--------------|----------------------|------------------|
| **Data foundation** | `data/calc.csv` is the single source of truth; new rows drive new calculators via `component_type` + `config_json`. | Harden the CSV pipeline so any new calculator entry is automatically validated, summarized, and published with zero bespoke code changes. | 1. Extend `scripts/lint-configs.js` to run schema + formula spot checks. 2. Document a CSV review checklist for AI writers. 3. Build an incremental importer (stub: `scripts/ingest-csv.js`) that previews how `data/summary.json` will change. | Data governance lead + Automation engineer | 0 build-time config errors; `data/summary.json` generation within 3s |
| **Critical CSS & UX shell** | `app/critical.css` + semantic helpers control the shell palette and now the theme toggle touches the entire layout. | Treat the critical shell as a differentiated asset: minimal, theme-aware, and decoupled from Tailwind. | 1. Audit `critical.css` to include only the selectors referenced in `app/layout.tsx`, `components/site-header.tsx`, and `components/site-footer.tsx`. 2. Create a small build step that validates the critical CSS size stays <4KB. 3. Add documentation for the palette helpers so prompt engineers expose the right class names in `config_json` copy. | UX lead + Frontend engineer | Critical CSS <4KB, no regressions in theme toggle |
| **Theme readiness** | Helpers (`.surface`, `.text-body`, etc.) + variable overrides cover most surfaces; the toggle is in both headers. | Reach 100% palette compliance across the app so dark/light mode feels cohesive and no Tailwind resets leak through. | 1. Run `rg -l "text-slate" | xargs` to find remaining slate classes. 2. Create migration guides for each component (already done for homepage). 3. Introduce automated visual regression via screenshot diff (Tailwind flag). | Visual QA + Frontend engineer | 0 Tailwind slate usage in `components/`; Visual diff < threshold |
| **Performance** | Tailwind bundle is ~25KB; inject critical CSS via import to avoid extra `<link>` tags. | Reduce render-blocking CSS and keep hydration fast for the 19 MB ISR constraint. | 1. Keep using `critical.css` import; ensure it still loads before Tailwind by ordering the imports in `globals.css`. 2. Monitor `.next/static/css` bundle size via CI alert. 3. Explore splitting the remainder of Tailwind into `tailwind-main.css` + deferred variants if size grows. | Platform lead + Build engineer | CSS bundle growth < 10% quarter-on-quarter; CI alert if >30KB |
| **Navigation & listings** | `lib/content.ts` consumes `data/summary.json` to feed category pages, mobile menu, sitemap, and metadata. | Make every list render static HTML links so crawlers see the full taxonomy without loading configs. | 1. Ensure `getCategories`/`getSubcategories` only return summary data (done). 2. Rerun `scripts/generate-summary.ts` nightly; add CI check to compare `summary.json` vs CSV row count. 3. Document how `LightweightCalculator` objects are derived so prompt/QA understands caching. | Content engineer + SEO analyst | Category pages load <200KB; sitemap includes all slugs |
| **AI prompt + pipeline** | Prompt template within `scripts/generate-prompts.js` asks for `component_type`, `config_json`, copy, citations, etc. | Treat prompt + CSV entry as a configurable workflow: research, generation, validation, publication. | 1. Version the prompt template with release notes. 2. Build `scripts/review-config.js` that compares new JSON to schema. 3. Add README section describing governance steps for AI output (valid escape rules, citation style). | Prompt engineer + Content lead | Zero invalid JSON rows per sprint; audit log for each row |
| **Visibility & SEO** | Category, footer, sitemap, metadata, canonical links documented in README. | Elevate internal linking and canonical signals to protect crawl equity. | 1. Extend `SiteFooter` to include hard-coded category links (done) and ensure canonical metadata is set on all critical pages. 2. Automate sitemap sanity check post-build (compare `/category` coverage to CSV). 3. Monitor Vercel build warnings for ISR page oversize (<19MB). | SEO lead + DevOps | No ISR warning; sitemap matches CSV count |

## Execution instructions

1. **Daily standups** kick off with a quick glance at `data/summary.json` size + ISR warnings.  
2. **When adding a calculator**, follow the same pipeline: research → prompt → CSV → lint → build. Tie each row to a `New_Publish_Date`, and let `npm run build` propagate the change.  
3. **For theme or layout tweaks**, update `critical.css` + helpers first, then refactor specific components—this keeps the critical CSS small and the shell responsive to the toggle.  
4. **AI/system audits** should center on `scripts/generate-summary.ts`, `lib/content.ts`, and `scripts/lint-configs.js` since those guarantee data integrity before any build.

Use this file alongside `README.md` as the authoritative playbook for building, governing, and evolving the Cernarus platform. If anything deviates (new engine, new prompt requirement, new CSS need), append to this matrix so the next developer or AI planner can act with clarity. --- ready to execute? noise
